{"version":3,"file":"static/js/4769.79f48d1d.chunk.js","mappings":"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","sources":["shared/web-shared/model-trace-explorer/FeatureUtils.ts","shared/web-shared/snippet/actions/SnippetActionButton.tsx","shared/web-shared/snippet/actions/SnippetCopyAction.tsx","shared/web-shared/snippet/hooks/useCopyController.tsx","shared/web-shared/snippet/index.tsx","shared/web-shared/errors/ErrorLogType.ts","shared/web-shared/errors/ErrorName.ts","shared/web-shared/errors/PredefinedErrors.tsx","shared/web-shared/model-trace-explorer/ModelTraceExplorer.utils.tsx","shared/web-shared/model-trace-explorer/ModelTrace.types.ts","shared/web-shared/model-trace-explorer/oss-notebook-renderer/mlflow-fetch-utils.ts","shared/web-shared/model-trace-explorer/oss-notebook-renderer/ModelTraceExplorerOSSNotebookRenderer.tsx","shared/web-shared/hooks/useResizeObserver.tsx"],"sourcesContent":["export const shouldEnableAssessmentEditing = () => {\n  return true;\n};\nexport const shouldEnableSummaryView = () => {\n  return true;\n};\nexport const getIsMlflowTraceUIEnabled = () => {\n  return true;\n};\n","import { css } from '@emotion/react';\nimport type { ReactNode } from 'react';\nimport React from 'react';\n\nimport type { ButtonProps } from '@databricks/design-system';\nimport { Button, LegacyTooltip } from '@databricks/design-system';\n\ntype SnippetActionButtonProps = Pick<ButtonProps, 'icon' | 'onClick' | 'href' | 'rel' | 'target'> & {\n  tooltipMessage: NonNullable<ReactNode>;\n};\n\nexport default function SnippetActionButton({ tooltipMessage, ...buttonProps }: SnippetActionButtonProps) {\n  const style = css({\n    zIndex: 1, // required for action buttons to be visible and float\n  });\n  return (\n    <LegacyTooltip title={tooltipMessage}>\n      <Button\n        componentId=\"codegen_web-shared_src_snippet_actions_snippetactionbutton.tsx_33\"\n        {...buttonProps}\n        css={style}\n      />\n    </LegacyTooltip>\n  );\n}\n","import React from 'react';\n\nimport type { ButtonProps } from '@databricks/design-system';\n\nimport SnippetActionButton from './SnippetActionButton';\nimport { useCopyController } from '../hooks/useCopyController';\n\nexport interface SnippetCopyActionProps extends ButtonProps {\n  /**\n   * The text to be copied into clipboard when action button is clicked.\n   */\n  copyText: string;\n  onClick?: (e: React.MouseEvent) => void;\n}\n\nexport function SnippetCopyAction({ copyText, onClick, ...props }: SnippetCopyActionProps) {\n  const { actionIcon, tooltipMessage, copy } = useCopyController(copyText);\n\n  return (\n    <SnippetActionButton\n      tooltipMessage={tooltipMessage}\n      icon={actionIcon}\n      onClick={(e) => {\n        copy();\n        onClick?.(e);\n      }}\n      {...props}\n    />\n  );\n}\n","import type { ReactElement } from 'react';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useClipboard } from 'use-clipboard-copy';\n\nimport { CheckIcon, CopyIcon } from '@databricks/design-system';\nimport { useIntl } from '@databricks/i18n';\n\nexport interface CopyController {\n  actionIcon: ReactElement;\n  tooltipMessage: string;\n  copy: () => void;\n  copied: boolean;\n  ariaLabel: string;\n  tooltipOpen: boolean;\n  handleTooltipOpenChange: (open: boolean) => void;\n}\n\n/**\n * Utility hook that is internal to web-shared, use: `Copyable` or `CopyActionButton`\n *  or if it's a `CodeSnippet`, `SnippetCopyAction`\n */\nexport function useCopyController(text: string, copyTooltip?: string, onCopy?: () => void): CopyController {\n  const intl = useIntl();\n\n  const copyMessage = copyTooltip\n    ? copyTooltip\n    : intl.formatMessage({\n        defaultMessage: 'Copy',\n        description: 'Tooltip message displayed on copy action',\n      });\n\n  const copiedMessage = intl.formatMessage({\n    defaultMessage: 'Copied',\n    description: 'Tooltip message displayed on copy action after it has been clicked',\n  });\n\n  const clipboard = useClipboard();\n  const copiedTimerIdRef = useRef<number>();\n  const [copied, setCopied] = useState(false);\n  const [open, setOpen] = useState(false);\n\n  useEffect(() => {\n    return () => {\n      window.clearTimeout(copiedTimerIdRef.current);\n    };\n  }, []);\n\n  const copy = () => {\n    clipboard.copy(text);\n    window.clearTimeout(copiedTimerIdRef.current);\n    setCopied(true);\n    onCopy?.();\n    copiedTimerIdRef.current = window.setTimeout(() => {\n      setCopied(false);\n    }, 3000);\n  };\n\n  return {\n    actionIcon: copied ? <CheckIcon /> : <CopyIcon />,\n    tooltipMessage: copied ? copiedMessage : copyMessage,\n    copy,\n    copied,\n    ariaLabel: copyMessage,\n    tooltipOpen: open || copied,\n    handleTooltipOpenChange: setOpen,\n  };\n}\n","import { PrismLight as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport go from 'react-syntax-highlighter/dist/cjs/languages/prism/go';\nimport java from 'react-syntax-highlighter/dist/cjs/languages/prism/java';\nimport javascript from 'react-syntax-highlighter/dist/cjs/languages/prism/javascript';\nimport json from 'react-syntax-highlighter/dist/cjs/languages/prism/json';\nimport python from 'react-syntax-highlighter/dist/cjs/languages/prism/python';\nimport yaml from 'react-syntax-highlighter/dist/cjs/languages/prism/yaml';\nimport sql from 'react-syntax-highlighter/dist/cjs/languages/prism/sql';\n\nSyntaxHighlighter.registerLanguage('sql', sql);\nSyntaxHighlighter.registerLanguage('java', java);\nSyntaxHighlighter.registerLanguage('python', python);\nSyntaxHighlighter.registerLanguage('go', go);\nSyntaxHighlighter.registerLanguage('javascript', javascript);\nSyntaxHighlighter.registerLanguage('yaml', yaml);\nSyntaxHighlighter.registerLanguage('json', json);\n\nimport duotoneDarkStyle from './theme/databricks-duotone-dark';\nimport lightStyle from './theme/databricks-light';\nimport { CSSProperties, ReactNode } from 'react';\nimport { pick } from 'lodash';\nexport type CodeSnippetTheme = 'duotoneDark' | 'light';\nexport const buttonBackgroundColorDark = 'rgba(140, 203, 255, 0)';\nexport const buttonColorDark = 'rgba(255, 255, 255, 0.84)';\nexport const buttonHoverColorDark = '#8ccbffcc';\nexport const buttonHoverBackgroundColorDark = 'rgba(140, 203, 255, 0.08)';\nexport const duboisAlertBackgroundColor = '#fff0f0';\nexport const snippetPadding = '24px';\nconst themesStyles: Record<CodeSnippetTheme, any> = {\n  light: lightStyle,\n  duotoneDark: duotoneDarkStyle,\n};\n\nexport type CodeSnippetLanguage = 'sql' | 'java' | 'python' | 'javascript' | 'go' | 'yaml' | 'text' | 'json';\n\nexport interface CodeSnippetProps {\n  /**\n   * The code string\n   */\n  children: string;\n  /**\n   * The actions that are displayed on the right top corner of the component\n   *  see `./actions` for built-in actions\n   */\n  actions?: NonNullable<ReactNode> | NonNullable<ReactNode>[];\n  /**\n   * The theme, default theme is `light`\n   */\n  theme?: CodeSnippetTheme;\n  /**\n   * Language of the code (`children`)\n   */\n  language: CodeSnippetLanguage;\n  /**\n   * Custom styles (passed to the internal `<pre>`)\n   */\n  style?: CSSProperties;\n  /**\n   * Whether to show line numbers on the left or not\n   */\n  showLineNumbers?: boolean;\n  /**\n   * Custom styles for line numbers\n   */\n  lineNumberStyle?: CSSProperties;\n  /**\n   * Boolean to specify whether to style the <code> block with white-space: pre-wrap or white-space: pre\n   */\n  wrapLongLines?: boolean;\n  /**\n   * Boolean that determines whether or not each line of code should be wrapped in a parent element\n   */\n  wrapLines?: boolean;\n  /**\n   * Props to pass to the line elements\n   */\n  lineProps?: React.HTMLProps<HTMLElement> | undefined;\n  /**\n   * Custom tag to use for the `<pre>` element\n   */\n  PreTag?: keyof JSX.IntrinsicElements | React.ComponentType<any> | undefined;\n}\n\n/**\n * `CodeSnippet` is used for highlighting code, use this instead of\n */\nexport function CodeSnippet({\n  theme = 'light',\n  language,\n  actions,\n  style,\n  children,\n  showLineNumbers,\n  lineNumberStyle,\n  wrapLongLines,\n  wrapLines,\n  PreTag,\n}: CodeSnippetProps) {\n  const customStyle = {\n    border: 'none',\n    borderRadius: 0,\n    margin: 0,\n    padding: snippetPadding,\n    ...style,\n  };\n  return (\n    <SyntaxHighlighter\n      showLineNumbers={showLineNumbers}\n      lineNumberStyle={lineNumberStyle}\n      language={language}\n      style={themesStyles[theme]}\n      customStyle={customStyle}\n      codeTagProps={{\n        style: pick(style, 'backgroundColor'),\n      }}\n      wrapLongLines={wrapLongLines}\n      wrapLines={wrapLines}\n      PreTag={PreTag}\n    >\n      {children}\n    </SyntaxHighlighter>\n  );\n}\n\nexport * from './actions/SnippetCopyAction';\n","export enum ErrorLogType {\n  UserInputError = 'UserInputError',\n  UnexpectedSystemStateError = 'UnexpectedSystemStateError',\n  ServerError = 'ServerError',\n  SessionError = 'SessionError',\n  NetworkError = 'NetworkError',\n  ApplicationError = 'ApplicationError',\n  UnknownError = 'UnknownError',\n}\n","export enum ErrorName {\n  BadRequestError = 'BadRequestError',\n  DatasetRunNotFoundError = 'DatasetRunNotFoundError',\n  FormValidationError = 'FormInputError',\n  GenericNetworkRequestError = 'GenericNetworkRequestError',\n  GraphQLGenericError = 'GraphQLGenericError',\n  InternalServerError = 'InternalServerError',\n  NotFoundError = 'NotFoundError',\n  PermissionError = 'PermissionError',\n  RateLimitedError = 'RateLimitedError',\n  RouteNotFoundError = 'RouteNotFoundError',\n  ServiceUnavailableError = 'ServiceUnavailableError',\n  UnauthorizedError = 'UnauthorizedError',\n  UnknownError = 'UnknownError',\n}\n","import { FormattedMessage } from 'react-intl';\n\n// eslint-disable-next-line no-restricted-imports\nimport type { ServerError } from '@apollo/client';\n\nimport { ErrorLogType } from './ErrorLogType';\nimport { ErrorName } from './ErrorName';\n\nexport type HandleableError = Error | string | Record<string, unknown> | PredefinedError | Response;\n\nexport type CausableError = Error | string | Record<string, unknown>;\n\nexport abstract class PredefinedError extends Error {\n  abstract errorLogType: ErrorLogType;\n  abstract errorName: ErrorName;\n  abstract displayMessage: React.ReactNode;\n  isUserError = false;\n\n  constructor(message?: string, cause?: CausableError) {\n    super(message);\n  }\n}\n\nexport const matchPredefinedError = (error: HandleableError) => {\n  if (error instanceof PredefinedError) {\n    return error;\n  }\n  if (error instanceof Error && ('networkError' in error || 'graphQLErrors' in error)) {\n    return matchPredefinedApolloError(error);\n  }\n\n  if (error instanceof Response) {\n    return matchPredefinedErrorFromResponse(error);\n  }\n\n  return new UnknownError(error);\n};\n\nexport function isServerError(e: unknown): e is ServerError {\n  return e instanceof Error && e.hasOwnProperty('response');\n}\n\nconst matchPredefinedApolloError = (error: Error) => {\n  // Some errors from Apollo mock provider may have `networkError` but are not `ServerError`\n  // only act on ServerError, which do have the response attached\n  if ('networkError' in error && isServerError(error.networkError)) {\n    return matchPredefinedErrorFromResponse(error.networkError.response, error.networkError);\n  }\n\n  return new GraphQLGenericError(error);\n};\n\nconst getNetworkRequestErrorDetailsFromResponse = (response: Response): NetworkRequestErrorDetails => {\n  const status = response.status;\n\n  return { status };\n};\n\nexport const matchPredefinedErrorFromResponse = (response: Response, originalError?: CausableError) => {\n  const errorDetails = NetworkRequestError.getNetworkRequestErrorDetailsFromResponse(response);\n  switch (response.status) {\n    case 400:\n      return new BadRequestError(errorDetails, originalError);\n    case 401:\n      return new UnauthorizedError(errorDetails, originalError);\n    case 403:\n      return new PermissionError(errorDetails, originalError);\n    case 404:\n      return new NotFoundError(errorDetails, originalError);\n    case 429:\n      return new RateLimitedError(errorDetails, originalError);\n    case 500:\n      return new InternalServerError(errorDetails, originalError);\n    case 503:\n      return new ServiceUnavailableError(errorDetails, originalError);\n    default:\n      return new GenericNetworkRequestError(errorDetails, originalError);\n  }\n};\n\ninterface NetworkRequestErrorDetails {\n  status?: number;\n  response?: Response;\n}\n\nexport abstract class NetworkRequestError extends PredefinedError {\n  status?: number;\n  response?: Response;\n\n  constructor(message: string, details: NetworkRequestErrorDetails, cause?: CausableError) {\n    super(message, cause);\n    this.status = details.status;\n    this.response = details.response;\n  }\n\n  static getNetworkRequestErrorDetailsFromResponse = getNetworkRequestErrorDetailsFromResponse;\n}\n\nexport class GenericNetworkRequestError extends NetworkRequestError {\n  errorLogType = ErrorLogType.ServerError;\n  errorName = ErrorName.GenericNetworkRequestError;\n  displayMessage = (\n    <FormattedMessage defaultMessage=\"A network error occurred.\" description=\"Generic message for a network error\" />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'A network error occurred.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class GraphQLGenericError extends PredefinedError {\n  errorLogType = ErrorLogType.ApplicationError;\n  errorName = ErrorName.GraphQLGenericError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"A GraphQL error occurred.\"\n      description=\"Generic message for a GraphQL error, typically due to query parsing or validation issues\"\n    />\n  );\n\n  constructor(cause?: CausableError) {\n    const message = 'A GraphQL error occurred.';\n\n    super(message, cause);\n  }\n}\n\nexport class BadRequestError extends NetworkRequestError {\n  errorLogType = ErrorLogType.UserInputError;\n  errorName = ErrorName.BadRequestError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"The request was invalid.\"\n      description=\"Bad request (HTTP STATUS 400) generic error message\"\n    />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'The request was invalid.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class InternalServerError extends NetworkRequestError {\n  errorLogType = ErrorLogType.ServerError;\n  errorName = ErrorName.InternalServerError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"Internal server error\"\n      description=\"Request failed due to internal server error (HTTP STATUS 500) generic error message\"\n    />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'Internal server error';\n\n    super(message, details, cause);\n  }\n}\n\nexport class NotFoundError extends NetworkRequestError {\n  errorLogType = ErrorLogType.UserInputError;\n  errorName = ErrorName.NotFoundError;\n\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"The requested resource was not found.\"\n      description=\"Resource not found (HTTP STATUS 404) generic error message\"\n    />\n  );\n\n  isUserError = true;\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'The requested resource was not found.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class PermissionError extends NetworkRequestError {\n  errorLogType = ErrorLogType.UnexpectedSystemStateError;\n  errorName = ErrorName.PermissionError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"You do not have permission to access this resource.\"\n      description=\"Generic message for a permission error (HTTP STATUS 403)\"\n    />\n  );\n  isUserError = true;\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'You do not have permission to access this resource.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class RateLimitedError extends NetworkRequestError {\n  errorLogType = ErrorLogType.ServerError;\n  errorName = ErrorName.RateLimitedError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"This request exceeds the maximum queries per second limit. Please wait and try again.\"\n      description=\"Too many requests (HTTP STATUS 429) generic error message\"\n    />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'This request exceeds the maximum queries per second limit. Please wait and try again.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class ServiceUnavailableError extends NetworkRequestError {\n  errorLogType = ErrorLogType.ServerError;\n  errorName = ErrorName.InternalServerError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"Service unavailable error\"\n      description=\"Request failed due to service being available (HTTP STATUS 503) generic error message\"\n    />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'Internal server error';\n\n    super(message, details, cause);\n  }\n}\n\nexport class UnauthorizedError extends NetworkRequestError {\n  errorLogType = ErrorLogType.SessionError;\n  errorName = ErrorName.UnauthorizedError;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"User is not authorized.\"\n      description=\"Unauthorized (HTTP STATUS 401) generic error message\"\n    />\n  );\n\n  constructor(details: NetworkRequestErrorDetails, cause?: CausableError) {\n    const message = 'This request exceeds the maximum queries per second limit. Please wait and try again.';\n\n    super(message, details, cause);\n  }\n}\n\nexport class UnknownError extends PredefinedError {\n  errorLogType = ErrorLogType.UnknownError;\n  errorName = ErrorName.UnknownError;\n  displayMessage = (\n    <FormattedMessage defaultMessage=\"An unknown error occurred.\" description=\"Generic message for an unknown error\" />\n  );\n\n  constructor(cause?: CausableError) {\n    const message = 'An unknown error occurred.';\n\n    super(message, cause);\n  }\n}\n\nexport class FormValidationError extends PredefinedError {\n  errorLogType = ErrorLogType.UserInputError;\n  errorName = ErrorName.FormValidationError;\n  isUserError = true;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"At least one form field has incorrect value. Please correct and try again.\"\n      description=\"Generic error message for an invalid form input\"\n    />\n  );\n\n  constructor(cause?: CausableError) {\n    const message = 'Incorrect form input.';\n\n    super(message, cause);\n  }\n}\n\n// have to be defined here to avoid circular dependencies\nexport class RouteNotFoundError extends PredefinedError {\n  errorLogType = ErrorLogType.UserInputError;\n  errorName = ErrorName.RouteNotFoundError;\n  isUserError = true;\n  displayMessage = (\n    <FormattedMessage\n      defaultMessage=\"Page not found\"\n      description=\"Error message shown to the user when they arrive at a non existent URL\"\n    />\n  );\n  constructor() {\n    super('Page not found');\n  }\n}\n","import {\n  isNil,\n  omitBy,\n  mapValues,\n  isArray,\n  isString,\n  isNumber,\n  isBoolean,\n  escapeRegExp,\n  map,\n  every,\n  has,\n  compact,\n  keyBy,\n} from 'lodash';\n\nimport { ModelSpanType, ModelIconType, MLFLOW_TRACE_SCHEMA_VERSION_KEY } from './ModelTrace.types';\nimport type {\n  SearchMatch,\n  ModelTrace,\n  ModelTraceSpan,\n  ModelTraceSpanNode,\n  ModelTraceChatMessage,\n  ModelTraceChatResponse,\n  ModelTraceChatInput,\n  ModelTraceToolCall,\n  ModelTraceChatTool,\n  ModelTraceChatToolParamProperty,\n  RawModelTraceChatMessage,\n  ModelTraceContentType,\n  SpanFilterState,\n  ModelTraceSpanV3,\n  ModelTraceSpanV2,\n  ModelTraceInfoV3,\n  Assessment,\n  RetrieverDocument,\n  ModelTraceEvent,\n} from './ModelTrace.types';\nimport { ModelTraceExplorerIcon } from './ModelTraceExplorerIcon';\nimport {\n  normalizeAnthropicChatInput,\n  normalizeAnthropicChatOutput,\n  normalizeGeminiChatInput,\n  normalizeGeminiChatOutput,\n  normalizeOpenAIChatInput,\n  normalizeOpenAIChatResponse,\n  normalizeOpenAIResponsesInput,\n  normalizeOpenAIResponsesOutput,\n  normalizeLangchainChatInput,\n  normalizeLangchainChatResult,\n  normalizeLlamaIndexChatResponse,\n  normalizeDspyChatInput,\n  normalizeDspyChatOutput,\n} from './chat-utils';\nimport { normalizeLlamaIndexChatInput } from './chat-utils/llamaindex';\nimport { normalizeOpenAIAgentInput, normalizeOpenAIAgentOutput } from './chat-utils/openai';\nimport { normalizeAutogenChatInput, normalizeAutogenChatOutput } from './chat-utils/autogen';\nimport { normalizeBedrockChatInput, normalizeBedrockChatOutput } from './chat-utils/bedrock';\n\nexport const getCurrentUser = () => {\n  return 'User';\n};\n\nexport const displayErrorNotification = (errorMessage: string) => {\n  // TODO: display error notification in OSS\n  return;\n};\n\nexport function getIconTypeForSpan(spanType: ModelSpanType | string): ModelIconType {\n  switch (spanType) {\n    case ModelSpanType.LLM:\n      return ModelIconType.MODELS;\n    case ModelSpanType.CHAIN:\n      return ModelIconType.CHAIN;\n    case ModelSpanType.AGENT:\n      return ModelIconType.AGENT;\n    case ModelSpanType.TOOL:\n      return ModelIconType.WRENCH;\n    case ModelSpanType.CHAT_MODEL:\n      return ModelIconType.MODELS;\n    case ModelSpanType.RETRIEVER:\n      return ModelIconType.SEARCH;\n    case ModelSpanType.PARSER:\n      return ModelIconType.CODE;\n    case ModelSpanType.EMBEDDING:\n      return ModelIconType.NUMBERS;\n    case ModelSpanType.RERANKER:\n      return ModelIconType.SORT;\n    case ModelSpanType.FUNCTION:\n      return ModelIconType.FUNCTION;\n    case ModelSpanType.UNKNOWN:\n      return ModelIconType.UNKNOWN;\n    default:\n      return ModelIconType.FUNCTION;\n  }\n}\n\nexport function getDisplayNameForSpanType(spanType: ModelSpanType | string): string {\n  switch (spanType) {\n    case ModelSpanType.LLM:\n      return 'LLM';\n    case ModelSpanType.CHAIN:\n      return 'Chain';\n    case ModelSpanType.AGENT:\n      return 'Agent';\n    case ModelSpanType.TOOL:\n      return 'Tool';\n    case ModelSpanType.CHAT_MODEL:\n      return 'Chat model';\n    case ModelSpanType.RETRIEVER:\n      return 'Retriever';\n    case ModelSpanType.PARSER:\n      return 'Parser';\n    case ModelSpanType.EMBEDDING:\n      return 'Embedding';\n    case ModelSpanType.RERANKER:\n      return 'Reranker';\n    case ModelSpanType.FUNCTION:\n      return 'Function';\n    case ModelSpanType.UNKNOWN:\n      return 'Unknown';\n    default:\n      return spanType;\n  }\n}\n\nexport function tryDeserializeAttribute(value: string): any {\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    return value;\n  }\n}\n\nexport const getMatchesFromEvent = (span: ModelTraceSpanNode, searchFilter: string): SearchMatch[] => {\n  const events = span.events;\n  if (!events) {\n    return [];\n  }\n\n  const matches: SearchMatch[] = [];\n  events.forEach((event, index) => {\n    const attributes = event.attributes;\n\n    if (!attributes) {\n      return;\n    }\n\n    Object.keys(attributes).forEach((attribute) => {\n      const isKeyMatch = attribute.toLowerCase().includes(searchFilter);\n      const key = getEventAttributeKey(event.name, index, attribute);\n\n      if (isKeyMatch) {\n        matches.push({\n          span,\n          section: 'events',\n          key,\n          isKeyMatch: true,\n          matchIndex: 0,\n        });\n      }\n\n      // event values can be arbitrary JSON\n      const value = JSON.stringify(attributes[attribute]).toLowerCase();\n      const numValueMatches = value.split(searchFilter).length - 1;\n      for (let i = 0; i < numValueMatches; i++) {\n        matches.push({\n          span,\n          section: 'events',\n          key,\n          isKeyMatch: false,\n          matchIndex: i,\n        });\n      }\n    });\n  });\n\n  return matches;\n};\n\n/**\n * This function extracts all the matches from a span based on the search filter,\n * and appends some necessary metadata that is necessary for the jump-to-search\n * function.\n */\nexport const getMatchesFromSpan = (span: ModelTraceSpanNode, searchFilter: string): SearchMatch[] => {\n  // if search filter is empty, don't generate matches\n  // because there will be nothing to highlight anyway\n  if (!searchFilter) {\n    return [];\n  }\n\n  const matches: SearchMatch[] = [];\n\n  const sections = {\n    inputs: span?.inputs,\n    outputs: span?.outputs,\n    attributes: span?.attributes,\n    events: span?.events,\n  };\n\n  map(sections, (section: any, label: 'inputs' | 'outputs' | 'attributes' | 'events') => {\n    if (label === 'events') {\n      matches.push(...getMatchesFromEvent(span, searchFilter));\n      return;\n    }\n\n    const sectionList = createListFromObject(section);\n    sectionList.forEach((item) => {\n      // NOTE: this ignores the fact that there might be multiple matches in a key\n      // for example, if the key is \"aaaaa\", and the search filter is \"a\". However,\n      // implementing support for this case would make the code needlessly complex.\n      // If we receive feedback that this is a problem, we can revisit this.\n      const isKeyMatch = item.key.toLowerCase().includes(searchFilter);\n      if (isKeyMatch) {\n        matches.push({\n          span: span,\n          section: label,\n          key: item.key,\n          isKeyMatch: true,\n          matchIndex: 0,\n        });\n      }\n\n      const numValueMatches = item.value.toLowerCase().split(searchFilter).length - 1;\n      for (let i = 0; i < numValueMatches; i++) {\n        matches.push({\n          span: span,\n          section: label,\n          key: item.key,\n          isKeyMatch: false,\n          matchIndex: i,\n        });\n      }\n    });\n  });\n  return matches;\n};\n\nexport function searchTree(\n  rootNode: ModelTraceSpanNode,\n  searchFilter: string,\n  spanFilterState: SpanFilterState,\n): {\n  filteredTreeNodes: ModelTraceSpanNode[];\n  matches: SearchMatch[];\n} {\n  const searchFilterLowercased = searchFilter.toLowerCase().trim();\n  const allSpanTypesSelected = Object.values(spanFilterState.spanTypeDisplayState).every(\n    (shouldDisplay) => shouldDisplay,\n  );\n  // if there is no search filter and all span types\n  // are selected, then we don't have to do any filtering.\n  if (searchFilterLowercased === '' && allSpanTypesSelected) {\n    return {\n      filteredTreeNodes: [rootNode],\n      matches: [],\n    };\n  }\n\n  const children = rootNode.children ?? [];\n  const filteredChildren: ModelTraceSpanNode[] = [];\n  const matches: SearchMatch[] = [];\n  children.forEach((child) => {\n    const { filteredTreeNodes: childNodes, matches: childMatches } = searchTree(\n      child,\n      searchFilterLowercased,\n      spanFilterState,\n    );\n\n    filteredChildren.push(...childNodes);\n    matches.push(...childMatches);\n  });\n\n  const spanName = ((rootNode.title as string) ?? '').toLowerCase();\n  const spanMatches = getMatchesFromSpan(rootNode, searchFilterLowercased);\n\n  // check if the span passes the text and type filters\n  const nodeMatchesSearch = spanMatches.length > 0 || spanName.includes(searchFilterLowercased);\n  const spanTypeIsDisplayed = rootNode.type ? spanFilterState.spanTypeDisplayState[rootNode.type] : true;\n  const nodePassesSpanFilters = nodeMatchesSearch && spanTypeIsDisplayed;\n\n  const hasMatchingChild = filteredChildren.length > 0;\n  const hasException = getSpanExceptionCount(rootNode) > 0;\n\n  const nodeShouldBeDisplayed =\n    nodePassesSpanFilters ||\n    // the `showParents` and `showExceptions` flags override the\n    // search filters, so we always show the node if they pass\n    (spanFilterState.showParents && hasMatchingChild) ||\n    (spanFilterState.showExceptions && hasException);\n\n  if (nodeShouldBeDisplayed) {\n    return {\n      filteredTreeNodes: [{ ...rootNode, children: filteredChildren }],\n      matches: spanMatches.concat(matches),\n    };\n  }\n\n  // otherwise cut the span out of the tree by returning the children directly\n  return {\n    filteredTreeNodes: filteredChildren,\n    matches,\n  };\n}\n\nexport function searchTreeBySpanId(\n  rootNode: ModelTraceSpanNode | null,\n  selectedSpanId?: string,\n): ModelTraceSpanNode | undefined {\n  if (isNil(selectedSpanId) || isNil(rootNode)) {\n    return undefined;\n  }\n\n  if (rootNode.key === selectedSpanId) {\n    return rootNode;\n  }\n\n  const children = rootNode.children ?? [];\n  for (const child of children) {\n    const matchedNode = searchTreeBySpanId(child, selectedSpanId);\n    if (matchedNode) {\n      return matchedNode;\n    }\n  }\n\n  return undefined;\n}\n\nconst getChatMessagesFromSpan = (\n  messagesAttributeValue: any,\n  inputs: any,\n  outputs: any,\n  spanAttributes?: Record<string, any>,\n): ModelTraceChatMessage[] | undefined => {\n  // if the `mlflow.chat.messages` attribute is provided\n  // and in the correct format, return it as-is\n  // we allow content type to be content part list for the `mlflow.chat.messages` attribute\n  if (Array.isArray(messagesAttributeValue) && messagesAttributeValue.every(isRawModelTraceChatMessage)) {\n    return compact(messagesAttributeValue.map(prettyPrintChatMessage));\n  }\n\n  // otherwise, attempt to parse messages from inputs and outputs\n  // this is to support rich rendering for older versions of MLflow\n  // before the `mlflow.chat.messages` attribute was introduced\n  const messagesFromInputs = normalizeConversation(inputs, spanAttributes?.['mlflow.message.format']) ?? [];\n  const messagesFromOutputs = normalizeConversation(outputs, spanAttributes?.['mlflow.message.format']) ?? [];\n\n  // when either input or output is not chat messages, we do not set the chat message fiels.\n  if (messagesFromInputs.length === 0 || messagesFromOutputs.length === 0) {\n    return undefined;\n  }\n\n  return messagesFromInputs.concat(messagesFromOutputs);\n};\n\nconst getChatToolsFromSpan = (toolsAttributeValue: any, inputs: any): ModelTraceChatTool[] | undefined => {\n  // if the `mlflow.chat.tools` attribute is provided\n  // and in the correct format, return it as-is\n  if (Array.isArray(toolsAttributeValue) && toolsAttributeValue.every(isModelTraceChatTool)) {\n    return toolsAttributeValue;\n  }\n\n  // otherwise, attempt to parse tools from inputs\n  // TODO: support langchain format for tool inputs\n  if (Array.isArray(inputs?.tools) && inputs?.tools?.every(isModelTraceChatTool)) {\n    return inputs.tools;\n  }\n\n  return undefined;\n};\n\nexport const normalizeNewSpanData = (\n  span: ModelTraceSpan,\n  rootStartTime: number,\n  rootEndTime: number,\n  children: ModelTraceSpanNode[],\n  assessmentMap: Record<string, Assessment[]>,\n  traceId: string,\n): ModelTraceSpanNode => {\n  const spanType = tryDeserializeAttribute(span.attributes?.['mlflow.spanType']);\n  const inputs = tryDeserializeAttribute(span.attributes?.['mlflow.spanInputs']);\n  const outputs = tryDeserializeAttribute(span.attributes?.['mlflow.spanOutputs']);\n  const parentId = getModelTraceSpanParentId(span);\n  const spanId = getModelTraceSpanId(span);\n\n  const assessments = assessmentMap[spanId] ?? [];\n  if (!parentId) {\n    // assessments that are not associated with a specific\n    // span should be displayed at the root.\n    assessments.push(...(assessmentMap[''] ?? []));\n  }\n\n  // data that powers the \"chat\" tab\n  const messagesAttributeValue = tryDeserializeAttribute(span.attributes?.['mlflow.chat.messages']);\n  const messageFormat = tryDeserializeAttribute(span.attributes?.['mlflow.message.format']);\n  const spanAttributesForChat = messageFormat ? { 'mlflow.message.format': messageFormat } : undefined;\n  const chatMessages = getChatMessagesFromSpan(messagesAttributeValue, inputs, outputs, spanAttributesForChat);\n  const chatTools = getChatToolsFromSpan(tryDeserializeAttribute(span.attributes?.['mlflow.chat.tools']), inputs);\n\n  // remove other private mlflow attributes\n  const attributes = mapValues(\n    omitBy(span.attributes, (_, key) => key.startsWith('mlflow.')),\n    (value) => tryDeserializeAttribute(value),\n  );\n  const events = span.events;\n  const start = (Number(getModelTraceSpanStartTime(span)) - rootStartTime) / 1000;\n  const end = (Number(getModelTraceSpanEndTime(span) ?? rootEndTime) - rootStartTime) / 1000;\n\n  return {\n    title: span.name,\n    icon: (\n      <ModelTraceExplorerIcon\n        type={getIconTypeForSpan(spanType)}\n        hasException={getSpanExceptionCount(span) > 0}\n        isRootSpan={!parentId}\n      />\n    ),\n    type: spanType,\n    key: spanId,\n    start,\n    end,\n    children,\n    inputs,\n    outputs,\n    attributes,\n    events,\n    chatMessages,\n    chatTools,\n    parentId,\n    assessments,\n    traceId,\n  };\n};\n\nconst base64ToHex = (base64: string): string => {\n  const binaryString = atob(base64);\n  const binaryLen = binaryString.length;\n  let hex = '';\n  for (let i = 0; i < binaryLen; i++) {\n    const charCode = binaryString.charCodeAt(i);\n    hex += charCode.toString(16).padStart(2, '0');\n  }\n  return hex;\n};\n\n// mlflow span ids are meant to be interpreted as hex strings\nexport const decodeSpanId = (spanId: string, isV3Span: boolean): string => {\n  if (isV3Span) {\n    // v3 span ids are base64 encoded\n    try {\n      return base64ToHex(spanId);\n    } catch (e) {\n      // if base64 decoding fails, just return the original spanId\n      return spanId;\n    }\n  }\n\n  // old V2 span ids (pre-March 2025) are in hex with a 0x prefix\n  if (spanId.startsWith('0x')) {\n    return spanId.slice(2);\n  }\n\n  // new V2 span ids have the prefix stripped\n  return spanId;\n};\n\nexport function isV3ModelTraceInfo(info: ModelTrace['info']): info is ModelTraceInfoV3 {\n  return 'trace_metadata' in info;\n}\n\nexport function isV3ModelTraceSpan(span: ModelTraceSpan): span is ModelTraceSpanV3 {\n  return 'start_time_unix_nano' in span;\n}\n\nexport function isV2ModelTraceSpan(span: ModelTraceSpan): span is ModelTraceSpanV2 {\n  return 'parent_id' in span;\n}\n\nexport function getModelTraceSpanId(span: ModelTraceSpan): string {\n  return isV3ModelTraceSpan(span) ? decodeSpanId(span.span_id, true) : decodeSpanId(span.context?.span_id ?? '', false);\n}\n\nexport function getModelTraceSpanParentId(span: ModelTraceSpan): string {\n  return isV3ModelTraceSpan(span) ? decodeSpanId(span.parent_span_id, true) : decodeSpanId(span.parent_id ?? '', false);\n}\n\nexport function getModelTraceSpanStartTime(span: ModelTraceSpan): number {\n  return isV3ModelTraceSpan(span) ? Number(span.start_time_unix_nano) : Number(span.start_time);\n}\n\nexport function getModelTraceSpanEndTime(span: ModelTraceSpan): number {\n  return isV3ModelTraceSpan(span) ? Number(span.end_time_unix_nano) : Number(span.end_time);\n}\n\nexport function getModelTraceId(trace: ModelTrace): string {\n  return isV3ModelTraceInfo(trace.info) ? trace.info.trace_id : trace.info.request_id ?? '';\n}\n\nexport function parseModelTraceToTree(trace: ModelTrace): ModelTraceSpanNode | null {\n  const traceId = getModelTraceId(trace);\n  const spans = trace.trace_data?.spans ?? trace.data.spans;\n  const spanMap: { [span_id: string]: ModelTraceSpan } = {};\n  const relationMap: { [span_id: string]: string[] } = {};\n\n  spans.forEach((span) => {\n    const spanId = getModelTraceSpanId(span);\n    spanMap[spanId] = span;\n    relationMap[spanId] = [];\n  });\n\n  spans.forEach((span) => {\n    const spanId = getModelTraceSpanId(span);\n    const parentId = getModelTraceSpanParentId(span);\n    if (parentId) {\n      if (!relationMap[parentId]) {\n        throw new Error('Tree structure is malformed!');\n      }\n      relationMap[parentId].push(spanId);\n    }\n  });\n\n  const rootSpan = spans.find((span) => !getModelTraceSpanParentId(span));\n  if (isNil(rootSpan)) {\n    return null;\n  }\n\n  const rootSpanId = getModelTraceSpanId(rootSpan);\n  function getSpanNodeFromData(span_id: string): ModelTraceSpanNode {\n    const span = spanMap[span_id];\n    // above we return if rootSpan is null, but for some\n    // reason typescript thinks it's still nullable here.\n    const rootStart = Number(getModelTraceSpanStartTime(rootSpan as ModelTraceSpan));\n    const rootEnd = Number(getModelTraceSpanEndTime(rootSpan as ModelTraceSpan));\n    const children = relationMap[span_id].map(getSpanNodeFromData);\n    const assessmentMap = getAssessmentMap(trace.info);\n\n    // not using `isV2Span` here because for legacy reasons,\n    // V1 and V2 are rolled into in the same type. \"parent_id\" is\n    // the way we distinguish between the two.\n    if (isV3ModelTraceSpan(span) || 'parent_id' in span) {\n      // reusing the same function for v2 and v3 as the changes are small\n      return normalizeNewSpanData(span, rootStart, rootEnd, children, assessmentMap, traceId);\n    }\n\n    // v1 spans\n    const spanType = span.span_type ?? ModelSpanType.UNKNOWN;\n    return {\n      title: span.name,\n      icon: <ModelTraceExplorerIcon type={getIconTypeForSpan(spanType)} />,\n      type: spanType as ModelSpanType,\n      key: span.context.span_id,\n      start: Number(span.start_time) - rootStart,\n      // default to the end of the root span if the span has no end time.\n      // this can happen if an exception was thrown in the span.\n      end: Number(span.end_time ?? rootEnd) - rootStart,\n      children: children,\n      inputs: span.inputs,\n      outputs: span.outputs,\n      attributes: span.attributes,\n      events: span.events,\n      parentId: span.parent_id ?? span.parent_span_id,\n      assessments: [],\n      traceId,\n    };\n  }\n\n  return getSpanNodeFromData(rootSpanId);\n}\n\n// returns a map of { [span_id: string] : Assessment[] }\nexport const getAssessmentMap = (traceInfo: ModelTrace['info']): Record<string, Assessment[]> => {\n  let assessments: Assessment[] = [];\n  if (isV3ModelTraceInfo(traceInfo)) {\n    assessments = traceInfo.assessments ?? [];\n  } else {\n    assessments = getAssessmentsFromTags(traceInfo.tags);\n  }\n\n  // hydrate the assessments with the overridden assessment objects\n  const assessmentsById = keyBy(assessments, 'assessment_id');\n  Object.values(assessmentsById).forEach((assessment) => {\n    if (assessment.overrides) {\n      const overriddenAssessment = assessmentsById[assessment.overrides];\n      assessment.overriddenAssessment = overriddenAssessment;\n    }\n  });\n\n  assessments = Object.values(assessmentsById);\n\n  // construct the map by reducing over the assessments\n  const assessmentMap = assessments.reduce((acc: Record<string, Assessment[]>, assessment: Assessment) => {\n    const spanId = assessment.span_id ?? '';\n    if (!acc[spanId]) {\n      acc[spanId] = [];\n    }\n    acc[spanId].push(assessment);\n    return acc;\n  }, {});\n\n  // sort the assessments by last_update_time\n  Object.keys(assessmentMap).forEach((spanId) => {\n    assessmentMap[spanId].sort(\n      (a, b) => new Date(b.last_update_time).getTime() - new Date(a.last_update_time).getTime(),\n    );\n  });\n\n  return assessmentMap;\n};\n\n// parses assessments out from the trace tags\nconst getAssessmentsFromTags = (tags: ModelTrace['info']['tags']): Assessment[] => {\n  if (!tags) {\n    return [];\n  }\n\n  const tagList = Array.isArray(tags) ? tags : Object.entries(tags).map(([key, value]) => ({ key, value }));\n\n  return tagList.filter(({ key }) => key.startsWith('mlflow.assessment.')).map(({ value }) => JSON.parse(value));\n};\n\n// this function attempts to extract the trace version from\n// a given source (either request_metadata or tags)\nexport function findTraceVersionByKey(\n  source: { [key: string]: string } | { key: string; value: string }[] | undefined,\n): string | undefined {\n  if (!source) {\n    return undefined;\n  }\n\n  if (isArray(source)) {\n    return source.find((tag) => tag.key === MLFLOW_TRACE_SCHEMA_VERSION_KEY)?.value;\n  }\n\n  return source[MLFLOW_TRACE_SCHEMA_VERSION_KEY];\n}\n\n// this function determines whether an object is a ModelTrace by asserting\n// that the object has the `data` and `info` fields, and that the\n// trace info contains the `mlflow.trace_schema.version` key\nexport const isModelTrace = (trace: any): trace is ModelTrace => {\n  const traceInfo = trace?.info;\n  const traceData = trace?.data;\n  if (!traceInfo || !traceData || !traceData?.spans) {\n    return false;\n  }\n\n  // request_metadata is for V2 traces, trace_metadata is for V3 traces\n  const metadata = traceInfo?.request_metadata ?? traceInfo?.trace_metadata;\n  if (metadata && findTraceVersionByKey(metadata)) {\n    return true;\n  }\n\n  const tags = traceInfo?.tags;\n  if (tags && findTraceVersionByKey(tags)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const createListFromObject = (\n  obj: { [key: string]: any } | string[] | string | boolean | number | undefined,\n) => {\n  if (isNil(obj)) {\n    return [];\n  }\n\n  if (Array.isArray(obj) || isString(obj) || isNumber(obj) || isBoolean(obj)) {\n    return [{ key: '', value: JSON.stringify(obj, null, 2) }];\n  }\n\n  return Object.entries(obj).map(([key, value]) => {\n    return { key, value: JSON.stringify(value, null, 2) };\n  });\n};\n\nexport const getHighlightedSpanComponents = ({\n  searchFilter,\n  data,\n  activeMatchBackgroundColor,\n  inactiveMatchBackgroundColor,\n  containsActiveMatch,\n  activeMatch,\n  scrollToActiveMatch,\n}: {\n  searchFilter: string;\n  data: string;\n  activeMatchBackgroundColor: string;\n  inactiveMatchBackgroundColor: string;\n  containsActiveMatch: boolean;\n  activeMatch: SearchMatch;\n  scrollToActiveMatch: (node: HTMLSpanElement) => void;\n}) => {\n  // splitting by regex retains the matches in the array,\n  // which makes it easier to handle stuff like preserving\n  // the original case of the match.\n  const regex = new RegExp(`(${escapeRegExp(searchFilter.trim())})`, 'gi');\n  const parts = data.split(regex);\n  const spans: React.ReactNode[] = [];\n  let matchIndex = 0;\n\n  for (let i = 0; i < parts.length; i++) {\n    if (parts[i].toLowerCase().includes(searchFilter.toLowerCase().trim())) {\n      const isActiveMatch = containsActiveMatch && activeMatch.matchIndex === matchIndex;\n      const backgroundColor = isActiveMatch ? activeMatchBackgroundColor : inactiveMatchBackgroundColor;\n      const span = (\n        <span ref={isActiveMatch ? scrollToActiveMatch : null} key={i} css={{ backgroundColor, scrollMarginTop: 50 }}>\n          {parts[i]}\n        </span>\n      );\n      matchIndex++;\n      spans.push(span);\n    } else {\n      spans.push(parts[i]);\n    }\n  }\n\n  return spans;\n};\n\nexport const isRetrieverDocument = (document: any): document is RetrieverDocument => {\n  return has(document, 'page_content');\n};\n\nexport const isRenderableRetrieverSpan = (span: ModelTraceSpanNode): boolean => {\n  return (\n    span.type === ModelSpanType.RETRIEVER &&\n    Array.isArray(span.outputs) &&\n    span.outputs.length > 0 &&\n    every(span.outputs, isRetrieverDocument)\n  );\n};\n\nexport const getEventAttributeKey = (name: string, index: number, attribute: string): string => {\n  return `${name}-${index}-${attribute}`;\n};\n\nexport const getSpanExceptionEvents = (span: ModelTraceSpanNode | ModelTraceSpan): ModelTraceEvent[] => {\n  return (span.events ?? []).filter((event) => event.name === 'exception');\n};\n\nexport const getSpanExceptionCount = (span: ModelTraceSpanNode | ModelTraceSpan): number => {\n  return getSpanExceptionEvents(span).length;\n};\n\nexport const isModelTraceChatToolParamProperty = (obj: any): obj is ModelTraceChatToolParamProperty => {\n  if (isNil(obj)) {\n    return false;\n  }\n\n  if (!isNil(obj.type) && !isString(obj.type)) {\n    return false;\n  }\n\n  if (!isNil(obj.description) && !isString(obj.description)) {\n    return false;\n  }\n\n  if (!isNil(obj.enum) && !Array.isArray(obj.enum)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const isModelTraceChatTool = (obj: any): obj is ModelTraceChatTool => {\n  if (isNil(obj) || obj.type !== 'function' || !has(obj, 'function.name')) {\n    return false;\n  }\n\n  // conditional validation for the `parameters` field\n  const parameters = obj.function?.parameters;\n  if (!isNil(parameters)) {\n    // if `required` is present, it must be a list of strings\n    const required = parameters.required;\n    if (!isNil(required) && (!Array.isArray(required) || !required.every(isString))) {\n      return false;\n    }\n\n    const properties = parameters.properties;\n    if (!isNil(properties) && !Object.values(properties).every(isModelTraceChatToolParamProperty)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const isModelTraceToolCall = (obj: any): obj is ModelTraceToolCall => {\n  return obj && isString(obj.id) && isString(obj.function?.arguments) && isString(obj.function?.name);\n};\n\nconst isContentPart = (part: any) => {\n  switch (part.type) {\n    case 'text':\n    case 'input_text':\n    case 'output_text':\n      return isString(part.text);\n    case 'image_url':\n      const { image_url } = part;\n      if (isNil(image_url)) {\n        return false;\n      }\n      return isString(image_url.url) && (isNil(image_url.detail) || ['auto', 'low', 'high'].includes(image_url.detail));\n    case 'input_audio':\n      const { input_audio } = part;\n      if (isNil(input_audio)) {\n        return false;\n      }\n      return isString(input_audio.data) && (isNil(input_audio.format) || ['wav', 'mp3'].includes(input_audio.format));\n    default:\n      return false;\n  }\n};\n\nconst isContentType = (content: any) => {\n  if (isNil(content) || isString(content)) {\n    return true;\n  }\n\n  if (isArray(content)) {\n    return content.every((part) => isContentPart(part));\n  }\n\n  return false;\n};\n\nexport const isModelTraceChatMessage = (message: any): message is ModelTraceChatMessage => {\n  if (!isRawModelTraceChatMessage(message)) {\n    return false;\n  }\n\n  return isNil(message.content) || isString(message.content);\n};\n\nexport const isRawModelTraceChatMessage = (message: any): message is RawModelTraceChatMessage => {\n  if (!message) {\n    return false;\n  }\n\n  if (message.tool_calls) {\n    if (!Array.isArray(message.tool_calls)) {\n      return false;\n    }\n\n    if (!message.tool_calls.every(isModelTraceToolCall)) {\n      return false;\n    }\n  }\n\n  if (message.type === 'reasoning') {\n    return true;\n  }\n\n  // verify if the message content is a valid content type or not\n  if (!isContentType(message.content)) {\n    return false;\n  }\n\n  return (\n    message.role === 'user' || message.role === 'assistant' || message.role === 'system' || message.role === 'tool'\n  );\n};\n\nexport const isModelTraceChatInput = (obj: any): obj is ModelTraceChatInput => {\n  return (\n    obj && Array.isArray(obj.messages) && obj.messages.length > 0 && obj.messages.every(isRawModelTraceChatMessage)\n  );\n};\n\nexport const isModelTraceChoices = (obj: any): obj is ModelTraceChatResponse['choices'] => {\n  return (\n    Array.isArray(obj) &&\n    obj.length > 0 &&\n    obj.every((choice: any) => has(choice, 'message') && isModelTraceChatMessage(choice.message))\n  );\n};\n\nexport const isModelTraceChatResponse = (obj: any): obj is ModelTraceChatResponse => {\n  return obj && isModelTraceChoices(obj.choices);\n};\n\n/**\n * Attempt to normalize a conversation, return null in case the format is unrecognized\n * TODO: move all chat parsing logic to the chat-utils folder to avoid cluttering this\n * utils file.\n *\n * Supported formats:\n *   1. Langchain chat inputs\n *   2. Langchain chat results\n *   3. OpenAI ChatCompletions inputs\n *   4. OpenAI ChatCompletions responses\n *   5. OpenAI Responses inputs\n *   6. OpenAI Responses output\n *   7. LlamaIndex chat responses\n *   8. DSPy chat inputs\n *   8. DSPy chat outputs\n *   9. Gemini inputs\n *  10. Gemini outputs\n *  11. Anthropic inputs\n *  12. Anthropic outputs\n */\nexport const normalizeConversation = (input: any, messageFormat?: string): ModelTraceChatMessage[] | null => {\n  // wrap in try/catch to avoid crashing the UI. we're doing a lot of type coercion\n  // and formatting, and it's possible that we miss some edge cases. in case of an error,\n  // simply return null to signify that the input is not a chat input.\n  try {\n    // if the input is already in the correct format, return it\n    if (Array.isArray(input) && input.length > 0 && input.every(isRawModelTraceChatMessage)) {\n      return compact(input.map(prettyPrintChatMessage));\n    }\n\n    switch (messageFormat) {\n      case 'langchain':\n        const langchainMessages = normalizeLangchainChatInput(input) ?? normalizeLangchainChatResult(input);\n        if (langchainMessages) return langchainMessages;\n        break;\n      case 'llamaindex':\n        const llamaIndexMessages = normalizeLlamaIndexChatInput(input) ?? normalizeLlamaIndexChatResponse(input);\n        if (llamaIndexMessages) return llamaIndexMessages;\n        break;\n      case 'openai':\n        const openAIMessages =\n          normalizeOpenAIChatInput(input) ??\n          normalizeOpenAIChatResponse(input) ??\n          normalizeOpenAIResponsesOutput(input) ??\n          normalizeOpenAIResponsesInput(input);\n        if (openAIMessages) return openAIMessages;\n        break;\n      case 'dspy':\n        const dspyMessages = normalizeDspyChatInput(input) ?? normalizeDspyChatOutput(input);\n        if (dspyMessages) return dspyMessages;\n        break;\n      case 'gemini':\n        const geminiMessages = normalizeGeminiChatInput(input) ?? normalizeGeminiChatOutput(input);\n        if (geminiMessages) return geminiMessages;\n        break;\n      case 'anthropic':\n        const anthropicMessages = normalizeAnthropicChatInput(input) ?? normalizeAnthropicChatOutput(input);\n        if (anthropicMessages) return anthropicMessages;\n        break;\n      case 'openai-agent':\n        const openAIAgentMessages = normalizeOpenAIAgentInput(input) ?? normalizeOpenAIAgentOutput(input);\n        if (openAIAgentMessages) return openAIAgentMessages;\n        break;\n      case 'autogen':\n        const autogenMessages = normalizeAutogenChatInput(input) ?? normalizeAutogenChatOutput(input);\n        if (autogenMessages) return autogenMessages;\n        break;\n      case 'bedrock':\n        const bedrockMessages = normalizeBedrockChatInput(input) ?? normalizeBedrockChatOutput(input);\n        if (bedrockMessages) return bedrockMessages;\n        break;\n      default:\n        // Fallback to OpenAI chat format\n        const chatMessages = normalizeOpenAIChatInput(input) ?? normalizeOpenAIChatResponse(input);\n        if (chatMessages) return chatMessages;\n        break;\n    }\n\n    return null;\n  } catch (e) {\n    return null;\n  }\n};\n\nexport const prettyPrintToolCall = (toolCall: ModelTraceToolCall): ModelTraceToolCall => {\n  // add some spacing to the arguments for better readability\n  let args = toolCall.function?.arguments;\n  try {\n    args = JSON.stringify(JSON.parse(args), null, 2);\n  } catch (e) {\n    // use original args\n  }\n  return {\n    id: toolCall.id,\n    function: {\n      arguments: args,\n      name: toolCall.function.name,\n    },\n  };\n};\n\nconst formatChatContent = (content?: ModelTraceContentType | null): string | undefined | null => {\n  if (isNil(content) || isString(content)) {\n    return content;\n  }\n\n  const contentParts = content\n    // eslint-disable-next-line array-callback-return\n    .map((part) => {\n      switch (part.type) {\n        case 'text':\n        case 'input_text':\n        case 'output_text':\n          return part.text;\n        case 'image_url':\n          const url = part?.image_url?.url;\n          return url ? `![](${url})` : '[image]';\n        case 'input_audio':\n          // raw encoded audio content is not displayed in the UI\n          return '[audio]';\n      }\n    })\n    .filter((part) => part !== undefined);\n\n  // Join with double line breaks for better visual separation\n  return contentParts.join('\\n\\n');\n};\n\nexport const prettyPrintChatMessage = (message: RawModelTraceChatMessage): ModelTraceChatMessage | null => {\n  // TODO: support rich rendering of reasoning messages\n  // for now, just return null and compact it away in the caller\n  // this is because we want to still render the rest of the message\n  // outputs.\n  if (message.type === 'reasoning') {\n    return null;\n  }\n\n  return {\n    ...message,\n    content: formatChatContent(message.content),\n    tool_calls: message.tool_calls?.map(prettyPrintToolCall),\n  };\n};\n","import type { TimelineTreeNode } from './timeline-tree';\n\nexport const MLFLOW_TRACE_SCHEMA_VERSION_KEY = 'mlflow.trace_schema.version';\n\n// column name for mlflow trace data in inference tables\nexport const INFERENCE_TABLE_RESPONSE_COLUMN_KEY = 'response';\nexport const INFERENCE_TABLE_TRACE_COLUMN_KEY = 'trace';\n\nexport type ModelTraceExplorerRenderMode = 'default' | 'json';\n\nexport enum ModelSpanType {\n  LLM = 'LLM',\n  CHAIN = 'CHAIN',\n  AGENT = 'AGENT',\n  TOOL = 'TOOL',\n  FUNCTION = 'FUNCTION',\n  CHAT_MODEL = 'CHAT_MODEL',\n  RETRIEVER = 'RETRIEVER',\n  PARSER = 'PARSER',\n  EMBEDDING = 'EMBEDDING',\n  RERANKER = 'RERANKER',\n  UNKNOWN = 'UNKNOWN',\n}\n\nexport enum ModelIconType {\n  MODELS = 'models',\n  DOCUMENT = 'document',\n  CONNECT = 'connect',\n  SEARCH = 'search',\n  SORT = 'sort',\n  UNKNOWN = 'unknown',\n  FUNCTION = 'function',\n  CODE = 'code',\n  NUMBERS = 'numbers',\n  WRENCH = 'wrench',\n  AGENT = 'agent',\n  CHAIN = 'chain',\n  USER = 'user',\n  SYSTEM = 'system',\n}\n\n/**\n * Represents a single model trace span.\n * Based on https://github.com/mlflow/mlflow/blob/tracing/mlflow/entities/span.py\n *\n * TODO: clean up all deprecated fields after PrPr customers swap over to\n *       the latest version of mlflow tracing\n */\nexport type ModelTraceSpanV2 = {\n  context: {\n    span_id: string;\n    trace_id: string;\n  };\n  name: string;\n  /* deprecated, renamed to `parent_id` */\n  parent_span_id?: string | null;\n  parent_id?: string | null;\n  /* deprecated, contained in attributes['mlflow.spanType'] */\n  span_type?: ModelSpanType | string;\n  /* deprecated, migrated to `status_code` and `status_message` */\n  status?: ModelTraceStatus;\n  status_code?: string;\n  status_message?: string | null;\n  start_time: number;\n  end_time: number;\n  /* deprecated, contained in attributes['mlflow.spanInputs'] */\n  inputs?: any;\n  /* deprecated, contained in attributes['mlflow.spanOutputs'] */\n  outputs?: any;\n  attributes?: Record<string, any>;\n  events?: ModelTraceEvent[];\n  /* metadata for ui usage logging */\n  type?: ModelSpanType;\n};\n\nexport type ModelTraceSpanV3 = {\n  trace_id: string;\n  span_id: string;\n  // can be empty\n  trace_state: string;\n  // can be empty\n  parent_span_id: string;\n  name: string;\n  start_time_unix_nano: string;\n  end_time_unix_nano: string;\n  status: {\n    code: ModelSpanStatusCode;\n    message?: string;\n  };\n  attributes: Record<string, any>;\n  events?: ModelTraceEvent[];\n  /* metadata for ui usage logging */\n  type?: ModelSpanType;\n};\n\nexport type ModelTraceSpan = ModelTraceSpanV2 | ModelTraceSpanV3;\n\nexport type ModelTraceEvent = {\n  name: string;\n  /* deprecated as of v3, migrated to `time_unix_nano` */\n  timestamp?: number;\n  time_unix_nano?: number;\n  attributes?: Record<string, any>;\n};\n\nexport type ModelTraceData = {\n  spans: ModelTraceSpan[];\n};\n\n/**\n * Represents a single model trace object.\n * Based on https://github.com/mlflow/mlflow/blob/8e44d102e9568d09d9dc376136d13a5a5d1ab46f/mlflow/tracing/types/model.py#L11\n */\nexport type ModelTrace = {\n  /* deprecated, renamed to `data` */\n  trace_data?: ModelTraceData;\n  /* deprecated, renamed to `info` */\n  trace_info?: ModelTraceInfo;\n  data: ModelTraceData;\n  info: ModelTraceInfoV3 | ModelTraceInfo | NotebookModelTraceInfo;\n};\n\n/**\n * Represents the trace data saved in an inference table.\n * https://github.com/databricks/universe/blob/fb8a572602161aa6387ac32593aa24a91518cc32/rag/serving/python/databricks/rag/unpacking/schemas.py#L133-L141\n */\nexport type ModelTraceInferenceTableData = {\n  app_version_id: string;\n  start_timestamp: string;\n  end_timestamp: string;\n  is_truncated: boolean;\n  [MLFLOW_TRACE_SCHEMA_VERSION_KEY]: number;\n  spans: (Omit<ModelTraceSpan, 'attributes'> & {\n    attributes: string;\n  })[];\n};\n\nexport type ModelTraceInfo = {\n  request_id?: string;\n  experiment_id?: string;\n  timestamp_ms?: number;\n  execution_time_ms?: number;\n  status?: ModelTraceStatus['description'];\n  attributes?: Record<string, any>;\n  request_metadata?: { key: string; value: string }[];\n  tags?: { key: string; value: string }[];\n};\n\n// tags and request_metadata in the notebook view\n// (i.e. displayed directly from the python client)\n// are stored as an object rather than an array.\nexport type NotebookModelTraceInfo = Omit<ModelTraceInfo, 'tags' | 'request_metadata'> & {\n  tags?: { [key: string]: string };\n  request_metadata?: { [key: string]: string };\n};\n\nexport type ModelTraceLocationMlflowExperiment = {\n  type: 'MLFLOW_EXPERIMENT';\n  mlflow_experiment: {\n    experiment_id: string;\n  };\n};\n\nexport type ModelTraceLocationInferenceTable = {\n  type: 'INFERENCE_TABLE';\n  inference_table: {\n    full_table_name: string;\n  };\n};\n\nexport type ModelTraceLocation = ModelTraceLocationMlflowExperiment | ModelTraceLocationInferenceTable;\n\nexport type ModelTraceInfoV3 = {\n  trace_id: string;\n  client_request_id?: string;\n  trace_location: ModelTraceLocation;\n  request_preview?: string;\n  response_preview?: string;\n  // timestamp in a format like \"2025-02-19T09:52:23.140Z\"\n  request_time: string;\n  // formatted duration string like \"32.4s\"\n  execution_duration: string;\n  state: ModelTraceState;\n  trace_metadata: {\n    [key: string]: string;\n  };\n  assessments: Assessment[];\n  tags: {\n    [key: string]: string;\n  };\n};\n\nexport type ModelTraceState = 'STATE_UNSPECIFIED' | 'OK' | 'ERROR' | 'IN_PROGRESS';\n\nexport type ModelSpanStatusCode = 'STATUS_CODE_UNSET' | 'STATUS_CODE_OK' | 'STATUS_CODE_ERROR';\n\nexport type ModelTraceStatusUnset = {\n  description: 'UNSET';\n  status_code: 0;\n};\n\nexport type ModelTraceStatusOk = {\n  description: 'OK';\n  status_code: 1;\n};\n\nexport type ModelTraceStatusError = {\n  description: 'ERROR';\n  status_code: 2;\n};\n\nexport type ModelTraceStatusInProgress = {\n  description: 'IN_PROGRESS';\n  status_code: 3;\n};\n\nexport enum ModelTraceSpanType {\n  LLM = 'LLM',\n  CHAIN = 'CHAIN',\n  AGENT = 'AGENT',\n  TOOL = 'TOOL',\n  CHAT_MODEL = 'CHAT_MODEL',\n  RETRIEVER = 'RETRIEVER',\n  PARSER = 'PARSER',\n  EMBEDDING = 'EMBEDDING',\n  RERANKER = 'RERANKER',\n  UNKNOWN = 'UNKNOWN',\n}\n\nexport type ModelTraceStatus =\n  | ModelTraceStatusUnset\n  | ModelTraceStatusOk\n  | ModelTraceStatusError\n  | ModelTraceStatusInProgress;\n\n/**\n * Represents a single node in the model trace tree.\n */\nexport interface ModelTraceSpanNode extends TimelineTreeNode, Pick<ModelTraceSpan, 'attributes' | 'type' | 'events'> {\n  assessments: Assessment[];\n  inputs?: any;\n  outputs?: any;\n  children?: ModelTraceSpanNode[];\n  chatMessages?: ModelTraceChatMessage[];\n  chatTools?: ModelTraceChatTool[];\n  parentId?: string | null;\n  traceId: string;\n}\n\nexport type ModelTraceExplorerTab = 'chat' | 'content' | 'attributes' | 'events';\n\nexport type SearchMatch = {\n  span: ModelTraceSpanNode;\n  section: 'inputs' | 'outputs' | 'attributes' | 'events';\n  key: string;\n  isKeyMatch: boolean;\n  matchIndex: number;\n};\n\nexport type SpanFilterState = {\n  // always show parents regardless of filter state\n  showParents: boolean;\n  // always show exceptions regardless of filter state\n  showExceptions: boolean;\n  // record of span_type: whether to show it\n  spanTypeDisplayState: Record<string, boolean>;\n};\n\nexport interface RetrieverDocument {\n  metadata: {\n    doc_uri: string;\n    chunk_id: string;\n    [key: string]: any;\n  };\n  page_content: string;\n  [key: string]: any;\n}\n\nexport enum CodeSnippetRenderMode {\n  JSON = 'json',\n  TEXT = 'text',\n  MARKDOWN = 'markdown',\n}\n\ntype ModelTraceTextContentPart = {\n  type: 'text' | 'input_text' | 'output_text';\n  text: string;\n};\n\ntype ModelTraceImageUrl = {\n  url: string;\n  detail?: 'auto' | 'low' | 'high';\n};\n\ntype ModelTraceImageContentPart = {\n  type: 'image_url';\n  image_url: ModelTraceImageUrl;\n};\n\ntype ModelTraceInputAudio = {\n  data: string;\n  format: 'wav' | 'mp3';\n};\n\ntype ModelTraceAudioContentPart = {\n  type: 'input_audio';\n  input_audio: ModelTraceInputAudio;\n};\n\nexport type ModelTraceContentParts =\n  | ModelTraceTextContentPart\n  | ModelTraceImageContentPart\n  | ModelTraceAudioContentPart;\n\nexport type ModelTraceContentType = string | ModelTraceContentParts[];\n\n// We treat content as string in the tracing UI.\nexport type ModelTraceChatMessage = {\n  role: 'system' | 'user' | 'assistant' | 'tool' | 'function' | 'developer';\n  name?: string;\n  content?: string | null;\n  tool_calls?: ModelTraceToolCall[];\n  tool_call_id?: string;\n};\n\n// The actual chat message schema of mlflow contains string, null and content part list.\nexport type RawModelTraceChatMessage = Omit<ModelTraceChatMessage, 'content'> & {\n  // there are other types, but we don't support them yet\n  type?: 'message' | 'reasoning';\n  content?: ModelTraceContentType | null;\n};\n\nexport type ModelTraceChatToolParamProperty = {\n  type?: string;\n  description?: string;\n  enum?: string[];\n};\n\nexport type ModelTraceChatTool = {\n  type: 'function';\n  function: {\n    name: string;\n    description?: string;\n    parameters?: {\n      properties: {\n        [key: string]: ModelTraceChatToolParamProperty;\n      };\n      required?: string[];\n    };\n  };\n};\n\nexport type ModelTraceToolCall = {\n  id: string;\n  function: {\n    arguments: string;\n    name: string;\n  };\n};\n\n// aligned to the OpenAI format\nexport type ModelTraceChatResponse = {\n  choices: {\n    message: ModelTraceChatMessage;\n  }[];\n};\n\nexport type ModelTraceChatInput = {\n  messages: RawModelTraceChatMessage[];\n};\n\nexport type AssessmentSourceType = 'SOURCE_TYPE_UNSPECIFIED' | 'HUMAN' | 'LLM_JUDGE' | 'CODE';\n\nexport interface AssessmentSource {\n  source_type: AssessmentSourceType;\n  // Identifier for the source. For example:\n  // - For a human source -> user name\n  // - For an LLM judge -> the judge source (databricks or custom)\n  // - For a code judge -> the function name\n  source_id: string;\n}\n\nexport interface AssessmentError {\n  error_code: string;\n  error_message?: string;\n  stack_trace?: string;\n}\n\nexport type AssessmentValue = string | number | boolean | null | string[];\n\nexport interface Feedback {\n  // can be null / undefined if error is present\n  value?: AssessmentValue;\n  error?: AssessmentError;\n}\n\nexport interface ExpectationValue {\n  value: AssessmentValue;\n}\n\nexport interface ExpectationSerializedValue {\n  serialized_value: {\n    value: string;\n    serialization_format: string;\n  };\n}\n\nexport type Expectation = ExpectationValue | ExpectationSerializedValue;\n\n// should be aligned with `mlflow/api/proto/service.proto`\nexport interface AssessmentBase {\n  assessment_id: string;\n  assessment_name: string;\n  trace_id: string;\n  source: AssessmentSource;\n  span_id?: string;\n\n  // the time fields are in the form of a string timestamp\n  // e.g. \"2025-04-18T04:01:20.159Z\"\n  create_time: string;\n  last_update_time: string;\n\n  rationale?: string;\n  metadata?: Record<string, string>;\n\n  // if false, the assessment is not valid and should not be displayed\n  // undefined and true should be considered valid.\n  valid?: boolean;\n\n  // the assessment_id of the assessment that this assessment overrides\n  overrides?: string;\n\n  // UI only field to store the overridden assessment object for easier display\n  overriddenAssessment?: Assessment;\n}\n\nexport interface FeedbackAssessment extends AssessmentBase {\n  feedback: Feedback;\n}\n\nexport interface ExpectationAssessment extends AssessmentBase {\n  expectation: Expectation;\n}\n\nexport type Assessment = FeedbackAssessment | ExpectationAssessment;\n","import type { ModelTrace, ModelTraceData } from '@databricks/web-shared/model-trace-explorer';\n\n// returns ModelTrace if the request is successful, otherwise returns an error message\nexport async function getTraceArtifact(requestId: string): Promise<ModelTrace | string> {\n  try {\n    // eslint-disable-next-line no-restricted-globals -- See go/spog-fetch\n    const result = await fetch(`/ajax-api/2.0/mlflow/get-trace-artifact?request_id=${requestId}`);\n    const text = await result.text();\n\n    const jsonData = JSON.parse(text);\n    // successful request containing span data\n    if (jsonData.spans) {\n      return {\n        info: {\n          request_id: requestId,\n        },\n        data: jsonData as ModelTraceData,\n      };\n    }\n\n    if (jsonData.error_code) {\n      return jsonData.message;\n    }\n\n    return 'Unknown error occurred';\n  } catch (e) {\n    if (e instanceof Error) {\n      return e.message;\n    }\n\n    if (typeof e === 'string') {\n      return e;\n    }\n\n    return 'Unknown error occurred';\n  }\n}\n","import { useState, useEffect, useMemo } from 'react';\n\nimport {\n  useDesignSystemTheme,\n  Typography,\n  Pagination,\n  Empty,\n  DangerIcon,\n  InfoTooltip,\n} from '@databricks/design-system';\nimport { FormattedMessage } from '@databricks/i18n';\nimport { ModelTraceExplorer, getTraceArtifact } from '@databricks/web-shared/model-trace-explorer';\nimport type { ModelTrace } from '@databricks/web-shared/model-trace-explorer';\n\nconst MLFLOW_DOCS_URI = 'https://mlflow.org/docs/latest/llms/tracing/index.html?ref=jupyter-notebook-widget';\n\nconst getMlflowUILinkForTrace = (traceId: string, experimentId: string) => {\n  const queryParams = new URLSearchParams();\n  queryParams.append('selectedTraceId', traceId);\n  queryParams.append('compareRunsMode', 'TRACES');\n  return `/#/experiments/${experimentId}?${queryParams.toString()}`;\n};\n\nexport const ModelTraceExplorerOSSNotebookRenderer = () => {\n  const traceIds = useMemo(() => new URLSearchParams(window.location.search).getAll('trace_id'), []);\n  const experimentIds = useMemo(() => new URLSearchParams(window.location.search).getAll('experiment_id'), []);\n\n  const [activeTraceIndex, setActiveTraceIndex] = useState(traceIds.length > 0 ? 0 : null);\n  const [traceData, setTraceData] = useState<ModelTrace | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const { theme } = useDesignSystemTheme();\n\n  useEffect(() => {\n    const fetchTraceData = async () => {\n      if (activeTraceIndex === null) {\n        return;\n      }\n\n      setIsLoading(true);\n      const activeTraceId = traceIds[activeTraceIndex];\n      const data = await getTraceArtifact(activeTraceId);\n\n      if (typeof data === 'string') {\n        setError(data);\n      } else {\n        setTraceData(data);\n      }\n\n      setIsLoading(false);\n    };\n\n    fetchTraceData();\n  }, [activeTraceIndex, traceIds]);\n\n  if (traceIds.length === 0 || activeTraceIndex === null) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <div css={{ width: 'calc(100% - 2px)' }}>\n        <Typography.Text color=\"secondary\">\n          <FormattedMessage\n            defaultMessage=\"Fetching trace data...\"\n            description=\"MLflow trace notebook output > loading state\"\n          />\n        </Typography.Text>\n      </div>\n    );\n  }\n\n  // some error occured\n  if (!traceData) {\n    return (\n      <div css={{ paddingTop: theme.spacing.md, width: 'calc(100% - 2px)' }}>\n        <Empty\n          image={<DangerIcon />}\n          description={\n            <>\n              <Typography.Paragraph>\n                <FormattedMessage\n                  defaultMessage=\"An error occurred while attempting to fetch trace data (ID: {traceId}). Please ensure that the MLflow tracking server is running, and that the trace data exists. Error details:\"\n                  description=\"An error message explaining that an error occured while fetching trace data\"\n                  values={{ traceId: traceIds[activeTraceIndex] }}\n                />\n              </Typography.Paragraph>\n              {error && <Typography.Paragraph>{error}</Typography.Paragraph>}\n            </>\n          }\n          title={\n            <FormattedMessage defaultMessage=\"Error\" description=\"MLflow trace notebook output > error state title\" />\n          }\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexDirection: 'column',\n        border: `1px solid ${theme.colors.border}`,\n        // -2px to prevent bottom border from being cut off\n        height: 'calc(100% - 2px)',\n      }}\n    >\n      <div\n        css={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          padding: `${theme.spacing.xs}px ${theme.spacing.md}px`,\n        }}\n      >\n        <div\n          css={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: theme.spacing.sm,\n          }}\n        >\n          <Typography.Title level={4} withoutMargins>\n            MLflow Trace UI\n          </Typography.Title>\n          <InfoTooltip\n            componentId=\"mlflow.notebook.trace-ui-info\"\n            iconTitle=\"More information\"\n            maxWidth={400}\n            content={\n              <FormattedMessage\n                defaultMessage=\"To disable or enable this display, call {disableFunction} or {enableFunction} and re-run the cell\"\n                description=\"Content in an info popover that instructs the user on how to disable the display. The disable and enable functions are code snippets with the real function names\"\n                values={{\n                  disableFunction: <code>mlflow.tracing.disable_notebook_display()</code>,\n                  enableFunction: <code>mlflow.tracing.enable_notebook_display()</code>,\n                }}\n              />\n            }\n          />\n          <Typography.Link\n            componentId=\"mlflow.notebook.trace-ui-learn-more-link\"\n            href={MLFLOW_DOCS_URI}\n            openInNewTab\n            title=\"Learn More\"\n          >\n            <FormattedMessage\n              defaultMessage=\"Learn More\"\n              description=\"Link to MLflow documentation for more information on MLflow tracing\"\n            />\n          </Typography.Link>\n        </div>\n        <Typography.Link\n          componentId=\"mlflow.notebook.trace-ui-see-in-mlflow-link\"\n          href={getMlflowUILinkForTrace(traceIds[activeTraceIndex], experimentIds[activeTraceIndex])}\n          openInNewTab\n          title=\"View in MLflow UI\"\n        >\n          <FormattedMessage\n            defaultMessage=\"View in MLflow UI\"\n            description=\"Link to the MLflow UI for an alternate view of the current trace\"\n          />\n        </Typography.Link>\n      </div>\n      {traceIds.length > 1 && (\n        <Pagination\n          componentId=\"mlflow.notebook.pagination\"\n          currentPageIndex={activeTraceIndex + 1}\n          dangerouslySetAntdProps={{\n            showQuickJumper: true,\n          }}\n          numTotal={traceIds.length}\n          onChange={(index) => setActiveTraceIndex(index - 1)}\n          pageSize={1}\n          style={{ marginBottom: theme.spacing.sm, paddingLeft: theme.spacing.sm, paddingRight: theme.spacing.sm }}\n        />\n      )}\n      <div css={{ flex: 1, overflow: 'hidden' }}>\n        <ModelTraceExplorer modelTrace={traceData} initialActiveView=\"detail\" />\n      </div>\n    </div>\n  );\n};\n","import { type RefObject, useRef, useCallback, useEffect, useState } from 'react';\n\ntype ResizeObserverOptions<ElementType extends Element> = {\n  /**\n   * The element to watch for size changes. Can either pass a ref object or a function that when called will return the element to be watched\n   */\n  ref: RefObject<ElementType | null> | (() => ElementType | null);\n  /**\n   * Optionally debounces state updates, to prevent rerendering on every single resize\n   */\n  debounceTimeMs?: number;\n};\n\nexport function useResizeObserver<ElementType extends Element>({\n  ref: rootRef,\n  debounceTimeMs,\n}: ResizeObserverOptions<ElementType>): { width: number; height: number } | null {\n  const prevSize = useRef<{ width: number; height: number }>({ width: -1, height: -1 });\n  const debounceRef = useRef<ReturnType<typeof setTimeout>>();\n  const [size, setSize] = useState<{ width: number; height: number } | null>(null);\n\n  const onResize = useCallback(\n    (entries: ResizeObserverEntry[]) => {\n      if (entries.length === 0) {\n        return;\n      }\n\n      const rect = entries[0].contentRect;\n      if (prevSize.current.width === -1) {\n        // First update, just set size immediately\n        prevSize.current = { width: rect.width, height: rect.height };\n        setSize(prevSize.current);\n        return;\n      }\n\n      if (rect.width !== prevSize.current.width || rect.height !== prevSize.current.height) {\n        prevSize.current.width = rect.width;\n        prevSize.current.height = rect.height;\n\n        if (!debounceTimeMs) {\n          setSize({ ...prevSize.current });\n          return;\n        }\n        clearTimeout(debounceRef.current);\n        debounceRef.current = setTimeout(() => {\n          setSize({ ...prevSize.current });\n        }, debounceTimeMs);\n      }\n    },\n    [debounceTimeMs],\n  );\n\n  const observerRef = useRef<ResizeObserver>();\n  if (!observerRef.current) {\n    observerRef.current = new ResizeObserver(onResize);\n  }\n\n  useEffect(() => {\n    const rootElement = typeof rootRef === 'function' ? rootRef() : rootRef.current;\n    if (rootElement) {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- TODO(FEINF-3982)\n      const observer = observerRef.current!;\n      observer.observe(rootElement);\n      return () => observer.unobserve(rootElement);\n    }\n    return;\n  });\n\n  return size;\n}\n"],"names":["shouldEnableAssessmentEditing","shouldEnableSummaryView","getIsMlflowTraceUIEnabled","_ref","name","styles","SnippetActionButton","tooltipMessage","buttonProps","style","_jsx","LegacyTooltip","title","children","Button","componentId","css","SnippetCopyAction","copyText","onClick","props","actionIcon","copy","text","copyTooltip","onCopy","intl","useIntl","copyMessage","formatMessage","id","defaultMessage","copiedMessage","clipboard","useClipboard","copiedTimerIdRef","useRef","copied","setCopied","useState","open","setOpen","useEffect","window","clearTimeout","current","CheckIcon","CopyIcon","setTimeout","ariaLabel","tooltipOpen","handleTooltipOpenChange","useCopyController","icon","e","SyntaxHighlighter","registerLanguage","sql","java","python","go","javascript","yaml","json","snippetPadding","themesStyles","light","lightStyle","duotoneDark","duotoneDarkStyle","CodeSnippet","theme","language","actions","showLineNumbers","lineNumberStyle","wrapLongLines","wrapLines","PreTag","customStyle","border","borderRadius","margin","padding","codeTagProps","pick","ErrorLogType","ErrorName","PredefinedError","Error","constructor","message","cause","super","errorLogType","errorName","displayMessage","isUserError","matchPredefinedError","error","matchPredefinedApolloError","Response","matchPredefinedErrorFromResponse","UnknownError","networkError","hasOwnProperty","response","GraphQLGenericError","originalError","errorDetails","NetworkRequestError","getNetworkRequestErrorDetailsFromResponse","status","BadRequestError","UnauthorizedError","PermissionError","NotFoundError","RateLimitedError","InternalServerError","ServiceUnavailableError","GenericNetworkRequestError","details","this","ServerError","FormattedMessage","ApplicationError","UserInputError","UnexpectedSystemStateError","SessionError","getCurrentUser","displayErrorNotification","errorMessage","getIconTypeForSpan","spanType","ModelSpanType","LLM","ModelIconType","MODELS","CHAIN","AGENT","TOOL","WRENCH","CHAT_MODEL","RETRIEVER","SEARCH","PARSER","CODE","EMBEDDING","NUMBERS","RERANKER","SORT","FUNCTION","UNKNOWN","getDisplayNameForSpanType","tryDeserializeAttribute","value","JSON","parse","getMatchesFromSpan","span","searchFilter","matches","sections","inputs","outputs","attributes","events","map","section","label","push","getMatchesFromEvent","forEach","event","index","Object","keys","attribute","isKeyMatch","toLowerCase","includes","key","getEventAttributeKey","matchIndex","numValueMatches","stringify","split","length","i","createListFromObject","item","searchTree","rootNode","spanFilterState","_rootNode$children","searchFilterLowercased","trim","allSpanTypesSelected","values","spanTypeDisplayState","every","shouldDisplay","filteredTreeNodes","filteredChildren","child","childNodes","childMatches","spanName","spanMatches","nodeMatchesSearch","spanTypeIsDisplayed","type","nodePassesSpanFilters","hasMatchingChild","hasException","getSpanExceptionCount","showParents","showExceptions","concat","searchTreeBySpanId","selectedSpanId","_rootNode$children2","isNil","matchedNode","normalizeNewSpanData","rootStartTime","rootEndTime","assessmentMap","traceId","_span$attributes","_span$attributes2","_span$attributes3","_assessmentMap$spanId","_span$attributes4","_span$attributes5","_span$attributes6","_getModelTraceSpanEnd","parentId","getModelTraceSpanParentId","spanId","getModelTraceSpanId","assessments","_assessmentMap$","messagesAttributeValue","messageFormat","chatMessages","getChatMessagesFromSpan","spanAttributes","_normalizeConversatio","_normalizeConversatio2","Array","isArray","isRawModelTraceChatMessage","compact","prettyPrintChatMessage","messagesFromInputs","normalizeConversation","messagesFromOutputs","undefined","chatTools","getChatToolsFromSpan","toolsAttributeValue","_inputs$tools","isModelTraceChatTool","tools","mapValues","omitBy","_","startsWith","start","Number","getModelTraceSpanStartTime","end","getModelTraceSpanEndTime","ModelTraceExplorerIcon","isRootSpan","decodeSpanId","isV3Span","base64","binaryString","atob","binaryLen","hex","charCodeAt","toString","padStart","base64ToHex","slice","isV3ModelTraceInfo","info","isV3ModelTraceSpan","_span$context$span_id","_span$context","span_id","context","_span$parent_id","parent_span_id","parent_id","start_time_unix_nano","start_time","end_time_unix_nano","end_time","getModelTraceId","trace","_trace$info$request_i","trace_id","request_id","parseModelTraceToTree","_trace$trace_data$spa","_trace$trace_data","spans","trace_data","data","spanMap","relationMap","rootSpan","find","getSpanNodeFromData","_span$span_type","_span$end_time","_span$parent_id2","rootStart","rootEnd","getAssessmentMap","span_type","traceInfo","_traceInfo$assessment","getAssessmentsFromTags","tags","assessmentsById","keyBy","assessment","overrides","overriddenAssessment","reduce","acc","_assessment$span_id","sort","a","b","Date","last_update_time","getTime","entries","filter","findTraceVersionByKey","source","_source$find","tag","MLFLOW_TRACE_SCHEMA_VERSION_KEY","isModelTrace","_traceInfo$request_me","traceData","metadata","request_metadata","trace_metadata","obj","isString","isNumber","isBoolean","getHighlightedSpanComponents","activeMatchBackgroundColor","inactiveMatchBackgroundColor","containsActiveMatch","activeMatch","scrollToActiveMatch","regex","RegExp","escapeRegExp","parts","isActiveMatch","backgroundColor","ref","_css","scrollMarginTop","isRetrieverDocument","document","has","isRenderableRetrieverSpan","getSpanExceptionEvents","_span$events","isModelTraceChatToolParamProperty","description","enum","_obj$function","parameters","function","required","properties","isModelTraceToolCall","_obj$function2","_obj$function3","arguments","isContentType","content","part","image_url","url","detail","input_audio","format","isContentPart","tool_calls","role","isModelTraceChoices","choice","isModelTraceChatResponse","choices","input","_normalizeLangchainCh","_normalizeLlamaIndexC","_ref2","_ref3","_normalizeOpenAIChatI","_normalizeDspyChatInp","_normalizeGeminiChatI","_normalizeAnthropicCh","_normalizeOpenAIAgent","_normalizeAutogenChat","_normalizeBedrockChat","_normalizeOpenAIChatI2","langchainMessages","normalizeLangchainChatInput","normalizeLangchainChatResult","llamaIndexMessages","normalizeLlamaIndexChatInput","normalizeLlamaIndexChatResponse","openAIMessages","normalizeOpenAIChatInput","normalizeOpenAIChatResponse","normalizeOpenAIResponsesOutput","normalizeOpenAIResponsesInput","dspyMessages","normalizeDspyChatInput","normalizeDspyChatOutput","geminiMessages","normalizeGeminiChatInput","normalizeGeminiChatOutput","anthropicMessages","normalizeAnthropicChatInput","normalizeAnthropicChatOutput","openAIAgentMessages","normalizeOpenAIAgentInput","normalizeOpenAIAgentOutput","autogenMessages","normalizeAutogenChatInput","normalizeAutogenChatOutput","bedrockMessages","normalizeBedrockChatInput","normalizeBedrockChatOutput","prettyPrintToolCall","toolCall","_toolCall$function","args","formatChatContent","_part$image_url","join","_message$tool_calls","INFERENCE_TABLE_RESPONSE_COLUMN_KEY","INFERENCE_TABLE_TRACE_COLUMN_KEY","ModelTraceSpanType","CodeSnippetRenderMode","async","getTraceArtifact","requestId","result","fetch","jsonData","error_code","getMlflowUILinkForTrace","experimentId","queryParams","URLSearchParams","append","ModelTraceExplorerOSSNotebookRenderer","traceIds","useMemo","location","search","getAll","experimentIds","activeTraceIndex","setActiveTraceIndex","setTraceData","isLoading","setIsLoading","setError","useDesignSystemTheme","activeTraceId","fetchTraceData","Typography","Text","color","_jsxs","display","flexDirection","colors","height","alignItems","justifyContent","spacing","xs","md","gap","sm","Title","level","withoutMargins","InfoTooltip","iconTitle","maxWidth","disableFunction","enableFunction","Link","href","openInNewTab","Pagination","currentPageIndex","dangerouslySetAntdProps","showQuickJumper","numTotal","onChange","pageSize","marginBottom","paddingLeft","paddingRight","ModelTraceExplorer","modelTrace","initialActiveView","paddingTop","width","Empty","image","DangerIcon","_Fragment","Paragraph","useResizeObserver","rootRef","debounceTimeMs","prevSize","debounceRef","size","setSize","onResize","useCallback","rect","contentRect","observerRef","ResizeObserver","rootElement","observer","observe","unobserve"],"sourceRoot":""}