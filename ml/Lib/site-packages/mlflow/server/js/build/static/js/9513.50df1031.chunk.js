"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[9513],{10336:function(e,t,n){n.r(t),n.d(t,{RunPage:function(){return Nt},default:function(){return Pt}});var r=n(89555),i=n(37523),o=n(13062),a=n(10811),s=n(4877),l=n.n(s),d=n(31014),u=n(48588),c=n(93215),m=n(76010),g=n(25866),p=n(53677),v=n(5643),h=n(94026),f=n(50111);const Y=({runTags:e,experimentId:t,runOutputs:n,artifactUri:i,runUuid:a})=>{const{theme:s}=(0,o.u)(),l=(0,h.Ub)(`(min-width: ${s.responsive.breakpoints.sm}px)`);return(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"hidden",display:"flex",paddingBottom:s.spacing.md,position:"relative"},""),children:(0,f.Y)(v.Ay,{runUuid:a,runTags:e,runOutputs:n,useAutoHeight:l,artifactRootUri:i,experimentId:t})})};var M=n(88443),x=n(79085),y=n(58481);const _=()=>{const{"*":e}=(0,c.g)();return"model-metrics"===e?g.N3.MODEL_METRIC_CHARTS:"system-metrics"===e?g.N3.SYSTEM_METRIC_CHARTS:"traces"===e?g.N3.TRACES:null!==e&&void 0!==e&&e.match(/^(artifactPath|artifacts)/)?g.N3.ARTIFACTS:g.N3.OVERVIEW},I=[g.N3.ARTIFACTS,g.N3.EVALUATIONS],A=()=>{const{experimentId:e,runUuid:t}=(0,c.g)(),n=(0,c.Zp)(),{theme:r}=(0,o.u)(),a=_(),[s,l]=(0,d.useState)(I.includes(a));return(0,f.FD)(i.LegacyTabs,{activeKey:a,onChange:r=>{e&&t&&a!==r&&(l(I.includes(r)),r!==g.N3.OVERVIEW?n(y.Ay.getRunPageTabRoute(e,t,r)):n(y.Ay.getRunPageRoute(e,t)))},tabBarStyle:{margin:s&&"0px"},children:[(0,f.Y)(i.LegacyTabs.TabPane,{tab:(0,f.Y)(M.A,{id:"kA+QJr",defaultMessage:"Overview"})},g.N3.OVERVIEW),(0,f.Y)(i.LegacyTabs.TabPane,{tab:(0,f.Y)(M.A,{id:"j25Ttg",defaultMessage:"Model metrics"})},g.N3.MODEL_METRIC_CHARTS),(0,f.Y)(i.LegacyTabs.TabPane,{tab:(0,f.Y)(M.A,{id:"hFlaPP",defaultMessage:"System metrics"})},g.N3.SYSTEM_METRIC_CHARTS),(0,f.Y)(i.LegacyTabs.TabPane,{tab:(0,f.Y)(M.A,{id:"s8a93+",defaultMessage:"Traces"})},g.N3.TRACES),(0,f.Y)(i.LegacyTabs.TabPane,{tab:(0,f.Y)(M.A,{id:"vPqFJE",defaultMessage:"Artifacts"})},g.N3.ARTIFACTS)]})};var S=n(9133),T=n(85466),D=n(81866),b=(n(69869),n(21317));var R={name:"s5xdrg",styles:"display:flex;align-items:center"},w={name:"2ecpu6",styles:"margin-left:8px;margin-right:4px"};function C({models:e,onRegisterClick:t,experimentId:n,runUuid:a}){const{theme:s}=(0,o.u)(),l=(e,l)=>(0,f.FD)(i.DropdownMenu.Group,{children:[(0,f.Y)(i.DropdownMenu.Label,{children:e}),l.map((e=>{const l=(0,S.first)(e.registeredModelVersionSummaries);if(!l)return(0,f.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50",onClick:()=>t(e),children:[(0,f.Y)("div",{css:(0,r.AH)({marginRight:s.spacing.md},""),children:(0,S.last)(e.path.split("/"))}),(0,f.Y)(i.DropdownMenu.HintColumn,{children:(0,f.Y)(c.N_,{target:"_blank",to:y.Ay.getRunPageTabRoute(n,a,"artifacts/"+e.path),children:(0,f.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(o.av,{}),children:(0,f.Y)(M.A,{id:"NqEELO",defaultMessage:"View model"})})})})]},e.absolutePath);const{status:d,displayedName:u,version:m,link:g}=l;return(0,f.Y)(c.N_,{target:"_blank",to:g,children:(0,f.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80",children:[(0,f.Y)(i.DropdownMenu.IconWrapper,{css:R,children:"READY"===d?(0,f.Y)(b.h,{}):d?D.UA[d]:null}),(0,f.FD)("span",{css:(0,r.AH)({marginRight:s.spacing.md},""),children:[u,(0,f.FD)(i.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90",css:w,children:["v",m]})]}),(0,f.Y)(i.DropdownMenu.HintColumn,{children:(0,f.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89",type:"link",size:"small",onClick:e=>{e.stopPropagation()},endIcon:(0,f.Y)(o.av,{}),children:(0,f.Y)(M.A,{id:"T1sd79",defaultMessage:"Go to model"})})})]})},e.absolutePath)}))]}),d=e.filter((e=>e.registeredModelVersionSummaries.length>0)),u=e.filter((e=>!e.registeredModelVersionSummaries.length));return(0,f.FD)(f.FK,{children:[u.length?l("Unregistered models",u):null,u.length&&d.length?(0,f.Y)(i.DropdownMenu.Separator,{}):null,d.length?l("Registered models",d):null]})}const E=({runUuid:e,experimentId:t,runTags:n,artifactRootUri:a,registeredModelVersionSummaries:s})=>{const{theme:l}=(0,o.u)(),u=(0,d.useMemo)((()=>n?m.A.getLoggedModelsFromTags(n).map((({artifactPath:e})=>e)):[]),[n]),g=(0,d.useMemo)((()=>(0,S.orderBy)(u.map((e=>({path:e,absolutePath:`${a}/${e}`,registeredModelVersionSummaries:(null===s||void 0===s?void 0:s.filter((({source:t})=>t===`${a}/${e}`)))||[]}))),(e=>{var t;return parseInt((null===(t=e.registeredModelVersionSummaries[0])||void 0===t?void 0:t.version)||"0",10)}),"desc")),[u,s,a]),[p,v]=(0,d.useState)(null);if(g.length>1){const n=g.filter((e=>e.registeredModelVersionSummaries.length>0));return(0,f.FD)(f.FK,{children:[p&&(0,f.Y)(T.vR,{runUuid:e,modelPath:p.absolutePath,modelRelativePath:p.path,disabled:!1,showButton:!1,modalVisible:!0,onCloseModal:()=>v(null)}),(0,f.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,f.Y)(i.LegacyTooltip,{placement:"bottom",title:(0,f.Y)(M.A,{id:"qE/ZB7",defaultMessage:"{registeredCount}/{loggedCount} logged models are registered",values:{registeredCount:n.length,loggedCount:g.length}}),children:(0,f.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,f.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195",type:"primary",endIcon:(0,f.Y)(i.ChevronDownIcon,{}),children:(0,f.Y)(M.A,{id:"WGN2f3",defaultMessage:"Register model"})})})}),(0,f.Y)(i.DropdownMenu.Content,{align:"end",children:(0,f.Y)(C,{models:g,onRegisterClick:v,experimentId:t,runUuid:e})})]})]})}const h=(0,S.first)(g);if(!h)return null;const Y=(0,S.first)(h.registeredModelVersionSummaries);return Y?(0,f.Y)(c.N_,{to:Y.link,target:"_blank",css:(0,r.AH)({marginLeft:l.spacing.sm},""),children:(0,f.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231",endIcon:(0,f.Y)(o.av,{}),type:"link",children:"Model registered"})}):(0,f.Y)(T.vR,{disabled:!1,runUuid:e,modelPath:h.absolutePath,modelRelativePath:h.path,showButton:!0,buttonType:"primary"})};var k=n(91144);var U={name:"ozd7xs",styles:"flex-shrink:0"};const F=({hasComparedExperimentsBefore:e,comparedExperimentIds:t=[],experiment:n,runDisplayName:r,runTags:i,runParams:o,runUuid:a,handleRenameRunClick:s,handleDeleteRunClick:l,artifactRootUri:d,registeredModelVersionSummaries:u,isLoading:m})=>{const p=[function(){var r;return e&&t?(0,f.Y)(c.N_,{to:y.Ay.getCompareExperimentsPageRoute(t),children:(0,f.Y)(M.A,{id:"LLm5Bo",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})}):(0,f.Y)(c.N_,{to:y.Ay.getExperimentPageRoute(null!==(r=null===n||void 0===n?void 0:n.experimentId)&&void 0!==r?r:""),"data-test-id":"experiment-runs-link",children:n.name})}()];(0,k.w7)()&&n.experimentId&&p.push((0,f.Y)(c.N_,{to:y.Ay.getExperimentPageTabRoute(n.experimentId,g.fM.Runs),"data-test-id":"experiment-observatory-link-runs",children:(0,f.Y)(M.A,{id:"ozPVhc",defaultMessage:"Runs"})}));return(0,f.FD)("div",{css:U,children:[(0,f.FD)(x.z,{title:(0,f.Y)("span",{"data-test-id":"runs-header",children:r}),breadcrumbs:p,children:[(0,f.Y)(x.o,{menu:[{id:"overflow-rename-button",onClick:s,itemName:(0,f.Y)(M.A,{id:"fv7vQf",defaultMessage:"Rename"})},...l?[{id:"overflow-delete-button",onClick:l,itemName:(0,f.Y)(M.A,{id:"7WkP1e",defaultMessage:"Delete"})}]:[]]}),(()=>{var e;return(0,f.Y)(E,{runUuid:a,experimentId:null!==(e=null===n||void 0===n?void 0:n.experimentId)&&void 0!==e?e:"",runTags:i,artifactRootUri:d,registeredModelVersionSummaries:u})})()]}),(0,f.Y)(A,{})]})};var L=n(88464),N=n(6958),P=n(21616),B=n(76758);const H=({status:e})=>{const{theme:t}=(0,o.u)();return(0,f.FD)(i.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81",css:(0,r.AH)({backgroundColor:"FINISHED"===e?t.isDarkMode?t.colors.green800:t.colors.green100:"KILLED"===e||"FAILED"===e?t.isDarkMode?t.colors.red800:t.colors.red100:"SCHEDULED"===e||"RUNNING"===e?t.isDarkMode?t.colors.blue800:t.colors.blue100:void 0},""),children:[e&&(0,f.Y)(B.F,{status:e})," ",(0,f.Y)(o.T.Text,{css:(0,r.AH)({marginLeft:t.spacing.sm},""),children:"FINISHED"===e?(0,f.Y)(o.T.Text,{color:"success",children:(0,f.Y)(M.A,{id:"ujm55z",defaultMessage:"Finished"})}):"KILLED"===e?(0,f.Y)(o.T.Text,{color:"error",children:(0,f.Y)(M.A,{id:"AupQl+",defaultMessage:"Killed"})}):"FAILED"===e?(0,f.Y)(o.T.Text,{color:"error",children:(0,f.Y)(M.A,{id:"AM8DuO",defaultMessage:"Failed"})}):"RUNNING"===e?(0,f.Y)(o.T.Text,{color:"info",children:(0,f.Y)(M.A,{id:"On3g1B",defaultMessage:"Running"})}):"SCHEDULED"===e?(0,f.Y)(o.T.Text,{color:"info",children:(0,f.Y)(M.A,{id:"X8OaXU",defaultMessage:"Scheduled"})}):e})]})},O=({runInfo:e,tags:t})=>{var n;const r=m.A.getUser(e,t);return(0,f.Y)(c.N_,{to:y.Ay.searchRunsByUser(null!==(n=null===e||void 0===e?void 0:e.experimentId)&&void 0!==n?n:"",r),children:r})};var V=n(68109),z=n(40553),K=n(69526),W=n(32039),$=n(70618),G=n(9856),j=n(3288);const{systemMetricsLabel:Z,modelMetricsLabel:q}=(0,K.YK)({systemMetricsLabel:{id:"aFMLIO",defaultMessage:"System metrics"},modelMetricsLabel:{id:"NiSPrL",defaultMessage:"Model metrics"}}),Q=e=>({key:t})=>t.toLowerCase().includes(e.toLowerCase()),J=({metricsList:e,runInfo:t,header:n,table:a})=>{var s,l;const{theme:d}=(0,o.u)(),[{column:u},...m]=a.getLeafHeaders(),g=null===(s=m.find((e=>"value"===e.id)))||void 0===s?void 0:s.column,p=e.some((({loggedModels:e})=>!(0,S.isEmpty)(e))),v=null===(l=m.find((e=>"models"===e.id)))||void 0===l?void 0:l.column;return e.length?(0,f.FD)(f.FK,{children:[n&&(0,f.Y)(i.TableRow,{children:(0,f.Y)(i.TableCell,{css:(0,r.AH)({flex:1,backgroundColor:d.colors.backgroundSecondary},""),children:(0,f.FD)(o.T.Text,{bold:!0,children:[n," (",e.length,")"]})})}),e.map((({key:e,value:n,loggedModels:o})=>{var a,s;return(0,f.FD)(i.TableRow,{children:[(0,f.Y)(i.TableCell,{style:{flex:u.getCanResize()?u.getSize()/100:void 0},children:(0,f.Y)(c.N_,{to:y.Ay.getMetricPageRoute([null!==(a=t.runUuid)&&void 0!==a?a:""],e,[null!==(s=t.experimentId)&&void 0!==s?s:""]),children:e})}),(0,f.Y)(i.TableCell,{css:(0,r.AH)({flex:null!==g&&void 0!==g&&g.getCanResize()?g.getSize()/100:void 0},""),children:n.toString()}),p&&(0,f.Y)(i.TableCell,{css:(0,r.AH)({flex:null!==v&&void 0!==v&&v.getCanResize()?v.getSize()/100:void 0},""),children:(0,S.isEmpty)(o)?"-":(0,f.Y)(i.Overflow,{children:null===o||void 0===o?void 0:o.map((e=>{var t,n,r,i,o,a;return(0,f.Y)(c.N_,{target:"_blank",rel:"noopener noreferrer",to:y.Ay.getExperimentLoggedModelDetailsPage(null!==(n=null===(r=e.info)||void 0===r?void 0:r.experiment_id)&&void 0!==n?n:"",null!==(i=null===(o=e.info)||void 0===o?void 0:o.model_id)&&void 0!==i?i:""),children:null===(a=e.info)||void 0===a?void 0:a.name},null===(t=e.info)||void 0===t?void 0:t.model_id)}))})})]},e)}))]}):null};var X={name:"ozd7xs",styles:"flex-shrink:0"};const ee=({latestMetrics:e,runInfo:t,loggedModels:n})=>{const{theme:a}=(0,o.u)(),{detailsPageTableStyles:s,detailsPageNoEntriesStyles:l,detailsPageNoResultsWrapperStyles:u,usingUnifiedDetailsLayout:c}=(0,j.z)(),m=(0,L.A)(),[g,p]=(0,d.useState)(""),v=(0,d.useMemo)((()=>{if(!n)return{};const e=(0,S.compact)((0,S.flatMap)(n,(e=>{var t,n;return null===(t=e.data)||void 0===t||null===(n=t.metrics)||void 0===n?void 0:n.map((({key:t})=>({key:t,model:e})))}))),t=(0,S.groupBy)(e,"key");return(0,S.mapValues)(t,(e=>e.map((({model:e})=>e))))}),[n]),h=(0,d.useMemo)((()=>{const t=(0,S.values)(e);return(0,S.isEmpty)(v)?t:t.map((e=>{var t;return{...e,loggedModels:null!==(t=v[e.key])&&void 0!==t?t:[]}}))}),[e,v]),Y=h.some((({loggedModels:e})=>!(0,S.isEmpty)(e))),x=(0,d.useMemo)((()=>[{id:"models",header:m.formatMessage({id:"mRshzt",defaultMessage:"Models"}),accessorKey:"models",enableResizing:!0}]),[m]),y=(0,d.useMemo)((()=>{const e=[{id:"key",accessorKey:"key",header:()=>(0,f.Y)(M.A,{id:"pjlcSc",defaultMessage:"Metric"}),enableResizing:!0,size:240},{id:"value",header:()=>(0,f.Y)(M.A,{id:"t0Qkuc",defaultMessage:"Value"}),accessorKey:"value",enableResizing:!0}];return Y&&e.push(...x),e}),[Y,x]),_=(0,d.useMemo)((()=>{const e=h.filter((({key:e})=>(0,W.bw)(e))),t=h.filter((({key:e})=>!(0,W.bw)(e)));return e.length>0&&t.length>0?[{header:m.formatMessage(Z),metrics:e.filter(Q(g))},{header:m.formatMessage(q),metrics:t.filter(Q(g))}]:[{header:void 0,metrics:h.filter(Q(g))}]}),[g,h,m]),I=(0,$.N4)({data:h,getCoreRowModel:(0,G.HT)(),getRowId:e=>e.key,enableColumnResizing:!0,columnResizeMode:"onChange",columns:y});return(0,f.FD)("div",{css:(0,r.AH)({flex:c?"0 0 auto":1,display:"flex",flexDirection:"column",overflow:"hidden"},""),children:[(0,f.Y)(o.T.Title,{level:4,css:X,children:(0,f.Y)(M.A,{id:"m4159e",defaultMessage:"Metrics ({length})",values:{length:h.filter(Q(g)).length}})}),(0,f.Y)("div",{css:(0,r.AH)({padding:a.spacing.sm,border:`1px solid ${a.colors.borderDecorative}`,borderRadius:a.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:(()=>{if(!h.length)return(0,f.Y)("div",{css:l,children:(0,f.Y)(i.Empty,{description:(0,f.Y)(M.A,{id:"9vj5Ap",defaultMessage:"No metrics recorded"})})});const e=(0,S.sum)(_.map((({metrics:e})=>e.length)))<1;return(0,f.FD)(f.FK,{children:[(0,f.Y)("div",{css:(0,r.AH)({marginBottom:a.spacing.sm},""),children:(0,f.Y)(z.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186",prefix:(0,f.Y)(z.S,{}),placeholder:m.formatMessage({id:"w2+rkp",defaultMessage:"Search metrics"}),value:g,onChange:e=>p(e.target.value),allowClear:!0})}),(0,f.FD)(i.Table,{scrollable:!0,empty:e?(0,f.Y)("div",{css:u,children:(0,f.Y)(i.Empty,{description:(0,f.Y)(M.A,{id:"lT1Joh",defaultMessage:"No metrics match the search filter"})})}):null,css:s,children:[(0,f.Y)(i.TableRow,{isHeader:!0,children:I.getLeafHeaders().map((e=>(0,f.Y)(i.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312",header:e,column:e.column,setColumnSizing:I.setColumnSizing,isResizing:e.column.getIsResizing(),style:{flex:e.column.getCanResize()?e.column.getSize()/100:void 0},children:(0,$.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),_.map(((e,n)=>(0,f.Y)(J,{metricsList:e.metrics,runInfo:t,header:e.header,table:I},e.header||n)))]})]})})()})]})};var te=n(38243),ne=n(85343);var re={name:"1flj9lk",styles:"text-align:left"},ie={name:"ti75j2",styles:"margin:0"};const oe=({dataset:e,onClick:t})=>(0,f.Y)(o.T.Link,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_16",role:"link",css:re,onClick:t,children:(0,f.Y)(te.E,{datasetWithTags:e,displayTextAsLink:!0,css:ie})}),ae=({tags:e,runInfo:t,datasets:n})=>{const[a,s]=(0,d.useState)(null),{theme:l}=(0,o.u)(),[u,c]=(0,d.useState)(!1);if(!n||!n.length)return null;const m=n[0],g=n.slice(1),p=r=>{var i,o,a;s({datasetWithTags:r,runData:{experimentId:null!==(i=t.experimentId)&&void 0!==i?i:void 0,runUuid:null!==(o=t.runUuid)&&void 0!==o?o:"",runName:null!==(a=t.runName)&&void 0!==a?a:void 0,datasets:n,tags:e}}),c(!0)};return(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:l.spacing.sm,alignItems:"center"},""),children:[(0,f.Y)(oe,{dataset:m,onClick:()=>p(m)}),g.length?(0,f.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,f.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,f.FD)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70",size:"small",children:["+",g.length]})}),(0,f.Y)(i.DropdownMenu.Content,{children:g.map((e=>(0,f.Y)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_81",children:(0,f.Y)(oe,{dataset:e,onClick:()=>p(e)})},e.dataset.digest)))})]}):null,a&&(0,f.Y)(ne.O,{isOpen:u,setIsOpen:c,selectedDatasetWithRun:a,setSelectedDatasetWithRun:s})]})};var se=n(26809),le=n(47545);const de=({parentRunUuid:e})=>{const t=(0,a.wA)(),n=(0,a.d4)((({entities:t})=>t.runInfosByUuid[e])),r=(0,le.t)({runUuid:e,disabled:!(0,k.wD)()}),o=(0,d.useMemo)((()=>{var e;return(0,k.wD)()?null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.info:n}),[r,n]);return(0,d.useEffect)((()=>{(0,k.wD)()||o||t((0,se.aO)(e))}),[t,e,o]),o?o.experimentId&&o.runUuid?(0,f.Y)(c.N_,{to:y.Ay.getRunPageRoute(o.experimentId,o.runUuid),children:o.runName}):null:(0,f.Y)(i.ParagraphSkeleton,{loading:!0,label:(0,f.Y)(M.A,{id:"nfIS4i",defaultMessage:"Parent run name loading"})})};var ue=n(43683),ce=n(98597),me=n(98590);var ge={name:"1wcfv52",styles:"margin-right:0"};const pe=({runUuid:e,tags:t,onTagsUpdated:n})=>{(0,k.V0)();const[s,l]=(0,d.useState)(!1),{theme:u}=(0,o.u)(),c=(0,a.wA)(),m=(0,L.A)(),[g,p]=(0,d.useMemo)((()=>[(0,S.keys)(t).filter(me.oD),(0,S.values)(t).filter((({key:e})=>(0,me.oD)(e)))]),[t]),{EditTagsModal:v,showEditTagsModal:h,isLoading:Y}=(0,ue.Q)({valueRequired:!0,allAvailableTags:g,saveTagsHandler:async(t,r,i)=>c((0,se.hD)(e,r,i)).then(n)}),x=()=>{h({tags:p})},y=m.formatMessage({id:"EwAZgg",defaultMessage:"Edit tags"});return(0,f.FD)("div",{css:(0,r.AH)({paddingTop:u.spacing.xs,paddingBottom:u.spacing.xs,display:"flex",flexWrap:"wrap",alignItems:"center","> *":{marginRight:"0 !important"},gap:u.spacing.xs},""),children:[p.length<1?(0,f.Y)(o.B,{componentId:"mlflow.run_details.overview.tags.add_button",size:"small",type:"tertiary",onClick:x,children:(0,f.Y)(M.A,{id:"dt3hj5",defaultMessage:"Add tags"})}):(0,f.FD)(f.FK,{children:[p.map((e=>(0,f.Y)(ce.t,{tag:e,enableFullViewModal:!0,css:ge},`${e.key}-${e.value}`))),(0,f.Y)(N.T,{componentId:"mlflow.run_details.overview.tags.edit_button.tooltip",content:y,children:(0,f.Y)(o.B,{componentId:"mlflow.run_details.overview.tags.edit_button","aria-label":y,size:"small",icon:(0,f.Y)(i.PencilIcon,{}),onClick:x})})]}),Y&&(0,f.Y)(o.S,{size:"small"}),v]})};var ve=n(96034),he=n(56928);const fe=({runUuid:e,tags:t,onDescriptionChanged:n})=>{var s;const l=(null===(s=t[he.e])||void 0===s?void 0:s.value)||"",[u,c]=(0,d.useState)(!1),m=(0,L.A)(),{theme:g}=(0,o.u)(),p=(0,a.wA)(),v=!l;return(0,f.FD)("div",{css:(0,r.AH)({marginBottom:g.spacing.md},""),children:[(0,f.FD)(o.T.Title,{level:4,css:(0,r.AH)({display:"flex",alignItems:"center",gap:g.spacing.xs},""),children:[(0,f.Y)(M.A,{id:"ugwpKL",defaultMessage:"Description"}),(0,f.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46",size:"small",type:"tertiary","aria-label":m.formatMessage({id:"Mtj9Ay",defaultMessage:"Edit description"}),onClick:()=>c(!0),icon:(0,f.Y)(i.PencilIcon,{})})]}),v&&!u&&(0,f.Y)(o.T.Hint,{children:(0,f.Y)(M.A,{id:"VcNdOq",defaultMessage:"No description"})}),(!v||u)&&(0,f.Y)(ve.V,{defaultMarkdown:l,onSubmit:t=>p((0,se.Jv)(e,he.e,t)).then(n).then((()=>c(!1))),onCancel:()=>c(!1),showEditor:u})]})};var Ye=n(4874);var Me={name:"e0dnmk",styles:"cursor:pointer"};const xe=({registeredModelVersionSummaries:e})=>{const{theme:t}=(0,o.u)();return(0,f.Y)(i.Overflow,{children:null===e||void 0===e?void 0:e.map((e=>(0,f.FD)(c.N_,{to:e.link,css:(0,r.AH)({display:"flex",alignItems:"center",gap:t.spacing.sm},""),children:[(0,f.Y)(b.h,{})," ",e.displayedName," ",(0,f.FD)(i.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40",css:Me,children:["v",e.version]})]},e.displayedName)))})};var ye=n(41261),_e=n(82832);const Ie=async({queryKey:e})=>{const[,{runUuid:t}]=e;return _e.M.getPromptVersionsForRun(t)};var Ae=n(84565);var Se={name:"1bmnxg7",styles:"white-space:nowrap"};const Te=({tags:e,runUuid:t})=>{const{theme:n}=(0,o.u)(),{data:a,error:s,isLoading:l}=(({runUuid:e},t={})=>{var n;const r=(0,ye.I)(["run_uuid",{runUuid:e}],{queryFn:Ie,retry:!1,...t});return{data:r.data,error:null!==(n=r.error)&&void 0!==n?n:void 0,isLoading:r.isLoading,refetch:r.refetch}})({runUuid:t}),d=[...(null===a||void 0===a?void 0:a.model_versions)||[],...(0,Ae.U7)(e)];return l?(0,f.Y)(i.ParagraphSkeleton,{}):s||!d||0===d.length?(0,f.Y)(o.T.Hint,{children:"\u2014"}):(0,f.Y)("div",{css:(0,r.AH)({display:"flex",flexDirection:"row",gap:n.spacing.sm,flexWrap:"wrap",padding:`${n.spacing.sm}px 0px`},""),children:d.map(((e,t)=>{const n=y.Ay.getPromptDetailsPageRoute(encodeURIComponent(e.name)),r=`${e.name} (v${e.version})`;return(0,f.FD)(o.T.Text,{css:Se,children:[(0,f.Y)(c.N_,{to:n,children:r}),t<d.length-1&&","]},r)}))})},De=({loggedModels:e,loggedModelsV3:t,runInfo:n})=>{const{theme:a}=(0,o.u)(),{experimentId:s,runUuid:l}=n,u=e=>(0,S.first)(e)||(0,f.Y)(M.A,{id:"0HbGko",defaultMessage:"Model"}),m=(0,d.useMemo)((()=>{const t=e.map((e=>u(e.flavors)));return new Set(t).size!==t.length}),[e]);return(0,f.FD)(i.Overflow,{children:[e.map(((e,t)=>(0,f.FD)(c.N_,{to:y.Ay.getRunPageRoute(null!==s&&void 0!==s?s:"",null!==l&&void 0!==l?l:"",e.artifactPath),css:(0,r.AH)({display:"flex",alignItems:"center",gap:a.spacing.sm,cursor:"pointer",height:m&&t>0?a.general.heightBase:a.general.heightSm},""),children:[(0,f.Y)(i.ModelsIcon,{}),(0,f.FD)("div",{children:[u(e.flavors),m&&t>0&&(0,f.Y)(o.T.Hint,{children:e.artifactPath})]})]},e.artifactPath))),t.map(((e,t)=>{var n,o,l,d,u;return(0,f.FD)(c.N_,{to:y.Ay.getExperimentLoggedModelDetailsPageRoute(null!==s&&void 0!==s?s:"",null!==(n=null===(o=e.info)||void 0===o?void 0:o.model_id)&&void 0!==n?n:""),css:(0,r.AH)({display:"flex",alignItems:"center",gap:a.spacing.sm,cursor:"pointer",height:m&&t>0?a.general.heightBase:a.general.heightSm},""),children:[(0,f.Y)(i.ModelsIcon,{}),(0,f.Y)("div",{children:null===(u=e.info)||void 0===u?void 0:u.name})]},null!==(l=null===(d=e.info)||void 0===d?void 0:d.model_id)&&void 0!==l?l:t)}))]})};var be=n(56412),Re=n(1323);var we={name:"1wcfv52",styles:"margin-right:0"},Ce={name:"kauk44",styles:"display:flex;gap:4px;white-space:nowrap"},Ee={name:"1a7v7i3",styles:"margin-right:0;&>div{padding-right:0;}"};const ke=({runUuid:e,tags:t,search:n,className:a})=>{var s,l,d;const u=null===t||void 0===t||null===(s=t[g.xd])||void 0===s?void 0:s.value,c=null===t||void 0===t||null===(l=t[m.A.gitCommitTag])||void 0===l?void 0:l.value,p=m.A.renderSource(t,n,e,u),{theme:v}=(0,o.u)();return p?(0,f.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:v.spacing.sm,paddingTop:v.spacing.sm,paddingBottom:v.spacing.sm,flexWrap:"wrap"},""),className:a,children:[(0,f.Y)(Re.m,{sourceType:null===(d=t[m.A.sourceTypeTag])||void 0===d?void 0:d.value,css:(0,r.AH)({color:v.colors.actionPrimaryBackgroundDefault},"")}),p," ",u&&(0,f.Y)(i.LegacyTooltip,{title:u,children:(0,f.Y)(i.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48",css:we,children:(0,f.FD)("div",{css:Ce,children:[(0,f.Y)(i.BranchIcon,{})," ",u]})})}),c&&(0,f.FD)(o.ax.Root,{componentId:"mlflow.run_details.overview.source.commit_hash_popover",children:[(0,f.Y)(o.ax.Trigger,{asChild:!0,children:(0,f.Y)(i.Tag,{componentId:"mlflow.run_details.overview.source.commit_hash",css:Ee,children:(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,whiteSpace:"nowrap",alignContent:"center"},""),children:[(0,f.Y)(i.GitCommitIcon,{}),c.slice(0,7)]})})}),(0,f.FD)(o.ax.Content,{align:"start",children:[(0,f.Y)(o.ax.Arrow,{}),(0,f.FD)("div",{css:(0,r.AH)({display:"flex",gap:v.spacing.xs,alignItems:"center"},""),children:[c,(0,f.Y)(be.i,{showLabel:!1,size:"small",type:"tertiary",copyText:c,icon:(0,f.Y)(i.CopyIcon,{})})]})]})]})]}):(0,f.Y)(o.T.Hint,{children:"\u2014"})};var Ue=n(14830),Fe=n(31179),Le=n(67212);var Ne=n(38654),Pe=n(12017),Be=n(36506),He=n(30706);const Oe=[Pe.I7.RelationshipType,Pe.I7.Step,Pe.I7.Name,Pe.I7.Status,Pe.I7.CreationTime,Pe.I7.RegisteredModels,Pe.I7.Dataset];var Ve={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},ze={name:"g030ms",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center"},Ke={name:"ozd7xs",styles:"flex-shrink:0"};const We=({inputs:e,outputs:t,runInfo:n,loggedModelsV3:a,isLoadingLoggedModels:s=!1,loggedModelsError:l})=>{const{theme:u}=(0,o.u)(),{models:c}=((e,t,n,r)=>{const i=(0,d.useMemo)((()=>{var t;return(0,S.compact)((0,S.uniq)(null===e||void 0===e||null===(t=e.modelInputs)||void 0===t?void 0:t.map((e=>e.modelId)))).map((e=>{const t=null===r||void 0===r?void 0:r.find((t=>{var n;return(null===(n=t.info)||void 0===n?void 0:n.model_id)===e}));if(t)return{...t,direction:"input"}}))}),[null===e||void 0===e?void 0:e.modelInputs,r]),o=(0,d.useMemo)((()=>{var e;return(0,S.compact)((0,S.uniq)(null===t||void 0===t||null===(e=t.modelOutputs)||void 0===e?void 0:e.map((e=>e.modelId)))).map((e=>{var n,i;const o=null===r||void 0===r?void 0:r.find((t=>{var n;return(null===(n=t.info)||void 0===n?void 0:n.model_id)===e})),a=null===t||void 0===t||null===(n=t.modelOutputs)||void 0===n?void 0:n.find((({modelId:e})=>{var t;return e===(null===o||void 0===o||null===(t=o.info)||void 0===t?void 0:t.model_id)}));if(o)return{...o,direction:"output",step:null!==(i=null===a||void 0===a?void 0:a.step)&&void 0!==i?i:void 0}}))}),[null===t||void 0===t?void 0:t.modelOutputs,r]);return{models:(0,d.useMemo)((()=>{var e,t;return null!==(e=(0,S.uniqBy)((0,S.compact)([...i,...o]).map((t=null===n||void 0===n?void 0:n.runUuid,e=>{var n;return null!==(n=e.data)&&void 0!==n&&n.metrics?{...e,data:{...e.data,metrics:e.data.metrics.filter((e=>!t||e.run_id===t))}}:e})),(e=>{var t;return null===(t=e.info)||void 0===t?void 0:t.model_id})))&&void 0!==e?e:[]}),[i,o,n])}})(e,t,n,a),[m,g]=(0,d.useState)({}),{columnDefs:p}=(0,Pe.ih)({loggedModels:c,columnVisibility:m,disablePinnedColumns:!0,disableOrderBy:!0,supportedAttributeColumnKeys:Oe});return(0,f.FD)("div",{css:Ve,children:[(0,f.FD)("div",{css:ze,children:[(0,f.Y)(o.T.Title,{level:4,css:Ke,children:(0,f.Y)(M.A,{id:"km8vtM",defaultMessage:"Logged models ({length})",values:{length:c.length}})}),(0,f.Y)(He.$,{columnDefs:p,onUpdateColumns:g,columnVisibility:m,customTrigger:(0,f.Y)(o.B,{componentId:"mlflow.logged_model.list.columns",icon:(0,f.Y)(i.ColumnsIcon,{})})})]}),(0,f.Y)(N.S,{size:"sm",shrinks:!1}),(0,f.FD)("div",{css:(0,r.AH)({padding:u.spacing.sm,border:`1px solid ${u.colors.border}`,borderRadius:u.general.borderRadiusBase,display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},""),children:[l instanceof Error&&l.message&&(0,f.FD)(f.FK,{children:[(0,f.Y)(i.Alert,{type:"error",description:l.message,message:(0,f.Y)(M.A,{id:"2BzYqp",defaultMessage:"Error loading logged models"}),closable:!1,componentId:"mlflow.run_page.logged_model.list.error"}),(0,f.Y)(N.S,{size:"sm",shrinks:!1})]}),(0,f.Y)(Be.Xs,{children:(0,f.Y)(Ne._,{columnDefs:p,loggedModels:c,columnVisibility:m,isLoading:s,isLoadingMore:!1,moreResultsAvailable:!1,disableLoadMore:!0,css:$e(u),displayShowExampleButton:!1})})]})]})},$e=e=>({"&.ag-theme-balham":{"--ag-border-color":e.colors.border,"--ag-row-border-color":e.colors.border,"--ag-foreground-color":e.colors.textPrimary,"--ag-background-color":"transparent","--ag-odd-row-background-color":"transparent","--ag-row-hover-color":e.colors.actionDefaultBackgroundHover,"--ag-selected-row-background-color":e.colors.actionDefaultBackgroundPress,"--ag-header-foreground-color":e.colors.textPrimary,"--ag-header-background-color":e.colors.backgroundPrimary,"--ag-modal-overlay-background-color":e.colors.overlayOverlay,".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":e.colors.textPrimary},borderTop:0,fontSize:e.typography.fontSizeBase,".ag-center-cols-viewport":{...(0,o.E)(e,{orientation:"horizontal"})}}});var Ge=n(65287),je=n(81313);var Ze={name:"ti75j2",styles:"margin:0"};const qe=({tags:e,runInfo:t,datasets:n})=>{const[a,s]=(0,d.useState)(null),[l,u]=(0,d.useState)(!1),{theme:c}=(0,o.u)();if(!n||!n.length)return null;return(0,f.FD)(f.FK,{children:[(0,f.Y)(i.Overflow,{children:n.map((i=>(0,f.Y)(o.T.Link,{componentId:"mlflow.run_details.datasets_box.dataset_link",css:(0,r.AH)({textAlign:"left",".anticon":{fontSize:c.general.iconFontSize}},""),onClick:()=>(r=>{var i,o,a;s({datasetWithTags:r,runData:{experimentId:null!==(i=t.experimentId)&&void 0!==i?i:void 0,runUuid:null!==(o=t.runUuid)&&void 0!==o?o:"",runName:null!==(a=t.runName)&&void 0!==a?a:void 0,datasets:n,tags:e}}),u(!0)})(i),children:(0,f.Y)(te.E,{datasetWithTags:i,displayTextAsLink:!0,css:Ze})})))}),a&&(0,f.Y)(ne.O,{isOpen:l,setIsOpen:u,selectedDatasetWithRun:a,setSelectedDatasetWithRun:s})]})};var Qe=function(e){return e.DETAILS="DETAILS",e.DATASETS="DATASETS",e.TAGS="TAGS",e.REGISTERED_MODELS="REGISTERED_MODELS",e}(Qe||{});const Je=()=>(0,f.Y)(o.T.Hint,{children:"\u2014"});var Xe={name:"67z2yy",styles:"flex:1;align-self:flex-start"},et={name:"1ctdo4k",styles:"min-height:360px;max-height:760px;overflow:hidden;display:flex"};const tt=({runUuid:e,onRunDataUpdated:t,tags:n,runInfo:i,datasets:a,params:s,latestMetrics:l,runInputs:u,runOutputs:g,registeredModelVersionSummaries:p,loggedModelsV3:v=[],isLoadingLoggedModels:h=!1,loggedModelsError:Y})=>{const{theme:x}=(0,o.u)(),{usingUnifiedDetailsLayout:_}=(0,j.z)(),{search:I}=(0,c.zy)(),A=(0,L.A)(),T=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(n)),[n]),D=n[P.Ol],b=!(0,S.isEmpty)(null===u||void 0===u?void 0:u.modelInputs)||!(0,S.isEmpty)(null===g||void 0===g?void 0:g.modelOutputs),R=!(0,k.Ok)()||!b,w=(null===T||void 0===T?void 0:T.length)>0||(null===v||void 0===v?void 0:v.length)>0,{modelVersions:C}=(0,Fe.b)({loggedModels:v}),E=(0,S.uniqBy)([...p,...C],(e=>null===e||void 0===e?void 0:e.link)),U=(({runUuid:e,runInfo:t,tags:n,onTagsUpdated:i,datasets:a,shouldRenderLoggedModelsBox:s,loggedModelsV3:l,registeredModelVersionSummaries:u})=>{var g,p,v;const h=(0,L.A)(),{theme:Y}=(0,o.u)(),{search:M}=(0,c.zy)(),x=(0,d.useMemo)((()=>m.A.getLoggedModelsFromTags(n)),[n]),_=n[P.Ol],I=t&&(0,f.FD)(f.FK,{children:[(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"PP5HZf",defaultMessage:"Created at"}),value:t.startTime?m.A.formatTimestamp(t.startTime,h):(0,f.Y)(je.bw,{})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)(O,{runInfo:t,tags:n})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(Le.t,{value:null!==(g=null===t||void 0===t?void 0:t.experimentId)&&void 0!==g?g:"",element:null!==t&&void 0!==t&&t.experimentId?(0,f.Y)(c.N_,{to:y.Ay.getExperimentPageRoute(t.experimentId),children:null===t||void 0===t?void 0:t.experimentId}):void 0})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(H,{status:t.status})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(Le.t,{value:null!==(p=t.runUuid)&&void 0!==p?p:""})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(t.startTime,t.endTime)}),_&&(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(de,{parentRunUuid:_.value})}),(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(ke,{tags:n,search:M,runUuid:e,css:(0,r.AH)({paddingTop:Y.spacing.xs,paddingBottom:Y.spacing.xs},"")})}),s&&(0,f.Y)(je.wB,{keyValue:h.formatMessage({id:"mjNFJt",defaultMessage:"Logged models"}),value:(0,f.Y)(De,{runInfo:t,loggedModels:x,loggedModelsV3:l})})]});return[{id:Qe.DETAILS,title:h.formatMessage({id:"QGiy9C",defaultMessage:"About this run"}),content:I},{id:Qe.DATASETS,title:h.formatMessage({id:"yrsFOP",defaultMessage:"Datasets"}),content:null!==a&&void 0!==a&&a.length?(0,f.Y)(qe,{tags:n,runInfo:t,datasets:a}):(0,f.Y)(je.bw,{})},{id:Qe.TAGS,title:h.formatMessage({id:"arFT1W",defaultMessage:"Tags"}),content:(0,f.Y)(pe,{runUuid:null!==(v=t.runUuid)&&void 0!==v?v:"",tags:n,onTagsUpdated:i})},{id:Qe.REGISTERED_MODELS,title:h.formatMessage({id:"HnGOwk",defaultMessage:"Registered models"}),content:(null===u||void 0===u?void 0:u.length)>0?(0,f.Y)(xe,{registeredModelVersionSummaries:u}):(0,f.Y)(je.bw,{})}]})({runUuid:e,runInfo:i,tags:n,onTagsUpdated:t,datasets:a,loggedModelsV3:v,shouldRenderLoggedModelsBox:R,registeredModelVersionSummaries:E}),F=_;return(0,f.FD)(Ge.a,{css:Xe,usingSidebarLayout:F,secondarySections:U,children:[(0,f.Y)(fe,{runUuid:e,tags:n,onDescriptionChanged:t}),!F&&(0,f.FD)(f.FK,{children:[(0,f.Y)(o.T.Title,{level:4,children:(0,f.Y)(M.A,{id:"Isaf66",defaultMessage:"Details"})}),(()=>{var r,s,l;return(0,f.FD)(Ue.N,{children:[(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"PP5HZf",defaultMessage:"Created at"}),value:i.startTime?m.A.formatTimestamp(i.startTime,A):(0,f.Y)(Je,{})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"7KKvmS",defaultMessage:"Created by"}),value:(0,f.Y)(O,{runInfo:i,tags:n})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"ffema5",defaultMessage:"Experiment ID"}),value:(0,f.Y)(Le.t,{value:null!==(r=null===i||void 0===i?void 0:i.experimentId)&&void 0!==r?r:""})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"vxY1CI",defaultMessage:"Status"}),value:(0,f.Y)(H,{status:i.status})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"JYVQuV",defaultMessage:"Run ID"}),value:(0,f.Y)(Le.t,{value:null!==(s=i.runUuid)&&void 0!==s?s:""})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"ZoIjun",defaultMessage:"Duration"}),value:m.A.getDuration(i.startTime,i.endTime)}),D&&(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"zdYXP8",defaultMessage:"Parent run"}),value:(0,f.Y)(de,{parentRunUuid:D.value})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"fwp4JP",defaultMessage:"Datasets used"}),value:null!==a&&void 0!==a&&a.length?(0,f.Y)(ae,{tags:n,runInfo:i,datasets:a}):(0,f.Y)(Je,{})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"rs7Iic",defaultMessage:"Tags"}),value:(0,f.Y)(pe,{runUuid:null!==(l=i.runUuid)&&void 0!==l?l:"",tags:n,onTagsUpdated:t})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"WmDiY9",defaultMessage:"Source"}),value:(0,f.Y)(ke,{tags:n,search:I,runUuid:e})}),R&&(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"mjNFJt",defaultMessage:"Logged models"}),value:h?(0,f.Y)(o.S,{}):w?(0,f.Y)(De,{runInfo:i,loggedModels:T,loggedModelsV3:v}):(0,f.Y)(Je,{})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"BCpX6U",defaultMessage:"Registered models"}),value:(null===E||void 0===E?void 0:E.length)>0?(0,f.Y)(xe,{registeredModelVersionSummaries:E}):(0,f.Y)(Je,{})}),(0,f.Y)(Ye.Z,{title:(0,f.Y)(M.A,{id:"UCQwvo",defaultMessage:"Registered prompts"}),value:(0,f.Y)(Te,{tags:n,runUuid:e})})]})})()]}),(0,f.FD)("div",{css:[F?{flexDirection:"column"}:{minHeight:360,maxHeight:760},{display:"flex",gap:x.spacing.lg,overflow:"hidden"},""],children:[(0,f.Y)(ee,{latestMetrics:l,runInfo:i,loggedModels:v}),(0,f.Y)(V.y,{params:s})]}),(0,k.Ok)()&&b&&(0,f.FD)(f.FK,{children:[(0,f.Y)(N.S,{}),(0,f.Y)("div",{css:et,children:(0,f.Y)(We,{loggedModelsV3:v,isLoadingLoggedModels:h,inputs:u,outputs:g,runInfo:i,loggedModelsError:Y})})]}),!F&&(0,f.Y)(N.S,{})]})};var nt=n(23275),rt=n(52350),it=n(82214);function ot({runId:e}){return(0,f.Y)(it.E,{statusCode:404,subMessage:`Run ID ${e} does not exist`,fallbackHomePageReactRoute:y.Ay.rootRoute})}var at=n(47664),st=n(64558),lt=n(33946),dt=n(75627),ut=n(59397);const ct=({contextData:{metricsForRun:e},hoverData:t,chartData:{metricKey:n},isHovering:r,mode:i})=>{var a;const s=(0,dt.bL)(t)?t.hoveredDataPoint:t,l=(0,L.A)();if(i===dt.QS.MultipleTracesWithScanline&&(0,dt.bL)(t)&&r)return(0,f.Y)(ut.G,{hoverData:t});if(null===s||void 0===s||!s.metricEntity)return null;const{timestamp:d,step:u,value:c}=s.metricEntity,g=(null===e||void 0===e||null===(a=e[n])||void 0===a?void 0:a.length)>1,p=(0,W.bw)(n),v=g&&p&&!(0,S.isUndefined)(d),h=g&&!p&&!(0,S.isUndefined)(u);return(0,f.FD)("div",{children:[h&&(0,f.FD)("div",{css:mt.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(M.A,{id:"a02Pn6",defaultMessage:"Step"}),":"]})," ",u]}),v&&(0,f.FD)("div",{css:mt.valueField,children:[(0,f.FD)("strong",{children:[(0,f.Y)(M.A,{id:"faLIN+",defaultMessage:"Timestamp"}),":"]})," ",m.A.formatTimestamp(d,l)]}),c&&(0,f.FD)("div",{children:[(0,f.Y)(o.T.Text,{bold:!0,children:n}),(0,f.Y)(N.S,{size:"xs"}),(0,f.Y)(o.T.Text,{children:c})]})]})},mt={valueField:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}};var gt=n(30152),pt=n(36118),vt=n(39045),ht=n(19415),ft=n(62758),Yt=n(32614),Mt=n(63617),xt=n(4972),yt=n(55999),_t=n(688),It=n(71932),At=n(40029);var St={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"},Tt={name:"1tc6xju",styles:"flex:1;overflow:auto"};const Dt=({runInfo:e,metricKeys:t,mode:n,chartUIState:s,updateChartsUIState:l,latestMetrics:u={},params:c={},tags:m={}})=>{var p;const{theme:v}=(0,o.u)(),[h,Y]=(0,d.useState)(""),{formatMessage:M}=(0,L.A)(),{compareRunCharts:x,compareRunSections:y,chartsSearchFilter:_}=s,I=(0,d.useMemo)((()=>{var e;return null!==(e=null===x||void 0===x?void 0:x.filter((e=>!e.deleted)))&&void 0!==e?e:[]}),[x]),[A,T]=(0,d.useState)(void 0),D=(0,a.d4)((({entities:t})=>{var n;return(0,S.mapValues)(t.sampledMetricsByRunUuid[null!==(n=e.runUuid)&&void 0!==n?n:""],(e=>(0,S.compact)((0,S.values)(e).map((({metricsHistory:e})=>e)).flat())))})),b=(0,d.useMemo)((()=>({runInfo:e,metricsForRun:D})),[e,D]),{imagesByRunUuid:R}=(0,a.d4)((e=>({imagesByRunUuid:e.entities.imagesByRunUuid}))),[w,C]=(0,d.useState)(null),E=(0,ft.iO)(),U=(0,ft.cA)(),F=(0,ft.KP)(),N=(0,ft.Ez)(),P=(0,d.useMemo)((()=>{var t,n,r;return[{displayName:null!==(t=e.runName)&&void 0!==t?t:"",metrics:u,params:c,tags:m,images:R[null!==(n=e.runUuid)&&void 0!==n?n:""]||{},metricHistory:{},uuid:null!==(r=e.runUuid)&&void 0!==r?r:"",color:v.colors.primary,runInfo:e}]}),[e,u,c,m,R,v]);(0,d.useEffect)((()=>{if((!y||!x)&&P.length>0){const{resultChartSet:e,resultSectionSet:t}=gt.i$.getBaseChartAndSectionConfigs({runsData:P,enabledSectionNames:["model"===n?g.NN:g.rx],filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===n?!t:t}});l((n=>({...n,compareRunCharts:e,compareRunSections:t})))}}),[x,y,P,n,l]),(0,d.useEffect)((()=>{l((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:r,isResultUpdated:i}=gt.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:P,isAccordionReordered:e.isAccordionReordered,filterMetricNames:e=>{const t=e.startsWith(g.qt);return"model"===n?!t:t}});return i?{...e,compareRunCharts:t,compareRunSections:r}:e}))}),[P,l,n]);const B=(0,xt.$)(),H=s.autoRefreshEnabled&&(0,k.vC)()&&B,O=Boolean(m[g.Cr]);return(0,yt.L)({runUuids:[null!==(p=e.runUuid)&&void 0!==p?p:""],runUuidsIsActive:["RUNNING"===e.status],autoRefreshEnabled:H,enabled:O}),(0,f.FD)("div",{css:St,children:[(0,f.FD)("div",{css:(0,r.AH)({paddingBottom:v.spacing.md,display:"flex",gap:v.spacing.sm,flex:"0 0 auto"},""),children:[(0,f.Y)(At.I,{chartsSearchFilter:_}),(0,k.vC)()&&(0,f.Y)(i.ToggleButton,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244",pressed:s.autoRefreshEnabled,onPressedChange:e=>{l((t=>({...t,autoRefreshEnabled:e})))},children:M({id:"zC/uKl",defaultMessage:"Auto-refresh"})}),(0,f.Y)(_t.f,{metricKeyList:t,globalLineChartConfig:s.globalLineChartConfig,updateUIState:l})]}),(0,f.Y)("div",{css:Tt,children:(0,f.Y)(dt.W,{contextData:b,component:ct,children:(0,f.Y)(It.c_,{visibleChartCards:I,children:(0,f.Y)(vt.J,{compareRunSections:y,compareRunCharts:I,reorderCharts:E,insertCharts:U,chartData:P,startEditChart:e=>C(e),removeChart:F,addNewChartCard:e=>t=>C(gt.i$.getEmptyChartCardByType(t,!1,void 0,e)),search:null!==_&&void 0!==_?_:"",supportedChartTypes:[gt.zL.LINE,gt.zL.BAR,gt.zL.IMAGE],setFullScreenChart:T,autoRefreshEnabled:H,globalLineChartConfig:s.globalLineChartConfig,groupBy:null})})})}),w&&(0,f.Y)(ht.z,{chartRunData:P,metricKeyList:t,paramKeyList:[],config:w,onSubmit:e=>{N(e),C(null)},onCancel:()=>C(null),groupBy:null,supportedChartTypes:[gt.zL.LINE,gt.zL.BAR,gt.zL.IMAGE],globalLineChartConfig:s.globalLineChartConfig}),(0,f.Y)(Mt._,{fullScreenChart:A,onCancel:()=>T(void 0),chartData:P,tooltipContextValue:b,tooltipComponent:ct,autoRefreshEnabled:H,groupBy:null})]})},bt=e=>{const t=`${e.runInfo.runUuid}-${e.mode}`,n=(0,d.useMemo)((()=>Yt.A.getStoreForComponent("RunPage",t)),[t]),[r,i]=(0,d.useState)((()=>{const e={isAccordionReordered:!1,compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:(0,k.vC)(),globalLineChartConfig:{xAxisKey:pt.fj.STEP,lineSmoothness:0,selectedXAxisMetricKey:""}};try{const t=n.getItem("chartUIState");return t?JSON.parse(t):e}catch{return e}}));return(0,d.useEffect)((()=>{n.setItem("chartUIState",JSON.stringify(r))}),[r,n]),(0,f.Y)(ft.oB,{updateChartsUIState:i,children:(0,f.Y)(Dt,{...e,chartUIState:r,updateChartsUIState:i})})};var Rt=n(83946);const wt=[n(80171).se.runName];var Ct={name:"fxp7t8",styles:"flex:1;min-width:0"};const Et=({experimentId:e,runUuid:t})=>{const n=(0,d.useMemo)((()=>[e]),[e]);return(0,f.Y)("div",{css:Ct,children:(0,f.Y)(Rt.O,{experimentIds:n,runUuid:t,disabledColumns:wt})})};var kt=n(26626),Ut=n(63609);var Ft=n(72661);const Lt=()=>(0,f.FD)(u.L,{children:[(0,f.Y)(i.TitleSkeleton,{loading:!0,label:(0,f.Y)(M.A,{id:"ea5zBl",defaultMessage:"Run page loading"})}),[...Array(3).keys()].map((e=>(0,f.Y)(i.ParagraphSkeleton,{seed:`s-${e}`},e)))]}),Nt=()=>{var e,t;const{runUuid:n,experimentId:s}=(0,c.g)(),v=(0,c.Zp)(),{theme:x}=(0,o.u)(),[I,A]=(0,d.useState)(!1),[T,D]=(0,d.useState)(!1);l()(n,"[RunPage] Run UUID route param not provided"),l()(s,"[RunPage] Experiment ID route param not provided");const{experiment:b,error:R,latestMetrics:w,loading:C,params:E,refetchRun:U,runInfo:L,tags:N,experimentFetchError:P,runFetchError:B,apiError:H,datasets:O,runInputs:V,runOutputs:z,registeredModelVersionSummaries:K}=(0,nt.g)({experimentId:s,runUuid:n}),[$,G]=(0,d.useMemo)((()=>w?[Object.keys(w).filter((e=>!(0,W.bw)(e))),Object.keys(w).filter((e=>(0,W.bw)(e)))]:[[],[]]),[w]),{comparedExperimentIds:j=[],hasComparedExperimentsBefore:Z=!1}=(0,a.d4)((e=>e.comparedExperiments||{})),q=_(),Q=(0,k.ht)(),J=((e,t,n,r,i=!0)=>{const o=(0,d.useMemo)((()=>{var e,t;const i=[...null!==(e=null===n||void 0===n?void 0:n.modelInputs)&&void 0!==e?e:[],...null!==(t=null===r||void 0===r?void 0:r.modelOutputs)&&void 0!==t?t:[]],o=(0,S.uniq)((0,S.compact)(i.map((({modelId:e})=>e))));if(!(0,S.isEmpty)(o))return`attributes.model_id IN (${o.map((e=>`'${e}'`)).join(",")})`}),[n,r]),a=i&&Boolean(o),{data:s,isLoading:l,error:u}=(0,Ut.e)({experimentIds:[e],searchQuery:o},{enabled:a});return{models:a?s:void 0,isLoading:a&&l,error:u}})(s,0,V,z,!Q),X=(({runInputs:e,runOutputs:t,enabled:n=!0})=>{const r=(0,d.useMemo)((()=>{var n,r;const i=[...null!==(n=null===e||void 0===e?void 0:e.modelInputs)&&void 0!==n?n:[],...null!==(r=null===t||void 0===t?void 0:t.modelOutputs)&&void 0!==r?r:[]],o=(0,S.uniq)((0,S.compact)(i.map((({modelId:e})=>e))));if(!(0,S.isEmpty)(o))return o}),[e,t]),i=n&&!(0,S.isEmpty)(r),{data:o,isLoading:a,error:s}=(0,Ft.o)({modelIds:r},{enabled:i});return{models:o,isLoading:i&&a,error:s}})({runInputs:V,runOutputs:z,enabled:Q}),{error:ee,isLoading:te,models:ne}=Q?X:J,re=(0,h.Ub)(`(min-width: ${x.responsive.breakpoints.sm}px)`),ie=C&&(!L||!b);return B instanceof rt.s&&B.getErrorCode()===at.tG.RESOURCE_DOES_NOT_EXIST||(null===H||void 0===H?void 0:H.code)===at.tG.RESOURCE_DOES_NOT_EXIST||R&&(0,kt.b)(R).match(/not found$/)?(0,f.Y)(ot,{runId:n}):P instanceof rt.s&&P.getErrorCode()===at.tG.RESOURCE_DOES_NOT_EXIST?(0,f.Y)(st.A,{}):B||P?null:(0,k.wD)()&&(R||H)?(0,f.Y)("div",{css:(0,r.AH)({marginTop:x.spacing.lg},""),children:(0,f.Y)(i.Empty,{title:(0,f.Y)(M.A,{id:"XaC3qF",defaultMessage:"Can't load run details"}),description:(0,kt.b)(null!==H&&void 0!==H?H:R),image:(0,f.Y)(o.l,{})})}):!ie&&L&&b?(0,f.FD)(f.FK,{children:[(0,f.FD)(u.L,{usesFullHeight:re,children:[(0,f.Y)(F,{comparedExperimentIds:j,experiment:b,handleRenameRunClick:()=>A(!0),handleDeleteRunClick:()=>D(!0),hasComparedExperimentsBefore:Z,runDisplayName:m.A.getRunDisplayName(L,n),runTags:N,runParams:E,runUuid:n,artifactRootUri:null!==(e=null===L||void 0===L?void 0:L.artifactUri)&&void 0!==e?e:void 0,registeredModelVersionSummaries:K,isLoading:C||te}),(0,f.Y)("div",{css:(0,r.AH)({flex:1,overflow:"auto",marginBottom:x.spacing.sm,display:"flex"},""),children:(()=>{var e;if(!L)return null;switch(q){case g.N3.MODEL_METRIC_CHARTS:return(0,f.Y)(bt,{mode:"model",metricKeys:$,runInfo:L,latestMetrics:w,tags:N,params:E},"model");case g.N3.SYSTEM_METRIC_CHARTS:return(0,f.Y)(bt,{mode:"system",metricKeys:G,runInfo:L,latestMetrics:w,tags:N,params:E},"system");case g.N3.ARTIFACTS:return(0,f.Y)(Y,{runUuid:n,runTags:N,runOutputs:z,experimentId:s,artifactUri:null!==(e=L.artifactUri)&&void 0!==e?e:void 0});case g.N3.TRACES:return(0,f.Y)(Et,{runUuid:n,runTags:N,experimentId:s})}return(0,f.Y)(tt,{runInfo:L,tags:N,params:E,latestMetrics:w,runUuid:n,onRunDataUpdated:U,runInputs:V,runOutputs:z,datasets:O,registeredModelVersionSummaries:K,loggedModelsV3:ne,isLoadingLoggedModels:te,loggedModelsError:null!==ee&&void 0!==ee?ee:void 0})})()})]}),(0,f.Y)(p.j,{runUuid:n,onClose:()=>A(!1),runName:null!==(t=L.runName)&&void 0!==t?t:"",isOpen:I,onSuccess:U}),(0,f.Y)(lt.A,{selectedRunIds:[n],onClose:()=>D(!1),isOpen:T,onSuccess:()=>{v(y.Ay.getExperimentPageRoute(s))}})]}):(0,f.Y)(Lt,{})};var Pt=Nt},26626:function(e,t,n){n.d(t,{b:function(){return i}});var r=n(92283);const i=e=>{if(e)return e instanceof r.K4&&e.graphQLErrors.length>0?e.graphQLErrors.map((e=>e.toString())).join(", "):"message"in e?e.message:e.toString()}},48588:function(e,t,n){n.d(t,{L:function(){return a}});n(31014);var r=n(37523),i=n(6958),o=n(50111);function a(e){const{usesFullHeight:t,...n}=e;return(0,o.FD)(r.PageWrapper,{css:t?s.useFullHeightLayout:s.wrapper,children:[(0,o.Y)(i.S,{css:s.fixedSpacer}),t?e.children:(0,o.Y)("div",{...n,css:s.container})]})}a.defaultProps={usesFullHeight:!1};const s={useFullHeightLayout:{height:"100%",display:"flex",flexDirection:"column","&:last-child":{flexGrow:1}},wrapper:{flex:1},fixedSpacer:{flexShrink:0},container:{width:"100%",flexGrow:1,paddingBottom:24}}},64558:function(e,t,n){var r=n(31014),i=n(50111);class o extends r.Component{render(){return(0,i.Y)("div",{children:"Resource not found."})}}t.A=o}}]);
//# sourceMappingURL=9513.50df1031.chunk.js.map