"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4588],{54588:function(e,o,t){t.r(o),t.d(o,{default:function(){return fe}});var r=t(89555),a=t(13062),n=t(6958),i=t(37523),l=t(4877),s=t.n(l),d=t(93215),c=t(92246),u=t(91144),m=t(31014),g=t(38654),p=t(63609),h=t(88464),f=t(88443),v=t(30706),y=t(81313);let C=function(e){return e.TABLE="TABLE",e.CHART="CHART",e}({});const D="viewMode";var b=t(3679),M=t(96070),S=t(98590),w=t(50111);const Y=["model_id","model_name","status","artifact_uri","creation_time","last_updated_time"],A=({searchQuery:e,onChangeSearchQuery:o,loggedModelsData:t})=>{const r=(0,m.useMemo)((()=>{const e=(e=>{const o=new Set,t=new Set,r=new Set;for(const c of e){var a,n,i,l,s,d;null===(a=c.data)||void 0===a||null===(n=a.metrics)||void 0===n||n.forEach((e=>e.key&&o.add(e.key))),null===(i=c.data)||void 0===i||null===(l=i.params)||void 0===l||l.forEach((e=>e.key&&t.add(e.key))),null===(s=c.info)||void 0===s||null===(d=s.tags)||void 0===d||d.forEach((e=>e.key&&r.add(e.key)))}return{metricNames:Array.from(o),paramNames:Array.from(t),tagNames:Array.from(r).filter(S.oD)}})(t),o=Y.map((e=>({value:`attributes.${e}`})));return(0,M.$K)(e,o)}),[t]);return(0,w.Y)(b.M,{searchFilter:null!==e&&void 0!==e?e:"",onSearchFilterChange:o,defaultActiveFirstOption:!1,baseOptions:r,onClear:()=>o(""),placeholder:"metrics.rmse >= 0.8",tooltipContent:(0,w.FD)("div",{children:[(0,w.Y)(f.A,{id:"8f4/Zi",defaultMessage:"Search logged models using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,w.Y)("b",{children:"WHERE"})}})," ",(0,w.Y)("br",{}),(0,w.Y)(f.A,{id:"fyVs2o",defaultMessage:"Examples:"}),(0,w.Y)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,w.Y)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,w.Y)("br",{}),"\u2022 params.type = 'tree'",(0,w.Y)("br",{}),"\u2022 tags.my_tag = 'foobar'",(0,w.Y)("br",{}),"\u2022 attributes.name = 'elasticnet'",(0,w.Y)("br",{})]})})};var R=t(40553);const _=e=>JSON.stringify([e.dataset_name,e.dataset_digest]);var B={name:"158icaa",styles:"margin-left:4px"};const I=({loggedModelsData:e,selectedFilterDatasets:o,onToggleDataset:t,onClearSelectedDatasets:n})=>{const{theme:l}=(0,a.u)(),s=(0,h.A)(),d=(0,m.useRef)(new Map),c=(0,m.useMemo)((()=>{for(const t of e)for(const e of(null===(o=t.data)||void 0===o?void 0:o.metrics)||[]){var o;if(!e.dataset_name||!e.dataset_digest)continue;const t=_(e);d.current.has(t)||d.current.set(t,{hash:t,dataset_name:e.dataset_name,dataset_digest:e.dataset_digest})}return Array.from(d.current.values())}),[e]),u=(0,m.useMemo)((()=>(null===o||void 0===o?void 0:o.map(_))||[]),[o]);return(0,w.FD)(i.DialogCombobox,{componentId:"mlflow.logged_model.list_page.datasets_filter",id:"mlflow.logged_model.list_page.datasets_filter",value:u,label:s.formatMessage({id:"K8JcAN",defaultMessage:"Datasets"}),stayOpenOnSelection:!0,children:[(0,w.Y)(i.DialogComboboxCustomButtonTriggerWrapper,{children:(0,w.FD)(a.B,{endIcon:(0,w.Y)(i.ChevronDownIcon,{}),componentId:"mlflow.logged_model.list_page.datasets_filter.toggle",icon:(0,w.Y)(i.TableIcon,{}),children:["Datasets",u.length>0?(0,w.FD)(w.FK,{children:[(0,w.Y)(i.DialogComboboxCountBadge,{css:B,children:u.length}),(0,w.Y)(R.X,{"aria-hidden":"false",role:"button",onClick:e=>{e.stopPropagation(),e.preventDefault(),null===n||void 0===n||n()},css:(0,r.AH)({color:l.colors.textPlaceholder,fontSize:l.typography.fontSizeSm,marginLeft:l.spacing.xs,":hover":{color:l.colors.actionTertiaryTextHover}},"")})]}):null]})}),(0,w.Y)(i.DialogComboboxContent,{children:(0,w.Y)(i.DialogComboboxOptionList,{children:c.map((({hash:e,dataset_digest:o,dataset_name:r})=>(0,w.FD)(i.DialogComboboxOptionListCheckboxItem,{value:e,checked:u.includes(e),onChange:()=>null===t||void 0===t?void 0:t({dataset_digest:o,dataset_name:r}),children:[r," (#",o,")"]},e)))})})]})};var F=t(69526),T=t(14343),x=t(12017);const k=(e,o)=>{const t={[x.I7.CreationTime]:(0,F.zR)({id:"ltqNpe",defaultMessage:"Creation time"})}[e];if(t)return o.formatMessage(t);const r=(0,x.TQ)(e);return r?r.metricKey:e};var E={name:"bsla3r",styles:"max-height:300px;overflow:auto"};const L=({orderByColumn:e,orderByAsc:o,onChangeOrderBy:t,columnDefs:n=[]})=>{const l=(0,h.A)(),[s,d]=(0,m.useState)(""),{theme:c}=(0,a.u)(),u=(0,m.useMemo)((()=>{const o=s.toLowerCase(),t=[{groupId:"attributes",headerName:l.formatMessage({id:"Tpj2su",defaultMessage:"Attributes"}),children:[{colId:x.I7.CreationTime,headerName:k(x.I7.CreationTime,l)}].filter((({headerName:e})=>null===e||void 0===e?void 0:e.toLowerCase().includes(o)))},...n.filter((e=>{var o;return null===(o=e.groupId)||void 0===o?void 0:o.startsWith(x.D2)})).map((e=>{var t;return{...e,children:null===(t=e.children)||void 0===t?void 0:t.filter((({colId:e})=>null===e||void 0===e?void 0:e.includes(o))),headerName:e.headerName?`Metrics (${e.headerName})`:l.formatMessage({id:"EcjcgN",defaultMessage:"Metrics"})}}))].filter((e=>e.children&&e.children.length>0));if(!t.some((o=>o.children&&o.children.some((o=>o.colId===e))))){const{metricKey:o}=(0,x.TQ)(e);o&&t.push({groupId:"current",headerName:l.formatMessage({id:"1wfVV5",defaultMessage:"Currently sorted by"}),children:[{colId:e,headerName:o}]})}return t}),[n,l,s,e]);return(0,w.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,w.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{componentId:"mlflow.logged_model.list.order_by",icon:o?(0,w.Y)(i.SortAscendingIcon,{}):(0,w.Y)(i.SortDescendingIcon,{}),children:(0,w.Y)(f.A,{id:"YRBURU",defaultMessage:"Sort: {sortBy}",values:{sortBy:k(e,l)}})})}),(0,w.FD)(i.DropdownMenu.Content,{css:E,children:[(0,w.FD)("div",{css:(0,r.AH)({padding:`${c.spacing.sm}px ${c.spacing.lg/2}px ${c.spacing.sm}px`,width:"100%",display:"flex",gap:c.spacing.xs},""),children:[(0,w.Y)(R.I,{componentId:"mlflow.logged_model.list.order_by.filter",prefix:(0,w.Y)(R.S,{}),value:s,type:"search",onChange:e=>d(e.target.value),placeholder:l.formatMessage({id:"PRwcGm",defaultMessage:"Search"}),autoFocus:!0,allowClear:!0}),(0,w.FD)("div",{css:(0,r.AH)({display:"flex",gap:c.spacing.xs},""),children:[(0,w.Y)(T.k,{pressed:!o,icon:(0,w.Y)(i.ArrowDownIcon,{}),componentId:"mlflow.logged_model.list.order_by.button_desc",onClick:()=>t(e,!1),"aria-label":l.formatMessage({id:"w/sljb",defaultMessage:"Sort descending"})}),(0,w.Y)(T.k,{pressed:o,icon:(0,w.Y)(i.ArrowUpIcon,{}),componentId:"mlflow.logged_model.list.order_by.button_asc",onClick:()=>t(e,!0),"aria-label":l.formatMessage({id:"E4eALP",defaultMessage:"Sort ascending"})})]})]}),u.map((({headerName:r,children:a,groupId:n})=>(0,w.FD)(i.DropdownMenu.Group,{"aria-label":r,children:[(0,w.Y)(i.DropdownMenu.Label,{children:r}),null===a||void 0===a?void 0:a.map((({headerName:r,colId:a})=>(0,w.FD)(i.DropdownMenu.CheckboxItem,{componentId:"mlflow.logged_model.list.order_by.column_toggle",checked:e===a,onClick:()=>{a&&t(a,Boolean(o))},children:[(0,w.Y)(i.DropdownMenu.ItemIndicator,{}),r]},a)))]},n)))]})]})};var N=t(31926);const K={[N.q_.RUNS]:(0,F.zR)({id:"zfpA2q",defaultMessage:"Source run"})},O=({groupBy:e,onChangeGroupBy:o})=>{const t=e?K[e]:null;return(0,w.FD)(i.DropdownMenu.Root,{children:[(0,w.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,w.Y)(a.B,{componentId:"mlflow.logged_model.list.group_by",icon:(0,w.Y)(i.ListBorderIcon,{}),endIcon:(0,w.Y)(i.ChevronDownIcon,{}),children:t?(0,w.Y)(f.A,{id:"bSpjqT",defaultMessage:"Group by: {currentModeSelected}",values:{currentModeSelected:(0,w.Y)(f.A,{...t})}}):(0,w.Y)(f.A,{id:"g+YDB/",defaultMessage:"Group by"})})}),(0,w.FD)(i.DropdownMenu.Content,{children:[(0,w.FD)(i.DropdownMenu.CheckboxItem,{checked:!e,componentId:"mlflow.logged_model.list.group_by.none",onClick:()=>null===o||void 0===o?void 0:o(void 0),children:[(0,w.Y)(i.DropdownMenu.ItemIndicator,{}),(0,w.Y)(f.A,{id:"sOQcFW",defaultMessage:"None"})]}),(0,w.FD)(i.DropdownMenu.CheckboxItem,{checked:e===N.q_.RUNS,componentId:"mlflow.logged_model.list.group_by.runs",onClick:()=>null===o||void 0===o?void 0:o(N.q_.RUNS),children:[(0,w.Y)(i.DropdownMenu.ItemIndicator,{}),(0,w.Y)(f.A,{...K[N.q_.RUNS]})]})]})]})},U=({orderByColumn:e,orderByAsc:o,sortingAndFilteringEnabled:t,onChangeOrderBy:l,onUpdateColumns:s,columnDefs:d,columnVisibility:c={},viewMode:m,setViewMode:g,searchQuery:p="",onChangeSearchQuery:D,loggedModelsData:b,selectedFilterDatasets:M,onToggleDataset:S,onClearSelectedDatasets:Y,groupBy:R,onChangeGroupBy:_})=>{const B=(0,h.A)(),{theme:F}=(0,a.u)();return(0,w.FD)("div",{css:(0,r.AH)({display:"flex",flexWrap:"wrap",gap:F.spacing.sm},""),children:[(0,w.FD)(i.SegmentedControlGroup,{componentId:"mlflow.logged_model.list.view-mode",name:"view-mode",value:m,onChange:e=>{g((0,y.SK)(C,e.target.value,C.TABLE))},children:[(0,w.FD)(i.SegmentedControlButton,{value:"TABLE",children:[(0,w.Y)(n.T,{componentId:"mlflow.logged_model.list.view-mode-table-tooltip",content:B.formatMessage({id:"F9Aau+",defaultMessage:"Table view"}),children:(0,w.Y)(n.L,{})}),(0,w.Y)("span",{css:a.O,children:B.formatMessage({id:"F9Aau+",defaultMessage:"Table view"})})]}),(0,w.FD)(i.SegmentedControlButton,{value:"CHART",children:[(0,w.Y)(n.T,{componentId:"mlflow.logged_model.list.view-mode-chart-tooltip",content:B.formatMessage({id:"44XPr5",defaultMessage:"Chart view"}),children:(0,w.Y)(i.ChartLineIcon,{})}),(0,w.Y)("span",{css:a.O,children:B.formatMessage({id:"44XPr5",defaultMessage:"Chart view"})})]})]}),t?(0,w.FD)(w.FK,{children:[(0,w.Y)(A,{searchQuery:p,onChangeSearchQuery:D,loggedModelsData:b}),(0,w.Y)(I,{loggedModelsData:b,onToggleDataset:S,onClearSelectedDatasets:Y,selectedFilterDatasets:M}),(0,w.Y)(L,{orderByColumn:null!==e&&void 0!==e?e:"",orderByAsc:o,onChangeOrderBy:l,columnDefs:d})]}):(0,w.Y)(a.B,{componentId:"mlflow.logged_model.list.sort",icon:o?(0,w.Y)(i.SortAscendingIcon,{}):(0,w.Y)(i.SortDescendingIcon,{}),onClick:()=>{e&&l(e,!o)},children:(0,w.Y)(f.A,{id:"eDoQXM",defaultMessage:"Sort: Created"})}),(0,w.Y)(v.$,{columnDefs:d,columnVisibility:c,onUpdateColumns:s,disabled:m===C.CHART}),(0,u.O6)()&&(0,w.Y)(O,{groupBy:R,onChangeGroupBy:_})]})};var V=t(36506),H=t(31798),$=t(88311),q=t(42550),z=t(9133),P=t(71932),Q=t(63617),W=t(73150),G=t(39045),X=t(75627),j=t(62758),J=t(30152),Z=t(54346),ee=t(88421);const oe=(e,o)=>o?JSON.stringify([o,e]):null!==e&&void 0!==e?e:"",te=(e,o=1)=>`experiment-logged-models-charts-ui-state-v${o}-${e}`,re=()=>({compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:!1,isAccordionReordered:!1,chartsSearchFilter:"",globalLineChartConfig:void 0,isDirty:!1}),ae=(e,o)=>{if("UPDATE"===o.type)return{...o.stateSetter(e),isDirty:!0};if("METRICS_UPDATED"===o.type){const{compareRunCharts:t,compareRunSections:r}=(e=>{const o=e.map((({dataAccessKey:e,metricKey:o,datasetName:t})=>({deleted:!1,type:J.zL.BAR,uuid:`autogen-${e}`,metricSectionId:t?`autogen-${t}`:"default",isGenerated:!0,metricKey:o,dataAccessKey:e,datasetName:t,displayName:t?`(${t}) ${o}`:void 0}))),t=(0,z.uniq)(e.map((({datasetName:e})=>e))).map((e=>({display:!0,name:null!==e&&void 0!==e?e:"Metrics",uuid:e?`autogen-${e}`:"default",isReordered:!1})));return(0,z.isEmpty)(t)&&t.push({display:!0,name:"Metrics",uuid:"default",isReordered:!1}),{compareRunCharts:o,compareRunSections:t}})(o.metricsByDatasets);return((e,o)=>{var t,r;if((!e.compareRunCharts||!e.compareRunSections||!e.isDirty)&&(o.compareRunCharts.length>0||o.compareRunSections.length>0))return{...e,compareRunCharts:null!==(t=o.compareRunCharts)&&void 0!==t?t:[],compareRunSections:null!==(r=o.compareRunSections)&&void 0!==r?r:[]};const a=o.compareRunCharts.filter((o=>{var t;return!(null!==(t=e.compareRunCharts)&&void 0!==t&&t.find((e=>e.uuid===o.uuid)))})),n=o.compareRunSections.filter((o=>{var t;return a.find((e=>e.metricSectionId===o.uuid))&&!(null!==(t=e.compareRunSections)&&void 0!==t&&t.find((e=>e.uuid===o.uuid)))}));return n.length>0||a.length>0?{...e,compareRunCharts:e.compareRunCharts?[...e.compareRunCharts,...a]:o.compareRunCharts,compareRunSections:e.compareRunSections?[...e.compareRunSections,...n]:o.compareRunSections}:e})(e,{compareRunCharts:t,compareRunSections:r})}return"INITIALIZE"===o.type&&o.initialConfig?o.initialConfig:e},ne=(e,o)=>{const[t,r]=(0,m.useReducer)(ae,void 0,re),[a,n]=(0,m.useState)(!0);(0,m.useEffect)((()=>{n(!0),(async e=>{const o=localStorage.getItem(te(e));if(o)try{return JSON.parse(o)}catch{return}})(o).then((e=>{r({type:"INITIALIZE",initialConfig:e}),n(!1)}))}),[o]),(0,m.useEffect)((()=>{a||r({type:"METRICS_UPDATED",metricsByDatasets:e})}),[e,a]),(0,m.useEffect)((()=>{t.isDirty&&(async(e,o)=>{localStorage.setItem(te(e),JSON.stringify(o))})(o,t)}),[o,t]);const i=(0,m.useCallback)((e=>r({type:"UPDATE",stateSetter:e})),[]);return{chartUIState:t,updateUIState:i,loading:a}};var ie=t(19415),le=t(58481);var se={name:"1qmr6ab",styles:"overflow:auto"};const de=(0,m.memo)((({chartData:e,uiState:o,metricKeysByDataset:t,minWidth:n})=>{var l,s;const{theme:d}=(0,a.u)(),{formatMessage:c}=(0,h.A)(),u=(0,m.useMemo)((()=>(0,z.uniq)(e.flatMap((e=>Object.keys(e.metrics))))),[e]),g=(0,m.useMemo)((()=>(0,z.uniq)(e.flatMap((e=>Object.keys(e.params))))),[e]),p=(0,j.g_)(),v=(0,m.useCallback)((e=>{p((o=>({...o,chartsSearchFilter:e})))}),[p]),[y,C]=(0,m.useState)(null),D=(0,m.useCallback)((e=>o=>C(J.i$.getEmptyChartCardByType(o,!1,void 0,e))),[]),b=(0,j.Ez)(),M=(0,j.KP)(),[S,Y]=(0,m.useState)(void 0),A=(0,m.useMemo)((()=>({runs:e})),[e]),_=(0,m.useMemo)((()=>({runs:e,getDataTraceLink:le.Ay.getExperimentLoggedModelDetailsPageRoute})),[e]),B=(0,w.Y)("div",{css:(0,r.AH)({marginTop:d.spacing.lg},""),children:(0,w.Y)(i.Empty,{description:(0,w.Y)(f.A,{id:"oKgZFA",defaultMessage:"No models found in experiment or all models are hidden. Select at least one model to view charts."})})});return(0,w.Y)("div",{css:(0,r.AH)({backgroundColor:d.colors.backgroundPrimary,paddingLeft:d.spacing.md,paddingRight:d.spacing.md,paddingBottom:d.spacing.md,borderTop:`1px solid ${d.colors.border}`,borderLeft:`1px solid ${d.colors.border}`,flex:1,overflow:"hidden",display:"flex",minWidth:n},""),children:(0,w.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",gap:d.spacing.sm,paddingTop:d.spacing.sm,overflow:"hidden",flex:1},""),children:[(0,w.Y)(R.I,{componentId:"mlflow.logged_model.list.charts.search",role:"searchbox",prefix:(0,w.Y)(R.S,{}),value:null!==(l=o.chartsSearchFilter)&&void 0!==l?l:"",allowClear:!0,onChange:({target:e})=>v(e.value),placeholder:c({id:"7teFL4",defaultMessage:"Search metric charts"})}),(0,w.FD)("div",{css:se,children:[(0,w.Y)(X.W,{contextData:_,component:W.X,children:(0,w.Y)(P.c_,{visibleChartCards:o.compareRunCharts,children:(0,w.Y)(G.J,{compareRunSections:o.compareRunSections,compareRunCharts:o.compareRunCharts,reorderCharts:z.noop,insertCharts:z.noop,chartData:e,startEditChart:C,removeChart:M,addNewChartCard:D,search:null!==(s=o.chartsSearchFilter)&&void 0!==s?s:"",groupBy:null,setFullScreenChart:Y,autoRefreshEnabled:!1,hideEmptyCharts:!1,globalLineChartConfig:void 0,supportedChartTypes:[J.zL.BAR,J.zL.SCATTER],noRunsSelectedEmptyState:B})})}),(0,w.Y)(Q._,{fullScreenChart:S,onCancel:()=>Y(void 0),chartData:e,groupBy:null,tooltipContextValue:A,tooltipComponent:W.X,autoRefreshEnabled:!1,globalLineChartConfig:void 0}),y&&(0,w.Y)(ie.z,{chartRunData:e,metricKeyList:u,metricKeysByDataset:t,paramKeyList:g,config:y,onSubmit:e=>{b({...e,displayName:void 0}),C(null)},onCancel:()=>C(null),groupBy:null,supportedChartTypes:[J.zL.BAR,J.zL.SCATTER]})]})]})})})),ce=(0,m.memo)((({loggedModels:e,experimentId:o,minWidth:t})=>{const{theme:n}=(0,a.u)(),i=((e,o)=>{const t=(0,m.useRef)();return t.current&&(0,z.isEqual)(o,t.current.deps)||(t.current={deps:o,value:e()}),t.current.value})((()=>e),[e]),l=(e=>(0,m.useMemo)((()=>{const o=[];return e.forEach((e=>{var t,r;null===(t=e.data)||void 0===t||null===(r=t.metrics)||void 0===r||r.forEach((({key:e,dataset_name:t})=>{if(e&&!o.find((o=>o.metricKey===e&&o.datasetName===t))){const r=oe(e,t);o.push({metricKey:e,datasetName:t,dataAccessKey:r})}}))})),(0,z.orderBy)(o,(({datasetName:e})=>!e))}),[e]))(i),{chartUIState:s,updateUIState:d,loading:c}=ne(l,o),u=(e=>{const{isRowHidden:o}=(0,ee.GP)();return(0,m.useMemo)((()=>(0,z.compact)(e.map(((e,t)=>{var r,a,n,i,l,s,d,c,u,m;return null!==(r=e.info)&&void 0!==r&&r.model_id?{displayName:null!==(a=null!==(n=null===(i=e.info)||void 0===i?void 0:i.name)&&void 0!==n?n:null===(l=e.info)||void 0===l?void 0:l.model_id)&&void 0!==a?a:"Unknown",images:{},metrics:(0,z.keyBy)(null===(s=e.data)||void 0===s||null===(d=s.metrics)||void 0===d?void 0:d.map((({dataset_name:e,key:o,value:t,timestamp:r,step:a})=>({dataKey:oe(o,e),key:null!==o&&void 0!==o?o:"",value:null!==t&&void 0!==t?t:0,timestamp:null!==r&&void 0!==r?r:0,step:null!==a&&void 0!==a?a:0}))),"dataKey"),params:(0,z.keyBy)(null!==(c=null===(u=e.data)||void 0===u||null===(m=u.params)||void 0===m?void 0:m.map((({key:e,value:o})=>({key:null!==e&&void 0!==e?e:"",value:null!==o&&void 0!==o?o:""}))).filter((({key:e})=>e)))&&void 0!==c?c:[],"key"),tags:{},uuid:e.info.model_id,hidden:o(e.info.model_id,t),color:(0,Z.T6)(e.info.model_id)}:null})))),[e,o])})(i);return c?(0,w.Y)("div",{css:(0,r.AH)({backgroundColor:n.colors.backgroundPrimary,paddingTop:n.spacing.lg,borderTop:`1px solid ${n.colors.border}`,borderLeft:`1px solid ${n.colors.border}`,flex:1,justifyContent:"center",alignItems:"center",display:"flex"},""),children:(0,w.Y)(a.S,{})}):(0,w.Y)(j.oB,{updateChartsUIState:d,children:(0,w.Y)(de,{chartData:u,uiState:s,metricKeysByDataset:l,minWidth:t})})}));var ue=t(25790),me=t(39416),ge=t(94026);var pe={name:"oww3ap",styles:"display:flex;flex:1;overflow:hidden;position:relative"};const he=()=>{const{experimentId:e}=(0,d.g)(),{theme:o}=(0,a.u)(),t=(0,u.fS)(),{state:{orderByColumn:l,orderByAsc:c,columnVisibility:h,rowVisibilityMap:f,rowVisibilityMode:v,selectedFilterDatasets:b,groupBy:M},searchQuery:S,isFilteringActive:Y,setOrderBy:A,setColumnVisibility:R,setRowVisibilityMode:_,toggleRowVisibility:B,updateSearchQuery:I,toggleDataset:F,clearSelectedDatasets:T,setGroupBy:k}=(0,H.k)();s()(e,"Experiment ID must be defined");const{viewMode:E,setViewMode:L}=(()=>{const[e,o]=(0,d.ok)();return{viewMode:(0,y.SK)(C,e.get(D),C.TABLE),setViewMode:e=>{o({[D]:e})}}})(),{data:N,isFetching:K,isLoading:O,error:z,nextPageToken:P,loadMoreResults:Q}=(0,p.e)({experimentIds:[e],orderByAsc:c,searchQuery:S,selectedFilterDatasets:b,...(()=>{if(!l)return{orderByField:void 0};const e=(0,x.TQ)(l);return e.datasetDigest&&e.datasetName?{orderByField:`metrics.${e.metricKey}`,orderByDatasetName:e.datasetName,orderByDatasetDigest:e.datasetDigest}:{orderByField:l}})()}),W=z instanceof me.v7?z:void 0,{data:G}=(0,$.s)({loggedModels:N}),{columnDefs:X,compactColumnDefs:j}=(0,x.ih)({loggedModels:N,columnVisibility:h,isLoading:O,orderByColumn:l,orderByAsc:c,enableSortingByMetrics:t}),[J,Z]=(0,m.useState)(295),[oe,te]=(0,m.useState)(!1),re=E!==C.TABLE,ae=re&&oe?(0,w.Y)("div",{css:(0,r.AH)({width:o.spacing.md},"")}):(0,w.Y)(g._,{columnDefs:re?j:X,loggedModels:null!==N&&void 0!==N?N:[],isLoading:O,isLoadingMore:K,badRequestError:W,moreResultsAvailable:Boolean(P),onLoadMore:Q,onOrderByChange:A,orderByAsc:c,orderByColumn:l,columnVisibility:h,relatedRunsData:G,isFilteringActive:Y,groupModelsBy:M}),{resizableMaxWidth:ne,ref:ie}=(0,ge.b6)(350);return(0,w.Y)(V.Xs,{children:(0,w.FD)(ee.Ap,{visibilityMap:f,visibilityMode:v,setRowVisibilityMode:_,toggleRowVisibility:B,children:[(0,w.Y)(U,{columnDefs:X,columnVisibility:h,onChangeOrderBy:A,onUpdateColumns:R,orderByColumn:l,orderByAsc:c,viewMode:E,setViewMode:L,searchQuery:S,onChangeSearchQuery:I,loggedModelsData:null!==N&&void 0!==N?N:[],sortingAndFilteringEnabled:t,selectedFilterDatasets:b,onToggleDataset:F,onClearSelectedDatasets:T,groupBy:M,onChangeGroupBy:k}),(0,w.Y)(n.S,{size:"sm",shrinks:!1}),(null===z||void 0===z?void 0:z.message)&&!W&&(0,w.FD)(w.FK,{children:[(0,w.Y)(i.Alert,{componentId:"mlflow.logged_models.list.error",message:z.message,type:"error",closable:!1}),(0,w.Y)(n.S,{size:"sm",shrinks:!1})]}),re?(0,w.Y)(ue.Co,{children:(0,w.FD)("div",{ref:ie,css:pe,children:[(0,w.Y)(q.t,{onResize:Z,runListHidden:oe,width:J,onHiddenChange:te,maxWidth:ne,children:ae}),E===C.CHART&&(0,w.Y)(ce,{loggedModels:null!==N&&void 0!==N?N:[],experimentId:e,minWidth:350})]})}):ae]})})};var fe=()=>(0,w.Y)(c.X,{children:(0,w.Y)(he,{})})},88311:function(e,o,t){t.d(o,{s:function(){return d}});var r=t(31014),a=t(9133),n=t(77735),i=t(63528);const l=e=>["USE_RELATED_RUNS_DATA_FOR_LOGGED_MODELS",{runUuid:e}],s=async({queryKey:[,{runUuid:e}]})=>{try{const o=await i.x.getRun({run_id:e});return null===o||void 0===o?void 0:o.run}catch(o){return null}},d=({loggedModels:e=[]})=>{var o;const t=(0,r.useMemo)((()=>{const o=(0,a.compact)(null===e||void 0===e?void 0:e.flatMap((e=>{var o,t;return null===e||void 0===e||null===(o=e.data)||void 0===o||null===(t=o.metrics)||void 0===t?void 0:t.map((e=>e.run_id))}))),t=(0,a.compact)(null===e||void 0===e?void 0:e.map((e=>{var o;return null===e||void 0===e||null===(o=e.info)||void 0===o?void 0:o.source_run_id})));return(0,a.sortBy)((0,a.uniq)([...o,...t]))}),[e]),i=(0,n.E)({queries:t.map((e=>({queryKey:l(e),queryFn:s,cacheTime:1/0,staleTime:1/0,refetchOnWindowFocus:!1,retry:!1})))}),d=i.some((({isLoading:e})=>e)),c=null===(o=i.find((({error:e})=>e)))||void 0===o?void 0:o.error,u=function(e){const o=(0,r.useRef)(),t=!(!o.current||e.length!==o.current.length)&&e.every(((e,t)=>{var r;return e===(null===(r=o.current)||void 0===r?void 0:r[t])}));return t||(o.current=e),t&&o.current?o.current:e}(i.map((({data:e})=>e)));return{data:(0,r.useMemo)((()=>u.map((e=>e)).filter(Boolean)),[u]),loading:d,error:c}}},92246:function(e,o,t){t.d(o,{X:function(){return u}});var r=t(37368),a=t(28486),n=t(37523),i=t(13062),l=t(88443),s=t(50111);var d={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const c=({error:e})=>{var o;return(0,s.Y)(n.PageWrapper,{css:d,children:(0,s.Y)(n.Empty,{"data-testid":"fallback",title:(0,s.Y)(l.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(o=null===e||void 0===e?void 0:e.message)&&void 0!==o?o:(0,s.Y)(l.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,s.Y)(i.l,{})})})},u=({children:e,resetKey:o})=>(0,s.Y)(a.tH,{FallbackComponent:c,resetKeys:[o],children:(0,s.Y)(r.Au,{children:e})})}}]);
//# sourceMappingURL=4588.76b8c6aa.chunk.js.map