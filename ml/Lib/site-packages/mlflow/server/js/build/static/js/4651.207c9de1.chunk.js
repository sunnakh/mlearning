"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4651],{3679:function(e,t,n){n.d(t,{M:function(){return x}});var a=n(89555),o=n(13062),r=n(37523),s=n(40553),i=n(6958),l=n(88464),d=n(31014),c=n(96070),u=n(6604),p=n(88443),m=n(9133),g=n(28380),h=n(50111);const f="tooltipLastPopup";var v={name:"c61v0h",styles:".du-bois-light-select-item-option-active:not(.du-bois-light-select-item-option-disabled){background-color:#e6f1f5;}"},_={name:"9gxvqt",styles:"display:flex;gap:4px;align-items:center"};const x=({baseOptions:e,searchFilter:t,requestError:n=null,onSearchFilterChange:x,onClear:y,tooltipContent:b,placeholder:w,useQuickFilter:Y,defaultActiveFirstOption:C=!0,className:A})=>{const{theme:I,getPrefixedClassName:k}=(0,o.u)(),M=(0,d.useRef)(null),S=(0,l.A)(),[E,D]=(0,d.useState)(""),[T,R]=(0,d.useState)(void 0),[F,L]=(0,d.useState)(!1),[B,N]=(0,d.useState)(!1),[P,O]=(0,d.useState)({Metrics:10,Parameters:10,Tags:10}),H=(0,d.useRef)([]),[U,V]=(0,d.useState)(void 0);(0,d.useEffect)((()=>{D(t)}),[t]),(0,d.useEffect)((()=>{const e=H.current,t=(0,c.jP)(E);if(H.current=t,B)return void N(!1);const n=t.map((e=>e.name)),a=e.map((e=>e.name));if(!(0,m.isEqual)(n,a)&&t.length>=e.length){let n=0;for(;n<t.length;){if(n>=e.length||t[n].name.trim()!==e[n].name.trim())return R(!0),void V(t[n]);n++}}R(!1)}),[E]);const G=(0,d.useMemo)((()=>U?(0,c.M8)(e,U,P):[]),[e,U,P]),K=(0,d.useCallback)(((e,t)=>{if(U)if(e.startsWith("...")){R(!0);const e=t.value.split("_")[1];O((t=>({...t,[e]:t[e]+10})))}else{const t=E.substring(0,U.startIndex),n=E.substring(U.endIndex);D(t+e+" "+n),N(!0),R(!1)}}),[E,D,U,R]),z=(0,g.S)(f),[j,$]=(0,d.useState)((()=>{const e=Math.floor(Date.now()/1e3),t=z.getItem(f);return!t||parseInt(t,10)<e-604800})),q=d.useRef(null),W=(0,d.useMemo)((()=>{if(Y&&E.length>0&&!(0,u.cK)(E))return(0,u.jA)(E)}),[E,Y]);(0,d.useEffect)((()=>{if(n&&j){var e;const t=Math.floor(Date.now()/1e3);z.setItem(f,t),$(!1),null===(e=q.current)||void 0===e||e.click()}}),[n]);const J=0===G.flatMap((e=>e.options)).length,Q=T&&F&&!J,Z=(0,d.useCallback)((e=>{var t;const n=k("select-item-option-active"),a=Boolean(null===(t=M.current)||void 0===t?void 0:t.querySelector(`.${n}`));"Enter"===e.key&&(Q&&R(!1),Q&&a||x(E)),"Escape"===e.key&&(e.preventDefault(),Q&&R(!1))}),[Q,E,x,k]);return(0,h.Y)("div",{css:(0,a.AH)({display:"flex",gap:I.spacing.sm,width:430,[I.responsive.mediaQueries.xs]:{width:"auto"}},""),className:A,children:(0,h.Y)(r.AutoComplete,{dropdownMatchSelectWidth:560,css:(0,a.AH)({width:560,[I.responsive.mediaQueries.xs]:{width:"auto"}},""),defaultOpen:!1,defaultActiveFirstOption:C&&!Y,open:Q,options:G,onSelect:K,value:E,"data-test-id":"runs-search-autocomplete",dropdownRender:e=>(0,h.Y)("div",{css:v,ref:M,children:e}),children:(0,h.Y)(s.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_236",value:E,prefix:(0,h.Y)(s.S,{css:(0,a.AH)({svg:{width:I.general.iconFontSize,height:I.general.iconFontSize,color:I.colors.textSecondary}},"")}),onKeyDown:Z,onClick:()=>L(!0),onBlur:()=>L(!1),onChange:e=>D(e.target.value),placeholder:w,"data-test-id":"search-box",suffix:(0,h.FD)("div",{css:_,children:[E&&(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_212",onClick:()=>{y(),D("")},type:"link","data-test-id":"clear-button",children:(0,h.Y)(o.C,{})}),W?(0,h.Y)(i.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_310",content:(0,h.Y)(p.A,{id:"ESmLOR",defaultMessage:"Using regular expression quick filter. The following query will be used: {filterSample}",values:{filterSample:(0,h.Y)("div",{children:(0,h.Y)("code",{children:W})})}}),delayDuration:0,children:(0,h.Y)(r.InfoFillIcon,{"aria-label":S.formatMessage({id:"ESmLOR",defaultMessage:"Using regular expression quick filter. The following query will be used: {filterSample}"},{filterSample:W}),css:(0,a.AH)({svg:{width:I.general.iconFontSize,height:I.general.iconFontSize,color:I.colors.actionPrimaryBackgroundDefault}},"")})}):(0,h.Y)(r.LegacyTooltip,{title:b,placement:"right",dangerouslySetAntdProps:{overlayInnerStyle:{width:"150%"},trigger:["focus","click"]},children:(0,h.Y)(o.B,{size:"small",ref:q,componentId:"mlflow.experiment_page.search_filter.tooltip",type:"link",css:(0,a.AH)({marginLeft:-I.spacing.xs,marginRight:-I.spacing.xs},""),icon:(0,h.Y)(i.I,{css:(0,a.AH)({svg:{width:I.general.iconFontSize,height:I.general.iconFontSize,color:I.colors.textSecondary}},"")})})})]})})})})}},7355:function(e,t,n){n.d(t,{F:function(){return u}});var a=n(31014),o=n(41261),r=n(63528),s=n(9133),i=n(4877),l=n.n(i);var d=n(25866);var c=n(83667);const u=({experimentId:e,isLoadingExperiment:t,enabled:n=!0,experimentTags:i,updateExperimentKind:u})=>{const{containsTraces:p,isLoading:m}=(({experimentId:e,enabled:t})=>{const{data:n,isLoading:a}=(0,o.I)(["EXPERIMENT_CONTAINS_TRACES",e],(async()=>{l()(e,"experimentId is required");const t=[e];return r.x.getExperimentTraces(t,"timestamp_ms DESC",void 0,void 0,1)}),{enabled:t&&Boolean(e)});return{containsTraces:!a&&!(0,s.isEmpty)(null===n||void 0===n?void 0:n.traces),isLoading:a&&t&&Boolean(e)}})({experimentId:e,enabled:n}),[g,h]=(0,a.useState)(!1),{containsRuns:f,isLoading:v}=(({experimentId:e,enabled:t})=>{const{data:n,isLoading:i,error:d}=(0,o.I)(["EXPERIMENT_CONTAINS_TRAINING_RUNS",e],(async()=>{l()(e,"experimentId is required");const t=[e];return await r.x.searchRuns({experiment_ids:t,max_results:1})}),{enabled:Boolean(e)&&t});return{containsRuns:(0,a.useMemo)((()=>!i&&!(0,s.isEmpty)(null===n||void 0===n?void 0:n.runs)),[i,n]),isLoading:i&&t&&Boolean(e)}})({experimentId:e,enabled:n}),_=n&&(t||m||v),x=(0,a.useMemo)((()=>{if(n&&!_&&!g)return p?d.Gk.GENAI_DEVELOPMENT_INFERRED:f?d.Gk.CUSTOM_MODEL_DEVELOPMENT_INFERRED:d.Gk.NO_INFERRED_TYPE}),[n,g,_,p,f]),y=(0,a.useMemo)((()=>x===d.Gk.GENAI_DEVELOPMENT_INFERRED?d.fM.Traces:x===d.Gk.CUSTOM_MODEL_DEVELOPMENT_INFERRED?d.fM.Runs:void 0),[x]);return(0,a.useEffect)((()=>{x&&!(0,c.uk)(x)&&u({experimentId:null!==e&&void 0!==e?e:"",kind:x})}),[e,x,u]),{isLoading:_,inferredExperimentKind:x,inferredExperimentPageTab:y,dismiss:()=>h(!0)}}},11039:function(e,t,n){n.d(t,{f:function(){return w}});var a=n(37523),o=n(13062),r=n(6958),s=n(81313),i=n(9133),l=n(31014),d=n(69526),c=n(88443),u=n(25866),p=n(83667),m=n(89555),g=n(88464),h=n(50111);var f={name:"4bgdod",styles:"display:block;position:relative"},v={name:"1l2g5rl",styles:"position:absolute;left:0;bottom:0;right:0;height:0"},_={name:"82a6rk",styles:"flex:1"},x={name:"1hetg88",styles:"max-width:300px"};const y=({children:e,inferredExperimentKind:t,onConfirm:n,onDismiss:a,isInferredKindEditable:r=!1})=>{const s=(0,g.A)(),{theme:i}=(0,o.u)();return(0,h.FD)("div",{css:f,children:[e,(0,h.FD)(o.ax.Root,{componentId:"mlflow.experiment_view.header.experiment_kind_inference_popover",open:!0,modal:!1,children:[(0,h.Y)(o.ax.Trigger,{asChild:!0,children:(0,h.Y)("div",{css:v})}),(0,h.FD)(o.ax.Content,{css:!0,children:[(0,h.Y)(o.ax.Arrow,{}),(0,h.FD)("div",{css:(0,m.AH)({display:"flex",alignItems:"flex-start",gap:i.spacing.sm},""),children:[(0,h.FD)("div",{css:_,children:[(0,h.Y)(o.T.Paragraph,{css:x,children:(0,h.Y)(c.A,{id:"Jxhb2w",defaultMessage:"We've automatically detected the experiment type to be ''{kindLabel}''. {isEditable, select, true {You can either confirm or change the type.} other {}}",values:{kindLabel:s.formatMessage(p.bf[t]),isEditable:r}})}),(0,h.Y)(o.B,{componentId:"mlflow.experiment_view.header.experiment_kind_inference_popover.confirm",onClick:n,type:"primary",size:"small",children:(0,h.Y)(c.A,{id:"4AkzyD",defaultMessage:"Confirm"})})]}),(0,h.Y)(o.B,{componentId:"mlflow.experiment_view.header.experiment_kind_inference_popover.dismiss",onClick:a,icon:(0,h.Y)(o.C,{}),size:"small"})]})]})]})]})};var b={name:"1wcfv52",styles:"margin-right:0"};const w=({value:e,inferredExperimentKind:t,onChange:n,isUpdating:r,readOnly:m=!1})=>{const g=(0,l.useMemo)((()=>(0,i.entries)(p.UI).filter((([e])=>(0,p.$g)().includes(e)))),[]),f=(0,l.useMemo)((()=>t?(0,p.q5)(t):(0,s.SK)(u.Gk,e,u.Gk.NO_INFERRED_TYPE)),[e,t]),v=((e,t)=>e===u.Gk.NO_INFERRED_TYPE||e===u.Gk.EMPTY?t?p.UI[u.Gk.NO_INFERRED_TYPE]:(0,d.zR)({id:"eapsJa",defaultMessage:"Select a type"}):p.UI[e])(f,m),[_,x]=(0,l.useState)(!1),[w,C]=(0,l.useState)(Boolean(t&&!m&&(0,p.uk)(t))),A=(0,p.uk)(f)&&!m,I=(0,h.FD)(a.Tag,{icon:r?(0,h.Y)(o.S,{size:"small"}):null,componentId:"mlflow.experiment_view.header.experiment_kind_selector",css:b,onClick:A?()=>{}:void 0,children:[v&&(0,h.Y)(c.A,{...v})," ",A&&(0,h.Y)(a.ChevronDownIcon,{})]}),k=(0,h.Y)(Y,{children:I});if(m)return k;const M=(0,h.FD)(a.DropdownMenu.Root,{modal:!1,open:_,onOpenChange:e=>{C(!1),x(e)},children:[(0,h.Y)(Y,{children:(0,h.Y)(a.DropdownMenu.Trigger,{asChild:!0,children:I})}),(0,h.FD)(a.DropdownMenu.Content,{align:"start",children:[(0,h.Y)(a.DropdownMenu.Arrow,{}),(0,h.Y)(a.DropdownMenu.Label,{children:(0,h.Y)(c.A,{id:"vQa9lQ",defaultMessage:"Experiment type"})}),g.map((([e,t])=>{const o=e===f;return(0,h.FD)(a.DropdownMenu.CheckboxItem,{componentId:`mlflow.experiment_view.header.experiment_kind_selector.${e}`,onClick:()=>null===n||void 0===n?void 0:n(e),checked:o,children:[(0,h.Y)(a.DropdownMenu.ItemIndicator,{}),(0,h.Y)(c.A,{...t})]},e)}))]})]});return w&&t?(0,h.Y)(y,{inferredExperimentKind:t,onConfirm:async()=>{t&&(null===n||void 0===n||n((0,p.q5)(t))),C(!1)},onDismiss:()=>C(!1),isInferredKindEditable:(0,p.uk)(f),children:A?M:k}):A?M:k},Y=({children:e})=>(0,h.Y)(r.T,{componentId:"mlflow.experiment_view.header.experiment_kind_selector.tooltip",content:(0,h.Y)(c.A,{id:"vQa9lQ",defaultMessage:"Experiment type"}),children:e})},15543:function(e,t,n){n.d(t,{T:function(){return p}});var a=n(89555),o=n(13062),r=n(6958),s=n(37523),i=n(31014),l=n(88443),d=n(25866),c=n(83667),u=n(50111);const p=({onDismiss:e,onConfirm:t})=>{const{theme:n}=(0,o.u)(),[p,m]=(0,i.useState)(d.Gk.CUSTOM_MODEL_DEVELOPMENT);return(0,u.FD)(r.d,{visible:!0,componentId:"mlflow.experiment_view.header.experiment_kind_inference_modal",onCancel:e,title:(0,u.Y)(l.A,{id:"YqW83+",defaultMessage:"Choose experiment type"}),cancelText:(0,u.Y)(l.A,{id:"B/On/j",defaultMessage:"I'll choose later"}),okText:(0,u.Y)(l.A,{id:"Yx79Vd",defaultMessage:"Confirm"}),onOk:()=>t(p),children:[(0,u.Y)(o.T.Paragraph,{children:(0,u.Y)(l.A,{id:"BEFBcB",defaultMessage:"We support multiple experiment types, each with its own set of features. Please select the type you'd like to use. You can change this later if needed."})}),(0,u.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:n.spacing.sm,marginBottom:n.spacing.sm},""),children:[(0,u.Y)(s.Radio,{checked:p===d.Gk.GENAI_DEVELOPMENT,onChange:()=>m(d.Gk.GENAI_DEVELOPMENT),children:(0,u.Y)(l.A,{...c.UI[d.Gk.GENAI_DEVELOPMENT]})}),(0,u.Y)(s.Radio,{checked:p===d.Gk.CUSTOM_MODEL_DEVELOPMENT,onChange:()=>m(d.Gk.CUSTOM_MODEL_DEVELOPMENT),children:(0,u.Y)(l.A,{...c.UI[d.Gk.CUSTOM_MODEL_DEVELOPMENT]})})]})]})}},22647:function(e,t,n){n.d(t,{i:function(){return L},l:function(){return P}});var a=n(89555),o=n(31014),r=n(13062),s=n(37523),i=n(6958),l=n(88443),d=n(79662),c=n(38924),u=n(97196),p=n(85349),m=n(25866),g=n(53660),h=n(93215),f=n(81313),v=n(91144),_=n(58481),x=n(50111);const y={label:(0,x.Y)(l.A,{id:"L/U++H",defaultMessage:"Runs"}),icon:(0,x.Y)(i.L,{}),getRoute:e=>_.Ay.getExperimentPageTabRoute(e,m.fM.Runs)},b={label:(0,x.Y)(l.A,{id:"ViqP7B",defaultMessage:"Traces"}),icon:(0,x.Y)(s.ListBorderIcon,{}),getRoute:e=>_.Ay.getExperimentPageTabRoute(e,m.fM.Traces)},w={label:(0,x.Y)(l.A,{id:"AxdKIr",defaultMessage:"Versions"}),icon:(0,x.Y)(s.ModelsIcon,{}),getRoute:e=>_.Ay.getExperimentPageTabRoute(e,m.fM.Models)},Y={[m.fM.Traces]:b,[m.fM.Models]:w},C=Y,A={[m.fM.Runs]:y,[m.fM.Models]:{...w,label:(0,x.Y)(l.A,{id:"QHTLV9",defaultMessage:"Models"})},[m.fM.Traces]:b},I={...A};var k=n(24011);var M={name:"eivff4",styles:"display:none"};const S=({experimentKind:e})=>{var t;const{experimentId:n,tabName:l}=(0,h.g)(),{theme:d}=(0,r.u)(),[c]=(0,g.an)(),{topLevelTabName:u}=(0,k.H)();let p=(0,f.SK)(m.fM,l,void 0);p===m.fM.Datasets&&(p=m.fM.EvaluationRuns),p===m.fM.LabelingSchemas&&(p=m.fM.LabelingSessions);const _=(e=>["TABLE","CHART","ARTIFACT"].includes(e))(c)?m.fM.Runs:(e=>["TRACES"].includes(e))(c)?m.fM.Traces:c,y=null!==(t=null!==u&&void 0!==u?u:p)&&void 0!==t?t:_,b=(e=>{switch(e){case m.Gk.GENAI_DEVELOPMENT:case m.Gk.GENAI_DEVELOPMENT_INFERRED:return(0,v.Xs)()?C:Y;case m.Gk.CUSTOM_MODEL_DEVELOPMENT:case m.Gk.CUSTOM_MODEL_DEVELOPMENT_INFERRED:case m.Gk.FORECASTING:case m.Gk.REGRESSION:case m.Gk.AUTOML:case m.Gk.CLASSIFICATION:return A;default:return I}})(null!==e&&void 0!==e?e:m.Gk.NO_INFERRED_TYPE);return(0,x.Y)(s.SegmentedControlGroup,{value:y,name:"tab-toggle-bar",componentId:"mlflow.experiment-tracking.tab-toggle-bar",newStyleFlagOverride:!0,css:(0,a.AH)({justifySelf:"center",[d.responsive.mediaQueries.xl]:{"& .tab-icon-text":{display:"inline-flex"},"& .tab-icon-with-tooltip":{display:"none"}}},""),children:Object.entries(b).map((([e,t])=>{const a=e===y;return(0,x.FD)(o.Fragment,{children:[(0,x.Y)(h.N_,{css:M,className:"tab-icon-text",to:t.getRoute(null!==n&&void 0!==n?n:""),children:(0,x.Y)(s.SegmentedControlButton,{"data-testid":`tab-selector-button-text-${e}-${a?"active":"inactive"}`,className:"tab-icon-text",value:e,icon:t.icon,children:(0,x.Y)("span",{children:t.label})})},e),(0,x.Y)(h.N_,{className:"tab-icon-with-tooltip",to:t.getRoute(null!==n&&void 0!==n?n:""),children:(0,x.Y)(s.SegmentedControlButton,{"data-testid":`tab-selector-button-icon-${e}-${a?"active":"inactive"}`,className:"tab-icon-with-tooltip",value:e,icon:(0,x.Y)(i.T,{delayDuration:0,content:(0,x.Y)("span",{children:t.label}),componentId:`mlflow.experiment-tracking.tab-selector-bar.${e}`,children:(0,x.Y)("span",{children:t.icon})})})},e)]},e)}))})};var E=n(32793),D=n(83667);var T={name:"1s8dw6e",styles:"display:grid;grid-template-columns:1fr 1fr 1fr"},R={name:"1gw6v2o",styles:"max-width:100%;overflow:hidden"},F={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"};const L=o.memo((({experiment:e,inferredExperimentKind:t,searchFacetsState:n,uiState:m,setEditing:g,experimentKindSelector:h})=>{const{theme:f}=(0,r.u)();const v=(0,o.useMemo)((()=>e?[null===e||void 0===e?void 0:e.experimentId]:[]),[e]),_=(0,o.useMemo)((()=>e.name.split("/").pop()),[e.name]),y=null!==t&&void 0!==t?t:(0,D.BH)(e.tags);return(0,x.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:f.spacing.xs,marginBottom:f.spacing.sm},""),children:[(0,x.Y)(s.Breadcrumb,{includeTrailingCaret:!0,children:[].map(((e,t)=>(0,x.Y)(s.Breadcrumb.Item,{children:e},t)))}),(0,x.FD)("div",{css:T,children:[(0,x.FD)("div",{css:(0,a.AH)({display:"flex",gap:f.spacing.sm,alignItems:"center",overflow:"hidden",minWidth:250},""),children:[(0,x.Y)(i.T,{content:_,componentId:"mlflow.experiment_view.header.experiment-name-tooltip",children:(0,x.Y)("span",{css:R,children:(0,x.Y)(r.T.Title,{withoutMargins:!0,level:2,css:F,children:_})})}),h,(0,x.Y)("div",{style:{display:"flex",marginRight:f.spacing.sm},children:(0,x.Y)(s.InfoPopover,{iconTitle:"Info",children:(0,x.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:f.spacing.xs,flexWrap:"nowrap"},""),"data-testid":"experiment-view-header-info-tooltip-content",children:[(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"F8MqzZ",defaultMessage:"Path"}),": ",e.name+" ",(0,x.Y)(d.y,{experiment:e,size:"md"})]}),(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"PZGZHV",defaultMessage:"Experiment ID"}),": ",e.experimentId+" ",(0,x.Y)(u.s,{experiment:e})]}),(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"8/7V3S",defaultMessage:"Artifact Location"}),": ",(0,x.Y)(c.c,{artifactLocation:e.artifactLocation})," ",(0,x.Y)(p.J,{experiment:e})]})]})})})]}),(0,x.Y)(S,{experimentKind:y}),(0,x.Y)("div",{css:(0,a.AH)({display:"flex",gap:f.spacing.sm,justifyContent:"flex-end",marginLeft:f.spacing.sm},""),children:(0,x.Y)(E.z,{experimentIds:v,searchFacetsState:n,uiState:m})})]})]})}));var B={name:"1pzk433",styles:"width:100px"},N={name:"1s8dw6e",styles:"display:grid;grid-template-columns:1fr 1fr 1fr"};function P(){const{theme:e}=(0,r.u)();return(0,x.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:e.spacing.xs},""),children:[(0,x.Y)(s.ParagraphSkeleton,{css:B,loading:!0}),(0,x.FD)("div",{css:N,children:[(0,x.Y)(s.TitleSkeleton,{css:(0,a.AH)({width:150,height:e.general.heightSm},""),loading:!0}),(0,x.Y)(s.TitleSkeleton,{css:(0,a.AH)({height:e.general.heightSm,alignSelf:"center"},""),loading:!0}),(0,x.Y)(s.TitleSkeleton,{css:(0,a.AH)({width:e.spacing.lg,height:e.general.heightSm,alignSelf:"right"},""),loading:!0})]})]})}},24011:function(e,t,n){n.d(t,{H:function(){return c}});var a=n(31014),o=n(91144),r=n(93215),s=n(58481),i=n(25866),l=n(9133);const d=(0,l.map)({[s.AY.experimentPageTabRuns]:i.fM.Runs,[s.AY.experimentPageTabTraces]:i.fM.Traces,[s.AY.experimentPageTabModels]:i.fM.Models},((e,t)=>({routePath:t,tabName:e}))),c=()=>{const{pathname:e}=(0,r.zy)(),t=(0,a.useMemo)((()=>{if(!(0,o.BV)())return;const t=(e=>{var t;return null===(t=d.find((({routePath:t})=>Boolean((0,r.B6)(t,e)))))||void 0===t?void 0:t.tabName})(e);return t}),[e]);return{tabName:t,topLevelTabName:t}}},28380:function(e,t,n){n.d(t,{S:function(){return r}});var a=n(31014),o=n(32614);const r=e=>(0,a.useMemo)((()=>o.A.getStoreForComponent("ExperimentView",e)),[e])},32793:function(e,t,n){n.d(t,{z:function(){return A}});var a=n(13062),o=n(31014),r=n(88443),s=n(6958),i=n(40553),l=n(56412),d=n(50111);var c={name:"490tlg",styles:"display:flex;gap:4px"};const u=({copyText:e})=>(0,d.FD)("div",{css:c,children:[(0,d.Y)(i.I,{componentId:"codegen_mlflow_app_src_shared_building_blocks_copybox.tsx_18",readOnly:!0,value:e,"data-testid":"copy-box"}),(0,d.Y)(l.i,{copyText:e})]}),p=({visible:e,onCancel:t,link:n})=>(0,d.Y)(s.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_modals_getlinkmodal.tsx_21",title:(0,d.Y)(r.A,{id:"ktiuki",defaultMessage:"Get Link"}),visible:e,onCancel:t,children:(0,d.Y)(u,{copyText:n})});var m=n(37523),g=n(10811),h=n(26809),f=n(58481),v=n(45653),_=n(76010),x=n(25866),y=n(91144),b=n(53660);var w={name:"11jf4ye",styles:"display:flex;gap:8px"},Y={name:"82a6rk",styles:"flex:1"};const C=({onCancel:e,visible:t,experimentIds:n,searchFacetsState:a,uiState:c})=>{const[u,p]=(0,o.useState)(""),[C,A]=(0,o.useState)(!0),[I,k]=(0,o.useState)(null),[M]=(0,b.an)(),S=(0,g.wA)(),E=(0,o.useMemo)((()=>({...a,...c})),[a,c]),D=(0,o.useCallback)((async e=>{if(n.length>1)return A(!1),k(e),void p(window.location.href);A(!0);const[t]=n;try{const n=await(async e=>(0,y.YP)()?(0,v.z7)(JSON.stringify(e)):JSON.stringify(e))(e),a=await(0,v.Xb)(n),o=`${x.o6}${a}`;await S((0,h.EJ)(t,o,n)),A(!1),k(e),p(((e,t,n)=>{const a=f.Ay.getExperimentPageRoute(e),o=new URLSearchParams;o.set(x.ex,t),n&&o.set(b.b,n);const r=o.toString(),s=`${a}${null!==r&&void 0!==r&&r.startsWith("?")?"":"?"}${r}`;return`${window.location.origin}${window.location.pathname}#${s}`})(t,a,M))}catch(a){throw _.A.logErrorAndNotifyUser("Failed to create shareable link for experiment"),a}}),[S,n,M]);return(0,o.useEffect)((()=>{t&&I!==E&&D(E)}),[t,D,I,E]),(0,d.Y)(s.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentgetsharelinkmodal.tsx_101",title:(0,d.Y)(r.A,{id:"6KFQMl",defaultMessage:"Get shareable link"}),visible:t,onCancel:e,children:(0,d.FD)("div",{css:w,children:[C?(0,d.Y)(m.GenericSkeleton,{css:Y}):(0,d.Y)(i.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentgetsharelinkmodal.tsx_115",placeholder:"Click button on the right to create shareable state",value:u,readOnly:!0}),(0,d.Y)(l.i,{loading:C,copyText:u,"data-testid":"share-link-copy-button"})]})})},A=({searchFacetsState:e,uiState:t,experimentIds:n})=>{const[s,i]=(0,o.useState)(!1);return(0,d.FD)(d.FK,{children:[e&&t&&n?(0,d.Y)(C,{searchFacetsState:e,uiState:t,visible:s,onCancel:()=>i(!1),experimentIds:n}):(0,d.Y)(p,{link:window.location.href,visible:s,onCancel:()=>i(!1)}),(0,d.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentviewheadersharebutton.tsx_44",type:"primary",onClick:()=>i(!0),"data-test-id":"share-button",children:(0,d.Y)(r.A,{id:"2oFAO4",defaultMessage:"Share"})})]})}},38924:function(e,t,n){n.d(t,{c:function(){return o}});n(31014);var a=n(50111);const o=({artifactLocation:e})=>(0,a.Y)(a.FK,{children:e})},40555:function(e,t,n){n.d(t,{f:function(){return u},y:function(){return l}});var a=n(89555),o=n(31014),r=n(27193),s=n(9133),i=n(50111);const l=({json:e,wrapperStyle:t,overlayStyle:n,codeSnippetStyle:o})=>{const{formattedJson:s,isJsonContent:l}=d(e);return(0,i.Y)("div",{style:{position:"relative",maxHeight:"calc(1.5em * 9)",overflow:"hidden",...t},children:l?(0,i.FD)(i.FK,{children:[(0,i.Y)(r.z7,{language:"json",style:{padding:"5px",overflowX:"hidden",...o},children:s}),(0,i.Y)("div",{css:(0,a.AH)({position:"absolute",bottom:0,right:0,left:6,height:"2em",background:"linear-gradient(transparent, white)",...n},"")})]}):(0,i.Y)(i.FK,{children:e})})};function d(e){return o.useMemo((()=>{try{const t=JSON.parse(e),n=(0,s.isObject)(t)&&"function"!==typeof t&&!(t instanceof Date);return{formattedJson:n?JSON.stringify(t,null,2):e,isJsonContent:n}}catch(t){return{formattedJson:e,isJsonContent:!1}}}),[e])}var c={name:"1089mxj",styles:"white-space:pre-wrap"};const u=({json:e})=>{const{formattedJson:t,isJsonContent:n}=d(e);return(0,i.Y)("div",{css:c,children:n?(0,i.Y)(r.z7,{language:"json",wrapLongLines:!0,children:t}):(0,i.Y)("span",{children:e})})}},42550:function(e,t,n){n.d(t,{t:function(){return u}});var a=n(89555),o=n(13062),r=n(31014),s=n(15230),i=n(21879),l=n(50111);var d={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},c={name:"5ob2ly",styles:"display:flex;position:relative"};const u=({runListHidden:e,width:t,onResize:n,children:o,onHiddenChange:u,maxWidth:m})=>{const g=(0,i.e)(),[h,f]=(0,r.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.Y)(s.ResizableBox,{css:c,style:{flex:`0 0 ${e?0:t}px`},width:t,axis:"x",resizeHandles:["e"],minConstraints:[250,0],maxConstraints:void 0===m?void 0:[m,0],handle:(0,l.Y)(p,{runListHidden:e,updateRunListHidden:e=>{u?u(e):g((t=>({...t,runListHidden:e})))}}),onResize:(t,{size:a})=>{e||n(a.width)},onResizeStart:()=>!e&&f(!0),onResizeStop:()=>f(!1),children:o}),h&&(0,l.Y)(a.mL,{styles:d})]})},p=r.forwardRef((({updateRunListHidden:e,runListHidden:t,...n},r)=>{const{theme:s}=(0,o.u)();return(0,l.FD)("div",{ref:r,...n,css:(0,a.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:t?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${s.colors.actionDefaultBorderHover}`}}},""),children:[(0,l.Y)("div",{css:(0,a.AH)({position:"absolute",left:-s.general.iconSize/2,width:s.general.iconSize,cursor:t?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,l.Y)("div",{className:"button",css:(0,a.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:s.general.iconSize,height:s.general.iconSize,backgroundColor:s.colors.backgroundPrimary,borderRadius:s.general.iconSize,overflow:"hidden",border:`1px solid ${s.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,l.Y)(o.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>e(!t),icon:t?(0,l.Y)(o.q,{}):(0,l.Y)(o.o,{}),size:"small"})})}),(0,l.Y)("div",{className:"bar",css:(0,a.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:s.colors.actionPrimaryBackgroundDefault},"")})]})}))},52969:function(e,t,n){n.d(t,{$:function(){return d}});var a=n(89555),o=n(13062),r=n(83946),s=n(72069),i=n(91144),l=n(50111);const d=({experimentIds:e})=>{const{theme:t}=(0,o.u)();return(0,l.FD)("div",{css:(0,a.AH)({minHeight:225,display:"flex",flexDirection:"column",gap:t.spacing.sm,flex:1,overflow:"hidden"},""),children:[(0,i.w7)()?null:(0,l.Y)(s.W,{hideBorder:!1}),(0,l.Y)(c,{experimentIds:e})]})},c=({experimentIds:e})=>(0,l.Y)(r.O,{experimentIds:e})},53660:function(e,t,n){n.d(t,{an:function(){return d},b:function(){return s},mb:function(){return i}});var a=n(93215),o=n(25866),r=n(58481);const s="compareRunsMode",i=()=>"TABLE",l={MODELS:e=>r.Ay.getExperimentPageTabRoute(e,o.fM.Models)},d=()=>{const[e,t]=(0,a.ok)(),n=(0,a.Zp)();return[e.get(s)||i(),(e,a)=>{if(e in l&&a){var o;const t=null===(o=l[e])||void 0===o?void 0:o.call(l,a);if(t)return void n(t)}t((t=>(t.set(s,e||""),t)),{replace:!1})}]}},62230:function(e,t,n){n.d(t,{G:function(){return r}});var a=n(77020),o=n(63528);const r=e=>(0,a.n)({mutationFn:({experimentId:t,kind:n})=>o.x.setExperimentTag({experiment_id:t,key:"mlflow.experimentKind",value:n}).then((()=>{var t;return null!==(t=null===e||void 0===e?void 0:e())&&void 0!==t?t:Promise.resolve()}))})},62702:function(e,t,n){n.d(t,{A:function(){return x}});var a=n(89555),o=n(13062),r=n(37523),s=n(6958),i=n(31014),l=n(10811),d=n(26458),c=n(56928),u=(n(8844),n(75703)),p=n(11473),m=n(88443),g=n(26809),h=n(50111);const f=[["header","bold","italic","strikethrough"],["link","code","image"],["unordered-list","ordered-list"]],v=(0,p.OT)(),_=e=>{if(e){const t=(0,p.NW)(v.makeHtml(e));return(0,p.Yc)(t)}return null},x=({experiment:e,editing:t,setEditing:n,setShowAddDescriptionButton:p,onNoteUpdated:v,defaultValue:x})=>{const y=(0,l.d4)((t=>{const n=(0,d.xy)(e.experimentId,t);return n?(e=>{var t;return(null===(t=Object.values(e).find((e=>e.key===c.e)))||void 0===t?void 0:t.value)||void 0})(n):""}));p(!y);const b=y||x,[w,Y]=(0,i.useState)(b),[C,A]=(0,i.useState)("write"),[I,k]=(0,i.useState)(!1),{theme:M}=(0,o.u)(),S=16+2*M.spacing.sm,E=(0,l.wA)(),D=(0,i.useCallback)((t=>{n(!1),p(!t);const a=(0,g.EJ)(e.experimentId,c.e,t);E(a).then(v)}),[e.experimentId,E,n,p,v]);return(0,h.FD)("div",{children:[b&&(0,h.FD)("div",{style:{whiteSpace:I?"normal":"pre-wrap",lineHeight:M.typography.lineHeightLg,background:M.colors.backgroundSecondary,display:"flex",alignItems:"flex-start",padding:M.spacing.xs},children:[(0,h.Y)("div",{style:{flexGrow:1,marginRight:12,overflow:"hidden",overflowWrap:I?"break-word":void 0,padding:`${M.spacing.sm}px 12px`,maxHeight:I?"none":S+"px",wordBreak:"break-word"},children:(0,h.Y)("div",{dangerouslySetInnerHTML:{__html:_(b)}})}),(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_114",icon:(0,h.Y)(r.PencilIcon,{}),onClick:()=>n(!0),style:{padding:`0px ${M.spacing.sm}px`}}),I?(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_120",icon:(0,h.Y)(r.ChevronUpIcon,{}),onClick:()=>k(!1),style:{padding:`0px ${M.spacing.sm}px`}}):(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_126",icon:(0,h.Y)(r.ChevronDownIcon,{}),onClick:()=>k(!0),style:{padding:`0px ${M.spacing.sm}px`}})]}),(0,h.Y)(s.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_141",title:(0,h.Y)(m.A,{id:"Vkr4Bs",defaultMessage:"Add description"}),visible:t,okText:(0,h.Y)(m.A,{id:"xUnYdk",defaultMessage:"Save"}),cancelText:(0,h.Y)(m.A,{id:"757GVc",defaultMessage:"Cancel"}),onOk:()=>{D(w),n(!1)},onCancel:()=>{Y(b),n(!1)},children:(0,h.Y)(i.Fragment,{children:(0,h.Y)(u.default,{value:w,minEditorHeight:200,maxEditorHeight:500,minPreviewHeight:20,toolbarCommands:f,onChange:e=>Y(e),selectedTab:C,onTabChange:e=>A(e),generateMarkdownPreview:()=>Promise.resolve(_(w)),getIcon:e=>(0,h.Y)(r.LegacyTooltip,{title:e,children:(0,h.Y)("span",{css:(0,a.AH)({color:M.colors.textPrimary},""),children:(0,h.Y)(u.SvgIcon,{icon:e})})})})})})]})}},64651:function(e,t,n){n.d(t,{n:function(){return Qa}});var a=n(89555),o=n(13062),r=n(37523),s=n(31014),i=n(47664),l=n(26809),d=n(25866),c=n(88443),u=n(79085),p=n(32793),m=n(93215),g=n(58481),h=n(50111);const f=s.memo((({experiments:e})=>{const t=(0,s.useMemo)((()=>(0,h.Y)(c.A,{id:"Dhn7Mb",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:e.length}})),[e.length]);return(0,h.Y)(u.z,{title:t,breadcrumbs:[(0,h.Y)(m.N_,{to:g.Ay.experimentsObservatoryRoute,children:"Experiments"})],children:(0,h.Y)(p.z,{})})}));var v=n(10811),_=n(21616);var x=n(33946),y=n(53677),b=n(97026),w=n(76010);class Y extends s.Component{constructor(e){super(e),this.handleSubmit=this.handleSubmit.bind(this)}handleSubmit(){const e=[];return this.props.selectedRunIds.forEach((t=>{e.push(this.props.restoreRunApi(t))})),Promise.all(e).catch((e=>{let t="While restoring an experiment run, an error occurred.";e.textJson&&"RESOURCE_LIMIT_EXCEEDED"===e.textJson.error_code&&(t=t+" "+e.textJson.message),this.props.openErrorModal(t)})).then((()=>{var e,t;null===(e=(t=this.props).onSuccess)||void 0===e||e.call(t)}))}render(){const e=this.props.selectedRunIds.length;return(0,h.Y)(b.u,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Restore Experiment ${w.A.pluralize("Run",e)}`,helpText:`${e} experiment ${w.A.pluralize("run",e)} will be restored.`,confirmButtonText:"Restore"})}}const C={restoreRunApi:l.iz,openErrorModal:l.Yi};var A=(0,v.Ng)(null,C)(Y);const I=({showDeleteRunModal:e,showRestoreRunModal:t,showRenameRunModal:n,runsSelected:a,onCloseDeleteRunModal:o,onCloseRestoreRunModal:r,onCloseRenameRunModal:s,renamedRunName:i,refreshRuns:l})=>{const d=Object.entries(a).filter((([,e])=>e)).map((([e])=>e));return(0,h.FD)(h.FK,{children:[(0,h.Y)(x.A,{isOpen:e,onClose:o,selectedRunIds:d,onSuccess:()=>{l()}}),(0,h.Y)(A,{isOpen:t,onClose:r,selectedRunIds:d,onSuccess:()=>{l()}}),(0,h.Y)(y.j,{runUuid:d[0],onClose:s,runName:i,isOpen:n,onSuccess:()=>{l()}})]})};var k=n(98590),M=n(6958),S=n(40553);var E={name:"82a6rk",styles:"flex:1"},D={name:"82a6rk",styles:"flex:1"};const T=({isOpen:e,setIsOpen:t,selectedRunsExistingTagKeys:n,addNewTag:i})=>{const{theme:l}=(0,o.u)(),[d,u]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),g=""===d||/^[^,.:/=\-\s]+$/.test(d),f=n.includes(d),v=g&&!f,_=d.length>0&&p.length>0&&v;return(0,h.Y)(M.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactionsaddnewtagmodal.tsx_34",title:(0,h.Y)(c.A,{id:"VGJhVI",defaultMessage:"Add New Tag"}),visible:e,onCancel:()=>t(!1),onOk:()=>{_&&(i({key:d,value:p}),t(!1),u(""),m(""))},okText:(0,h.Y)(c.A,{id:"oU/SPm",defaultMessage:"Add"}),cancelText:(0,h.Y)(c.A,{id:"urvfNd",defaultMessage:"Cancel"}),okButtonProps:{disabled:!_},children:(0,h.Y)("form",{css:(0,a.AH)({display:"flex",alignItems:"flex-end",gap:l.spacing.md},""),children:(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:l.spacing.md,flex:1},""),children:[(0,h.FD)("div",{css:E,children:[(0,h.Y)(r.FormUI.Label,{htmlFor:"key",children:(0,h.Y)(c.A,{id:"FYxQgz",defaultMessage:"Key"})}),(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactionsaddnewtagmodal.tsx_51",value:d,onChange:e=>u(e.target.value),validationState:v?void 0:"warning","data-testid":"add-new-tag-key-input"}),!g&&(0,h.Y)(r.FormUI.Hint,{children:(0,h.Y)(c.A,{id:"Sb0Z4Z",defaultMessage:", . : / - = and blank spaces are not allowed"})}),f&&(0,h.Y)(r.FormUI.Hint,{children:(0,h.Y)(c.A,{id:"xBoybr",defaultMessage:"Tag key already exists on one or more of the selected runs. Please choose a different key."})})]}),(0,h.FD)("div",{css:D,children:[(0,h.Y)(r.FormUI.Label,{htmlFor:"value",children:(0,h.Y)(c.A,{id:"OQsEJv",defaultMessage:"Value"})}),(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactionsaddnewtagmodal.tsx_78",value:p,onChange:e=>m(e.target.value),"data-testid":"add-new-tag-value-input"})]})]})})})};var R=n(9133),F=n(52350);const L=e=>`${e.key}: ${e.value}`,B=e=>{const[t,...n]=e.split(": ");return{key:t,value:n.join(": ")}},N=({runInfos:e,runsSelected:t,tagsList:n,refreshRuns:i})=>{const{theme:d}=(0,o.u)(),[u,p]=(0,s.useState)({}),[m,g]=(0,s.useState)(!1),[f,_]=(0,s.useState)(!1),[x,y]=(0,s.useState)(!1),{allSelectedTags:b,allNotSelectedTags:Y,indeterminateTags:C,allTags:A}=((e,t,n)=>{const a=e.flatMap(((e,a)=>{if(t[e.runUuid]){const e=n[a];return[Object.keys(e).filter(k.oD).map((t=>L(e[t])))]}return[]})),o=n.flatMap((e=>Object.keys(e).filter(k.oD).map((t=>L(e[t]))))),r=o.filter((e=>a.every((t=>t.includes(e))))),s=o.filter((e=>a.every((t=>!t.includes(e))))),i=o.filter((e=>!r.includes(e)&&a.some((t=>t.includes(e)))));return{allSelectedTags:r,allNotSelectedTags:s,indeterminateTags:i,allTags:o}})(e,t,n),I=e=>{p((()=>{const t={...u};return A.forEach((e=>{b.includes(e)?t[e]=!0:Y.includes(e)?t[e]=!1:C.includes(e)&&(t[e]=void 0)})),void 0!==e&&(t[L(e)]=!0),t})),_(!0)},M=e=>{p((t=>({...t,[e]:!t[e]})))},S=(0,v.wA)();return(0,h.FD)(h.FK,{children:[(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactionsselecttags.tsx_162",open:f,label:"Add tags",id:"runs-tag-multiselect",multiSelect:!0,children:[(0,h.Y)(r.DialogComboboxTrigger,{onClick:()=>{f?_(!1):I()},"data-testid":"runs-tag-multiselect-trigger"}),(0,h.FD)(r.DialogComboboxContent,{matchTriggerWidth:!0,children:[(0,h.Y)(r.DialogComboboxOptionList,{children:Object.keys(u).map((e=>{const t=void 0===u[e];return(0,h.Y)(r.DialogComboboxOptionListCheckboxItem,{value:e,onChange:M,checked:u[e],indeterminate:t},e)}))}),(0,h.Y)(r.DialogComboboxFooter,{children:(0,h.FD)("div",{css:(0,a.AH)({display:"flex",justifyContent:"flex-end",gap:d.spacing.sm},""),children:[(0,h.Y)(o.B,{componentId:"mlflow.experiment_page.runs.add_new_tag",onClick:()=>{g(!0),_(!1)},icon:(0,h.Y)(r.PlusIcon,{}),"data-testid":"runs-add-new-tag-button",children:(0,h.Y)(c.A,{id:"2zy+D5",defaultMessage:"Add new tag"})}),(0,h.Y)(o.B,{type:"primary",componentId:"mlflow.experiment_page.runs.add_tags",onClick:()=>{y(!0);e.flatMap(((e,n)=>t[e.runUuid]?[n]:[])).forEach((t=>{const a=e[t].runUuid,o=Object.values(n[t]).filter((e=>(0,k.oD)(e.key))),r=Object.keys(u).filter((e=>void 0===u[e]?o.map((e=>L(e))).includes(e):u[e])).map((e=>B(e)));S((0,l.hD)(a,o,r)).then((()=>{i()})).catch((e=>{const t=e instanceof F.s?e.getMessageField():e.message;w.A.displayGlobalErrorNotification(t)})).finally((()=>{y(!1),_(!1)}))}))},disabled:0===Object.keys(u).length,loading:x,children:(0,h.Y)(c.A,{id:"dl0TeT",defaultMessage:"Save"})})]})})]})]}),(0,h.Y)(T,{isOpen:m,setIsOpen:g,selectedRunsExistingTagKeys:(0,R.uniq)(b.concat(C).map((e=>B(e).key))),addNewTag:e=>{I(e)}})]})},P=({children:e})=>(0,h.Y)(h.FK,{children:e}),O=s.memo((({viewState:e,runsData:t,searchFacetsState:n,refreshRuns:a})=>{const{runsSelected:r}=e,{runInfos:i,tagsList:l}=t,{lifecycleFilter:u}=n,p=(0,m.Zp)(),{theme:f}=(0,o.u)(),[v,_]=(0,s.useState)(!1),[x,y]=(0,s.useState)(!1),[b,w]=(0,s.useState)(!1),[Y,C]=(0,s.useState)(""),A=(0,s.useCallback)((()=>{const e=Object.keys(r),t=i.find((t=>t.runUuid===e[0]));t&&(C(t.runName),w(!0))}),[i,r]),k=(0,s.useCallback)((()=>{const e=Object.keys(r),t=i.filter((({runUuid:t})=>e.includes(t))).map((({experimentId:e})=>e));p(g.Ay.getCompareRunPageRoute(e,[...new Set(t)].sort()))}),[p,i,r]),M=(0,s.useCallback)((()=>_(!0)),[]),S=(0,s.useCallback)((()=>y(!0)),[]),E=(0,s.useCallback)((()=>_(!1)),[]),D=(0,s.useCallback)((()=>y(!1)),[]),T=(0,s.useCallback)((()=>w(!1)),[]),R=Object.values(e.runsSelected).filter(Boolean).length,F=R>0,L=1===R,B=R>1;return(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:H.controlBar,children:[(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_110","data-testid":"run-rename-button",onClick:A,disabled:!L,children:(0,h.Y)(c.A,{id:"oWPgX7",defaultMessage:"Rename"})}),u===d.gy.ACTIVE?(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_117","data-testid":"runs-delete-button",disabled:!F,onClick:M,danger:!0,children:(0,h.Y)(c.A,{id:"3Rb4sG",defaultMessage:"Delete"})}):null,u===d.gy.DELETED?(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_126","data-testid":"runs-restore-button",disabled:!F,onClick:S,children:(0,h.Y)(c.A,{id:"Potju2",defaultMessage:"Restore"})}):null,(0,h.Y)("div",{css:H.buttonSeparator}),(0,h.Y)(P,{children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_136","data-testid":"runs-compare-button",disabled:!B,onClick:k,children:(0,h.Y)(c.A,{id:"RaGnOQ",defaultMessage:"Compare"})})}),(0,h.Y)("div",{css:H.buttonSeparator}),(0,h.Y)(N,{runsSelected:r,runInfos:i,tagsList:l,refreshRuns:a})]}),(0,h.Y)(I,{runsSelected:r,onCloseRenameRunModal:T,onCloseDeleteRunModal:E,onCloseRestoreRunModal:D,showDeleteRunModal:v,showRestoreRunModal:x,showRenameRunModal:b,renamedRunName:Y,refreshRuns:a})]})})),H={buttonSeparator:e=>({borderLeft:`1px solid ${e.colors.border}`,marginLeft:e.spacing.xs,marginRight:e.spacing.xs,height:"100%"}),controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center"})};var U=n(91144),V=n(88464),G=n(14343),K=n(24947);var z={name:"bjn8wh",styles:"position:relative"};const j=s.memo((e=>{const{runInfos:t}=e,{theme:n}=(0,o.u)(),{refreshRuns:i}=e,u=(0,K.z)(),[p,m]=(0,s.useState)(0),[g,f]=(0,s.useState)(0);return(0,s.useEffect)((()=>{f(0),m((()=>Date.now()))}),[t]),(0,s.useEffect)((()=>{if(!p)return;const e=setInterval((()=>{const e={experimentIds:u,filter:`attributes.start_time > ${p}`,maxResults:d.ks};(0,l.bc)(e).then((e=>{var t;const n=(null===(t=e.runs)||void 0===t?void 0:t.length)||0;f(n)}))}),d.a0);return()=>clearInterval(e)}),[p,u]),(0,h.FD)("div",{css:z,children:[g>0&&(0,h.Y)("div",{title:d.ks>g?`${g}`:d.ks-1+"+",css:(0,a.AH)({position:"absolute",top:0,right:0,transform:"translate(50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",width:g>9?28:20,height:20,borderRadius:10,border:`1px solid ${n.colors.white}`,backgroundColor:n.colors.lime,color:n.colors.white,fontSize:10,fontWeight:"bold",userSelect:"none",zIndex:1},""),children:d.ks>g?g:d.ks-1+"+"}),(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{id:"ag05Pe",defaultMessage:"Refresh"}),useAsLabel:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrefreshbutton.tsx_123",onClick:i,"data-testid":"runs-refresh-button",icon:(0,h.Y)(r.SyncIcon,{})})})]})})),$=(0,v.Ng)((e=>({runInfos:e.entities.runInfosByUuid})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.runInfosByUuid===t.entities.runInfosByUuid})(j);var q=n(3679);const W=()=>(0,h.FD)("div",{className:"search-input-tooltip-content",children:[(0,h.Y)(c.A,{id:"kIlkgf",defaultMessage:"Search runs using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,h.Y)("b",{children:"WHERE"})}})," ",(0,h.Y)(c.A,{id:"nYKZy4",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,h.Y)("a",{href:i.Lm,target:"_blank",rel:"noopener noreferrer",children:e})}}),(0,h.Y)("br",{}),(0,h.Y)(c.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,h.Y)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,h.Y)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,h.Y)("br",{}),"\u2022 params.model = 'tree'",(0,h.Y)("br",{}),"\u2022 attributes.run_name = 'my run'",(0,h.Y)("br",{}),"\u2022 tags.`mlflow.user` = 'myUser'",(0,h.Y)("br",{}),"\u2022 metric.f1_score > 0.9 AND params.model = 'tree'",(0,h.Y)("br",{}),"\u2022 dataset.name IN ('dataset1', 'dataset2')",(0,h.Y)("br",{}),"\u2022 attributes.run_id IN ('a1b2c3d4', 'e5f6g7h8')",(0,h.Y)("br",{}),"\u2022 tags.model_class LIKE 'sklearn.linear_model%'"]});var J=n(96070);const Q=["run_id","run_name","status","artifact_uri","user_id","start_time","end_time","created"].map((e=>({value:`attributes.${e}`}))),Z=(e,t)=>[...new Set([...e,...t])],X=e=>e.flatMap((e=>Object.keys(e))),ee=({runsData:e,...t})=>{const n=(0,s.useRef)({metricNames:[],paramNames:[],tagNames:[]}),a=(0,s.useMemo)((()=>{const t=n.current,a=(o=e,{metricNames:Z((r=t).metricNames,o.metricKeyList),paramNames:Z(r.paramNames,o.paramKeyList),tagNames:(0,J.tY)(Z(X(r.tagNames),X(o.tagsList)))});var o,r;return n.current=a,(0,J.$K)(a,Q)}),[e]);return(0,h.Y)(q.M,{...t,baseOptions:a,tooltipContent:(0,h.Y)(W,{}),placeholder:'metrics.rmse < 1 and params.model = "tree"',useQuickFilter:(0,U.ey)()})};var te=n(18476),ne=n(27193),ae=n(56412);var oe={name:"1voqbl3",styles:"margin-top:0;font-weight:normal"};const re=({isOpen:e,closeModal:t,experimentId:n})=>{const{theme:s}=(0,o.u)(),i=s.isDarkMode?"duotoneDark":"light",l=`\nimport mlflow\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.datasets import load_diabetes\nfrom sklearn.ensemble import RandomForestRegressor\n\n# set the experiment id\nmlflow.set_experiment(experiment_id="${n}")\n\nmlflow.autolog()\ndb = load_diabetes()\n\nX_train, X_test, y_train, y_test = train_test_split(db.data, db.target)\n\n# Create and train models.\nrf = RandomForestRegressor(n_estimators=100, max_depth=6, max_features=3)\nrf.fit(X_train, y_train)\n\n# Use the model to make predictions on the test dataset.\npredictions = rf.predict(X_test)\n`.trimStart(),d=`\nimport mlflow\nimport openai\nimport os\nimport pandas as pd\n\n# you must set the OPENAI_API_KEY environment variable\nassert (\n  "OPENAI_API_KEY" in os.environ\n), "Please set the OPENAI_API_KEY environment variable."\n\n# set the experiment id\nmlflow.set_experiment(experiment_id="${n}")\n\nsystem_prompt = (\n  "The following is a conversation with an AI assistant."\n  + "The assistant is helpful and very friendly."\n)\n\n# start a run\nmlflow.start_run()\nmlflow.log_param("system_prompt", system_prompt)\n\n# Create a question answering model using prompt engineering\n# with OpenAI. Log the model to MLflow Tracking\nlogged_model = mlflow.openai.log_model(\n    model="gpt-4o-mini",\n    task=openai.chat.completions,\n    artifact_path="model",\n    messages=[\n        {"role": "system", "content": system_prompt},\n        {"role": "user", "content": "{question}"},\n    ],\n)\n\n# Evaluate the model on some example questions\nquestions = pd.DataFrame(\n    {\n        "question": [\n            "How do you create a run with MLflow?",\n            "How do you log a model with MLflow?",\n            "What is the capital of France?",\n        ]\n    }\n)\nmlflow.evaluate(\n    model=logged_model.model_uri,\n    model_type="question-answering",\n    data=questions,\n)\nmlflow.end_run()\n`.trimStart(),u=18*(Math.min(...[l,d].map((e=>e.split("\n").length)))+1);return(0,h.Y)(M.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_createnotebookrunmodal.tsx_111",visible:e,onCancel:t,onOk:t,footer:(0,h.Y)("div",{css:(0,a.AH)({display:"flex",gap:s.spacing.sm,justifyContent:"flex-end"},""),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_createnotebookrunmodal.tsx_117",onClick:t,type:"primary",children:(0,h.Y)(c.A,{id:"ttyLD4",defaultMessage:"Okay"})})}),title:(0,h.FD)("div",{children:[(0,h.Y)(o.T.Title,{level:2,css:(0,a.AH)({marginTop:s.spacing.sm,marginBottom:s.spacing.xs},""),children:(0,h.Y)(c.A,{id:"iF1UfU",defaultMessage:"New run using notebook"})}),(0,h.Y)(o.T.Hint,{css:oe,children:"Run this code snippet in a notebook or locally, to create an experiment run"})]}),children:(0,h.FD)(r.LegacyTabs,{children:[(0,h.Y)(r.LegacyTabPane,{tab:(0,h.Y)(c.A,{id:"71dHIO",defaultMessage:"Classical ML"}),children:(0,h.Y)(ne.z7,{style:{padding:"5px",height:u},language:"python",theme:i,actions:(0,h.Y)("div",{style:{marginTop:s.spacing.sm,marginRight:s.spacing.md},children:(0,h.Y)(ae.i,{copyText:l,showLabel:!1,icon:(0,h.Y)(r.CopyIcon,{})})}),children:l})},"classical-ml"),(0,h.Y)(r.LegacyTabPane,{tab:(0,h.Y)(c.A,{id:"xBVMQz",defaultMessage:"LLM"}),children:(0,h.Y)(ne.z7,{style:{padding:"5px",height:u},language:"python",theme:i,actions:(0,h.Y)("div",{style:{marginTop:s.spacing.sm,marginRight:s.spacing.md},children:(0,h.Y)(ae.i,{copyText:d,showLabel:!1,icon:(0,h.Y)(r.CopyIcon,{})})}),children:d})},"llm")]})})};var se=n(30214),ie=n(4877),le=n.n(ie),de=n(63528),ce=n(50361);class ue extends F.s{getGatewayErrorMessage(){var e,t,n,a;return(null===(e=this.textJson)||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message)||(null===(n=this.textJson)||void 0===n?void 0:n.message)||(null===(a=this.textJson)||void 0===a?void 0:a.toString())||this.text}}var pe;class me{static createEvaluationTextPayload(e,t){switch(t){case ce.W8.LLM_V1_COMPLETIONS:return{prompt:e};case ce.W8.LLM_V1_CHAT:return{messages:[{content:e,role:"user"}]};case ce.W8.LLM_V1_EMBEDDINGS:throw new Error(`Unsupported served LLM model task "${t}"!`);default:throw new Error(`Unknown served LLM model task "${t}"!`)}}}pe=me,me.queryMLflowDeploymentEndpointRoute=async(e,t)=>{le()(e.mlflowDeployment,"Trying to call a MLflow deployment route without a deployment_url");const{inputText:n}=t,a={...pe.createEvaluationTextPayload(n,e.task),...t.parameters};return de.x.gatewayProxyPost({gateway_path:e.mlflowDeployment.endpoint_url.substring(1),json_data:a})},me.queryModelGatewayRoute=async(e,t)=>{if("mlflow_deployment_endpoint"===e.type){le()(e.mlflowDeployment,"Trying to call a serving endpoint route without an endpoint");return((e,t)=>{if(t===ce.W8.LLM_V1_COMPLETIONS){var n,a;const t=e,o=null===(n=t.choices)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.text,{usage:r}=t;if(o&&r)return{text:o,metadata:{total_tokens:r.total_tokens,output_tokens:r.completion_tokens,input_tokens:r.prompt_tokens}}}if(t===ce.W8.LLM_V1_CHAT){var o,r,s;const t=e,n=null===(o=t.choices)||void 0===o||null===(r=o[0])||void 0===r||null===(s=r.message)||void 0===s?void 0:s.content,{usage:a}=t;if(n&&a)return{text:n,metadata:{total_tokens:a.total_tokens,output_tokens:a.completion_tokens,input_tokens:a.prompt_tokens}}}throw new Error(`Unrecognizable AI gateway response metadata "${e.usage}"!`)})(await pe.queryMLflowDeploymentEndpointRoute(e,t),e.task)}throw new Error("Unknown route type")};var ge=n(54346),he=n(65795),fe=n(69526);const ve=[{type:"slider",name:"temperature",string:(0,fe.zR)({id:"Jrri/Y",defaultMessage:"Temperature"}),helpString:(0,fe.zR)({id:"5yWkFd",defaultMessage:"Increase or decrease the confidence level of the language model."}),max:1,min:0,step:.01},{type:"input",name:"max_tokens",string:(0,fe.zR)({id:"qR3llD",defaultMessage:"Max tokens"}),helpString:(0,fe.zR)({id:"cEwSR8",defaultMessage:"Maximum number of language tokens returned from evaluation."}),max:65536,min:1,step:1},{type:"list",name:"stop",string:(0,fe.zR)({id:"FAfPOl",defaultMessage:"Stop Sequences"}),helpString:(0,fe.zR)({id:"J2XCE/",defaultMessage:"Specify sequences that signal the model to stop generating text."})}],_e={temperature:.01,max_tokens:100},xe=()=>{const[e,t]=(0,s.useState)(_e),n=(0,s.useCallback)(((e,n)=>{t((t=>({...t,[e]:n})))}),[]);return{parameterDefinitions:ve,parameters:e,updateParameter:n}};var ye=n(20193);var be={name:"1d3w5wq",styles:"width:100%"};const we=({parameterValue:e,updateParameter:t,disabled:n})=>{const[i,l]=(0,s.useState)(""),{theme:d}=(0,o.u)();return(0,R.isArray)(e)?(0,h.FD)(h.FK,{children:[(0,h.Y)("div",{css:(0,a.AH)({marginTop:d.spacing.xs,marginBottom:d.spacing.sm},""),children:e.map(((n,a)=>(0,h.Y)(r.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptparameters.tsx_28",closable:!0,onClose:()=>{t(e.filter((e=>e!==n)))},children:n},a)))}),(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptparameters.tsx_39",allowClear:!0,css:be,disabled:n,onChange:e=>l(e.target.value),value:i,onKeyDown:n=>{"Enter"===n.key&&i.trim()&&(t((0,R.uniq)([...e,i])),l(""))}})]}):null};var Ye={name:"151f7v8",styles:"span{font-weight:normal;}"};const Ce=({disabled:e=!1,parameters:t,updateParameter:n})=>{const{parameterDefinitions:s}=xe(),{theme:i}=(0,o.u)();return(0,h.FD)("div",{css:(0,a.AH)({marginBottom:i.spacing.lg},""),children:[(0,h.Y)(r.FormUI.Label,{css:(0,a.AH)({marginBottom:i.spacing.md},""),children:(0,h.Y)(c.A,{id:"KADUUT",defaultMessage:"Model parameters"})}),s.map((o=>{var s;return(0,h.Y)("div",{css:(0,a.AH)({marginBottom:i.spacing.md},""),children:(0,h.FD)(h.FK,{children:[(0,h.FD)(r.FormUI.Label,{htmlFor:o.name,css:Ye,children:[(0,h.Y)(c.A,{...o.string}),(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{...o.helpString}),placement:"right",children:(0,h.Y)(M.I,{css:(0,a.AH)({marginLeft:i.spacing.sm,verticalAlign:"text-top",color:i.colors.textSecondary},"")})})]}),(0,h.Y)(r.FormUI.Hint,{}),"temperature"===o.name&&(0,h.Y)(ye.o,{"data-testid":o.name,disabled:e,max:o.max,min:o.min,step:o.step,value:t[o.name]||0,onChange:e=>n(o.name,e)}),"input"===o.type&&(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptparameters.tsx_107","data-testid":o.name,type:"number",disabled:e,max:o.max,min:o.min,step:o.step,value:t[o.name]||0,onChange:e=>n(o.name,parseInt(e.target.value,10))}),"list"===o.type&&(0,h.Y)(we,{parameterValue:null!==(s=t[o.name])&&void 0!==s?s:[],disabled:e,updateParameter:e=>n(o.name,e)})]})},o.name)}))]})},Ae=" }}",Ie="new_variable",ke=()=>{const[e,t]=(0,s.useState)(he.KH),n=(0,s.useRef)(),a=(0,s.useCallback)((()=>{t((e=>{const t=((e=[])=>{if(!e.includes(Ie))return Ie;const t=(0,R.max)(e.map((e=>{var t;return parseInt((null===(t=e.match(/new_variable_(\d+)/))||void 0===t?void 0:t[1])||"1",10)})))||1;return`${Ie}_${t+1}`})((0,he.rl)(e)),a=`${e} {{ ${t}${Ae}`;return requestAnimationFrame((()=>{const e=n.current;e&&(e.focus(),e.setSelectionRange(a.length-t.length-3,a.length-3))})),a}))}),[t]);return{savePromptTemplateInputRef:(0,s.useCallback)((e=>{var t;n.current=null===e||void 0===e||null===(t=e.resizableTextArea)||void 0===t?void 0:t.textArea}),[]),handleAddVariableToTemplate:a,promptTemplate:e,updatePromptTemplate:t}},Me=(0,fe.zR)({id:"lM0z8k",defaultMessage:"The following variable names contain spaces which is disallowed: {invalidNames}"}),Se=({violations:e})=>{const{namesWithSpaces:t}=e,{formatMessage:n}=(0,V.A)();return(0,h.Y)(h.FK,{children:t.length>0&&(0,h.Y)(o.T.Text,{color:"warning",size:"sm","aria-label":n(Me,{invalidNames:t.join(", ")}),children:(0,h.Y)(c.A,{...Me,values:{invalidNames:(0,h.Y)(h.FK,{children:t.map((e=>(0,h.Y)("code",{children:e},e)))})}})})})},Ee=[{prompt:["You are a marketing consultant for a technology company. Develop a marketing strategy report for {{ company_name }} aiming to {{ company_goal }}"],variables:[{name:"company_name",value:"XYZ Company"},{name:"company_goal",value:"Increase top-line revenue"}]},{prompt:['You are a helpful and friendly customer support chatbot. Answer the users question "{{ user_question }}" clearly, based on the following documentation: {{ documentation }}'],variables:[{name:"user_question",value:"Is MLflow open source?"},{name:"documentation",value:"MLflow is an open source platform for managing the end-to-end machine learning lifecycle."}]},{prompt:['Summarize the given text "{{ text }}" into a concise and coherent summary, capturing the main ideas and key points. Make sure that the summary does not exceed {{ word_count }} words.'],variables:[{name:"text",value:"Although C. septempunctata larvae and adults mainly eat aphids, they also feed on Thysanoptera, Aleyrodidae, on the larvae of Psyllidae and Cicadellidae, and on eggs and larvae of some beetles and butterflies. There are one or two generations per year. Adults overwinter in ground litter in parks, gardens and forest edges and under tree bark and rocks. C. septempunctata has a broad ecological range, generally living wherever there are aphids for it to eat. This includes, amongst other biotopes, meadows, fields, Pontic\u2013Caspian steppe, parkland, gardens, Western European broadleaf forests and mixed forests. In the United Kingdom, there are fears that the seven-spot ladybird is being outcompeted for food by the harlequin ladybird. An adult seven-spot ladybird may reach a body length of 7.6\u201312.7 mm (0.3\u20130.5 in). Their distinctive spots and conspicuous colours warn of their toxicity, making them unappealing to predators. The species can secrete a fluid from joints in their legs which gives them a foul taste. A threatened ladybird may both play dead and secrete the unappetising substance to protect itself. The seven-spot ladybird synthesizes the toxic alkaloids, N-oxide coccinelline and its free base precoccinelline; depending on sex and diet, the spot size and coloration can provide some indication of how toxic the individual insect is to potential predators."},{name:"word_count",value:"75"}]},{prompt:["Generate a list of ten titles for my book. The book is about {{ topic }}. Each title should be between {{ word_range }} words long.","### Examples of great titles ###","{{ examples }}"],variables:[{name:"topic",value:"my journey as an adventurer who has lived an unconventional life, meeting many different personalities and finally finding peace in gardening."},{name:"word_range",value:"two to five"},{name:"examples",value:'"Long walk to freedom", "Wishful drinking", "I know why the caged bird sings"'}]},{prompt:["Generate a SQL query from a user\u2019s question, using the information from the table.","Question: {{ user_question }}","Table Information: {{ table_information }}"],variables:[{name:"user_question",value:"Which product generated the most sales this month?"},{name:"table_information",value:"CREATE TABLE Sales (SaleID INT PRIMARY KEY, ProductID INT, SaleDate DATE, CustomerID INT, QuantitySold INT, UnitPrice DECIMAL(10, 2));"}]}],{TextArea:De}=S.I,Te=({isOpen:e,closeExamples:t,closeModal:n,updatePromptTemplate:s,updateInputVariableValue:i})=>{const{theme:l}=(0,o.u)();return(0,h.Y)(M.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodalexamples.tsx_42",verticalSizing:"maxed_out",visible:e,onCancel:n,title:(0,h.Y)("div",{children:(0,h.FD)(o.T.Title,{level:2,css:(0,a.AH)({marginTop:l.spacing.sm,marginBottom:l.spacing.xs},""),children:[(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodalexamples.tsx_48",css:(0,a.AH)({marginRight:l.spacing.sm,marginBottom:l.spacing.sm},""),icon:(0,h.Y)(r.ArrowLeftIcon,{}),onClick:t}),(0,h.Y)(c.A,{id:"KzC+38",defaultMessage:"Prompt template examples"})]})}),dangerouslySetAntdProps:{width:1200},children:Ee.map((e=>(0,h.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:l.spacing.md},""),children:[(0,h.FD)("div",{css:(0,a.AH)({boxSizing:"border-box",border:`1px solid ${l.colors.actionDefaultBorderDefault}`,borderRadius:l.legacyBorders.borderRadiusMd,background:l.colors.backgroundPrimary,padding:l.spacing.md,margin:0,overflow:"hidden",display:"flex",flexDirection:"column",gap:`${l.spacing.xs}px`},""),children:[(0,h.FD)(o.T.Title,{level:4,children:[(0,h.Y)(c.A,{id:"GDzD7I",defaultMessage:"Prompt Template"}),(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodalexamples.tsx_90",type:"tertiary",size:"small",style:{float:"right"},onClick:()=>(e=>{s(e.prompt.join("\n")),e.variables.forEach((({name:e,value:t})=>{i(e,t)})),t()})(e),children:(0,h.Y)(c.A,{id:"Np53PR",defaultMessage:"Try this template"})})]}),e.prompt.map((e=>(0,h.Y)(o.T.Paragraph,{children:e},e))),(0,h.Y)("div",{css:(0,a.AH)({marginTop:l.spacing.xs,marginBottom:l.spacing.xs,borderTop:`1px solid ${l.colors.border}`,opacity:.5},"")}),e.variables.map((({name:e,value:t})=>(0,h.FD)("div",{children:[(0,h.Y)(o.T.Title,{level:4,children:e}),(0,h.Y)(o.T.Paragraph,{children:t})]},e)))]}),(0,h.Y)(M.S,{})]},e.prompt.join("\n"))))})};const{TextArea:Re}=S.I;var Fe={name:"1ll9bqd",styles:"cursor:default"};const Le=({evaluationMetadata:e,isEvaluating:t,isOutputDirty:n,evaluationOutput:i,evaluationError:l,evaluateButtonTooltip:d,disabled:u,onEvaluateClick:p,onCancelClick:m})=>{const{theme:g}=(0,o.u)(),f=(0,s.useMemo)((()=>e?t?null:(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:g.spacing.xs,alignItems:"center"},""),children:[he.Ef in e&&(0,h.FD)(o.T.Hint,{size:"sm",children:[Math.round(Number(e[he.Ef]))," ms","MLFLOW_total_tokens"in e?",":""]}),he.jC in e&&(0,h.Y)(o.T.Hint,{size:"sm",children:(0,h.Y)(c.A,{id:"/nPZbt",defaultMessage:"{totalTokens} total tokens",values:{totalTokens:e[he.jC]}})})]}):null),[e,t,g]);return(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:(0,a.AH)({marginBottom:g.spacing.md},""),children:[(0,h.Y)(r.LegacyTooltip,{title:d,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationcreatepromptrunoutput.tsx_85","data-testid":"button-evaluate",icon:(0,h.Y)(r.PlayIcon,{}),onClick:p,disabled:u,loading:t,children:(0,h.Y)(c.A,{id:"72uGpl",defaultMessage:"Evaluate"})})}),t&&(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationcreatepromptrunoutput.tsx_99","data-testid":"button-cancel",icon:(0,h.Y)(r.StopIcon,{}),onClick:m,css:(0,a.AH)({marginLeft:g.spacing.sm},""),children:(0,h.Y)(c.A,{id:"CTEh+b",defaultMessage:"Cancel"})})]}),(0,h.FD)(r.FormUI.Label,{children:[(0,h.Y)(c.A,{id:"ydoHrJ",defaultMessage:"Output"}),n&&(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{id:"gc+GrI",defaultMessage:"Model, input data or prompt have changed since last evaluation of the output"}),children:(0,h.Y)(o.W,{css:(0,a.AH)({marginLeft:g.spacing.xs},"")})})]}),(0,h.Y)(r.FormUI.Hint,{children:(0,h.Y)(c.A,{id:"JtQQMn",defaultMessage:"This is the output generated by the LLM using the prompt template and input values defined above."})}),!l&&t&&(0,h.Y)("div",{css:(0,a.AH)({marginTop:g.spacing.sm},""),children:(0,h.Y)(r.TableSkeleton,{lines:5})}),!t&&(0,h.Y)(Re,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationcreatepromptrunoutput.tsx_144",rows:5,css:Fe,"data-testid":"prompt-output",value:i,readOnly:!0}),!t&&l&&(0,h.Y)(r.FormUI.Message,{message:l,type:"error"}),(0,h.Y)("div",{css:(0,a.AH)({marginTop:g.spacing.sm},""),children:f})]})};var Be=n(53660),Ne=n(17111),Pe=n(7204);const Oe=({routeName:e,routeType:t,compiledPrompt:n,inputValues:a,parameters:o,outputColumn:r,rowKey:s,run:i})=>(({routeName:e,routeType:t,compiledPrompt:n,inputValues:a,parameters:o,outputColumn:r,rowKey:s,run:i})=>async(r,l)=>{const{modelGateway:d}=l();d.modelGatewayRoutesLoading.loading||0!==Object.keys(d.modelGatewayRoutes).length||await r(He());const c=l().modelGateway.modelGatewayRoutes[`${t}:${e}`];if(!c){const t=`MLflow deployment endpoint ${e} does not exist anymore!`;throw w.A.logErrorAndNotifyUser(t),new Error(t)}const u={inputText:n,parameters:o};return r({type:"EVALUATE_PROMPT_TABLE_VALUE",payload:me.queryModelGatewayRoute(c,u),meta:{inputValues:a,run:i,compiledPrompt:n,rowKey:s,startTime:performance.now()}})})({...{routeName:e,compiledPrompt:n,inputValues:a,parameters:o,outputColumn:r,rowKey:s,run:i},routeType:t}),He=()=>async e=>e({type:"SEARCH_MLFLOW_DEPLOYMENTS_MODEL_ROUTES",payload:de.x.gatewayProxyGet({gateway_path:"api/2.0/endpoints/"}),meta:{id:(0,Pe.yk)()}}),Ue=e=>e instanceof ue?e.getGatewayErrorMessage():e instanceof F.s?e.getMessageField():e.message;const{TextArea:Ve}=S.I;var Ge={name:"1voqbl3",styles:"margin-top:0;font-weight:normal"},Ke={name:"t691yx",styles:"display:grid;grid-template-columns:300px 1fr;gap:48px"},ze={name:"1d3w5wq",styles:"width:100%"},je={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};const $e=({isOpen:e,closeModal:t,runBeingDuplicated:n,visibleRuns:i=[],refreshRuns:d})=>{const[u]=(0,K.z)(),{theme:p}=(0,o.u)(),{parameters:m,updateParameter:g}=xe(),[,f]=(0,Be.an)(),[_,x]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[Y,C]=(0,s.useState)(!1),[A,I]=(0,s.useState)(!1),[k,E]=(0,s.useState)(null),[D,T]=(0,s.useState)(""),[F,L]=(0,s.useState)({}),[B,N]=(0,s.useState)(!1),[P,O]=(0,s.useState)(!1),H=(0,s.useRef)(null),U=(0,v.wA)();(0,s.useEffect)((()=>{U(He()).catch((e=>{w.A.logErrorAndNotifyUser((null===e||void 0===e?void 0:e.message)||e)}))}),[U]);const G=(0,V.A)(),{updateInputVariables:z,inputVariables:j,inputVariableValues:$,updateInputVariableValue:q,inputVariableNameViolations:W,clearInputVariableValues:J}=(()=>{const[e,t]=(0,s.useState)((0,he.rl)("")),[n,a]=(0,s.useState)({namesWithSpaces:[]}),[o,r]=(0,s.useState)(he.kU),i=(0,s.useCallback)((()=>r({})),[]),l=(0,s.useMemo)((()=>(0,R.debounce)((e=>{t((t=>{const n=(0,he.rl)(e);return(0,R.isEqual)(n,t)?t:n})),a((0,he.Eb)(e))}),250)),[]),d=(0,s.useCallback)(((e,t)=>{r((n=>({...n,[e]:t})))}),[]),c=(0,s.useMemo)((()=>(0,R.fromPairs)(Object.entries(o).filter((([t])=>e.includes(t))))),[o,e]);return{updateInputVariables:l,inputVariables:e,inputVariableValues:c,updateInputVariableValue:d,inputVariableNameViolations:n,clearInputVariableValues:i}})(),{handleAddVariableToTemplate:Q,savePromptTemplateInputRef:Z,promptTemplate:X,updatePromptTemplate:ee}=ke();(0,s.useEffect)((()=>{e&&!n&&b((0,ge.Lr)())}),[e,n]),(0,s.useEffect)((()=>{z(X)}),[X,z]),(0,s.useEffect)((()=>{if(n){const{promptTemplate:e,routeName:t,parameters:a}=(0,he.vC)(n);(0,he.xP)(n),e&&ee(e),a.temperature&&g("temperature",a.temperature),a.max_tokens&&g("max_tokens",a.max_tokens),t&&x(t),T(""),N(!1);const o=(0,ge.gK)(n.runName,(0,R.compact)(i.map((({runName:e})=>e))));b(o),J()}}),[n,J,g,ee,i]);const te=(0,v.d4)((({modelGateway:e})=>e.modelGatewayRoutes)),ne=(0,s.useMemo)((()=>(0,R.sortBy)(Object.values(te),"name")),[te]),ae=(0,v.d4)((({modelGateway:e})=>e.modelGatewayRoutesLoading.loading));(0,s.useEffect)((()=>{D&&N(!0)}),[$,X,m,_]);const oe=(0,s.useCallback)((()=>{const e=te[_],t=Math.random().toString(36);if(H.current=t,!e)throw new Error("No model route found!");E(null),I(!0);const n=(0,he.TG)(X,$),a=performance.now();me.queryModelGatewayRoute(e,{inputText:n,parameters:m}).then((e=>{if(H.current===t){const{text:n,metadata:o}=e,r=performance.now()-a;T(n);const s={...o,latency:r},i=Object.entries(s).reduce(((e,[t,n])=>({...e,[`MLFLOW_${t}`]:n})),{});L(i),N(!1),I(!1),H.current===t&&(H.current=null)}})).catch((e=>{const n=Ue(e),a=G.formatMessage({id:"nyHcAz",defaultMessage:'MLflow deployment returned the following error: "{errorMessage}"'},{errorMessage:n});w.A.displayGlobalErrorNotification(a),I(!1),E(a),H.current===t&&(H.current=null)}))}),[$,te,m,X,_,G]),re=(0,s.useCallback)((()=>{H.current&&(I(!1),H.current=null)}),[I]),se=G.formatMessage({id:"AyceYA",defaultMessage:"Served LLM model"}),ie=G.formatMessage({id:"pTDM+x",defaultMessage:"Select LLM model endpoint"}),le=X.trim().length>0,de=(0,s.useMemo)((()=>j.every((e=>{var t;return null===(t=$[e])||void 0===t?void 0:t.trim()}))),[j,$]),ce=y.trim().length>0,ue=_&&le&&de,pe=Boolean(_&&le&&de&&D&&!B&&j.length>0&&ce&&!k),fe=(0,s.useMemo)((()=>_?le?de?D?B?G.formatMessage({id:"/K6wBr",defaultMessage:"Input data or prompt template have changed since last evaluation of the output"}):0===j.length?G.formatMessage({id:"z+0t/R",defaultMessage:"You need to define at least one input variable"}):ce?null:G.formatMessage({id:"dYbJha",defaultMessage:"Please provide run name"}):G.formatMessage({id:"gUhc5g",defaultMessage:"You need to evaluate the resulting output first"}):G.formatMessage({id:"flJNTA",defaultMessage:"You need to provide values for all defined inputs"}):G.formatMessage({id:"dHAuWp",defaultMessage:"You need to provide a prompt template"}):G.formatMessage({id:"4HbEVz",defaultMessage:"You need to select a served model endpoint using dropdown first"})),[de,j.length,G,B,D,le,_,ce]),ve=(0,s.useMemo)((()=>_?le?de?null:G.formatMessage({id:"flJNTA",defaultMessage:"You need to provide values for all defined inputs"}):G.formatMessage({id:"dHAuWp",defaultMessage:"You need to provide a prompt template"}):G.formatMessage({id:"4HbEVz",defaultMessage:"You need to select a served model endpoint using dropdown first"})),[de,G,le,_]);if(e&&P)return(0,h.Y)(Te,{isOpen:e&&P,closeExamples:()=>O(!1),closeModal:t,updatePromptTemplate:ee,updateInputVariableValue:q});return(0,h.FD)(M.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_541",verticalSizing:"maxed_out",visible:e,onCancel:t,onOk:t,footer:(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:p.spacing.sm,justifyContent:"flex-end"},""),children:[(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_589",onClick:t,children:(0,h.Y)(c.A,{id:"mqTFL+",defaultMessage:"Cancel"})}),(0,h.Y)(r.LegacyTooltip,{title:fe,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_596",onClick:()=>{var e,n;C(!0);const a=null===(e=te[_])||void 0===e?void 0:e.name,o={...m,route_type:null===(n=te[_])||void 0===n?void 0:n.type},r=(0,he.TG)(X,$);U((0,l.$v)({experimentId:u,promptTemplate:X,modelInput:r,modelParameters:o,modelRouteName:a,promptParameters:$,modelOutput:D,runName:y,modelOutputParameters:F})).then((()=>{d(),t(),C(!1),f("ARTIFACT")})).catch((e=>{w.A.logErrorAndNotifyUser((null===e||void 0===e?void 0:e.message)||e),C(!1)}))},"data-testid":"button-create-run",type:"primary",disabled:!pe,children:(0,h.Y)(c.A,{id:"8Uwpjw",defaultMessage:"Create run"})})})]}),title:(0,h.FD)("div",{children:[(0,h.Y)(o.T.Title,{level:2,css:(0,a.AH)({marginTop:p.spacing.sm,marginBottom:p.spacing.xs},""),children:(0,h.Y)(c.A,{id:"sLhmy7",defaultMessage:"New run"})}),(0,h.Y)(o.T.Hint,{css:Ge,children:"Create a new run using a large-language model by giving it a prompt template and model parameters"})]}),dangerouslySetAntdProps:{width:1200},children:[(0,h.FD)("div",{css:Ke,children:[(0,h.FD)("div",{children:[(0,h.Y)(r.FormUI.Label,{htmlFor:"selected_model",css:(0,a.AH)({marginBottom:p.spacing.sm},""),children:se}),(0,h.Y)("div",{css:(0,a.AH)({marginBottom:p.spacing.lg,display:"flex",alignItems:"center"},""),children:(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_597",label:se,modal:!1,value:_?[(_e=_,_e.includes(":")?_e.split(":")[1]:_e)]:void 0,children:[(0,h.Y)(r.DialogComboboxTrigger,{id:"selected_model",css:ze,allowClear:!1,placeholder:ie,withInlineLabel:!1}),(0,h.Y)(r.DialogComboboxContent,{loading:ae,maxHeight:400,matchTriggerWidth:!0,children:!ae&&(0,h.Y)(r.DialogComboboxOptionList,{children:(0,h.Y)(r.DialogComboboxOptionListSearch,{autoFocus:!0,children:ne.map((e=>(0,h.FD)(r.DialogComboboxOptionListSelectItem,{value:e.key,onChange:e=>{x(e)},checked:_===e.key,children:[e.name,e.mlflowDeployment&&(0,h.Y)(r.DialogComboboxHintRow,{children:e.mlflowDeployment.model.name})]},e.key)))})})})]})}),_&&(0,h.Y)(Ce,{parameters:m,updateParameter:g}),(0,h.Y)("div",{css:qe.formItem,children:(0,h.FD)(h.FK,{children:[(0,h.FD)(r.FormUI.Label,{htmlFor:"new_run_name",children:[(0,h.Y)(c.A,{id:"Zqj4VA",defaultMessage:"New run name"}),!y.trim()&&(0,h.Y)(r.FormUI.Message,{type:"error",message:G.formatMessage({id:"dYbJha",defaultMessage:"Please provide run name"})})]}),(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_638",id:"new_run_name","data-testid":"run-name-input",required:!0,value:y,onChange:e=>b(e.target.value)})]})})]}),(0,h.FD)("div",{children:[(0,h.FD)("div",{css:qe.formItem,children:[(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:je,children:[(0,h.Y)(r.FormUI.Label,{htmlFor:"prompt_template",children:(0,h.Y)(c.A,{id:"uBTAtY",defaultMessage:"Prompt Template"})}),(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_695",onClick:()=>O(!0),style:{marginLeft:"auto"},size:"small",children:(0,h.Y)(c.A,{id:"13vJft",defaultMessage:"View Examples"})})]}),(0,h.Y)(r.FormUI.Hint,{children:(0,h.Y)(c.A,{id:"gC2Kxm",defaultMessage:"Give instructions to the model. Use '{{ }}' or the \"Add new variable\" button to add variables to your prompt."})})]}),(0,h.Y)(Ve,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_678",id:"prompt_template",autoSize:{minRows:3},"data-testid":"prompt-template-input",value:X,onChange:e=>ee(e.target.value),ref:Z}),(0,h.Y)(Se,{violations:W})]}),j.map((e=>(0,h.Y)("div",{css:qe.formItem,children:(0,h.FD)(h.FK,{children:[(0,h.Y)(r.FormUI.Label,{htmlFor:e,children:(0,h.Y)("span",{children:e})}),(0,h.Y)(Ve,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_694",id:e,autoSize:!0,value:$[e]?$[e]:"",onChange:t=>q(e,t.target.value)})]})},e))),(0,h.Y)("div",{css:(0,a.AH)({marginBottom:2*p.spacing.md},""),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationcreatepromptrunmodal.tsx_736",icon:(0,h.Y)(r.PlusIcon,{}),onClick:Q,children:(0,h.Y)(c.A,{id:"71hvMu",defaultMessage:"Add new variable"})})}),(0,h.Y)(Le,{evaluateButtonTooltip:ve,evaluationMetadata:F,evaluationOutput:D,disabled:!ue,isEvaluating:A,isOutputDirty:B,onCancelClick:re,onEvaluateClick:oe,evaluationError:k})]})]}),Y&&(0,h.Y)("div",{css:(0,a.AH)({inset:0,backgroundColor:p.colors.overlayOverlay,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1},""),children:(0,h.Y)(o.S,{})})]});var _e},qe={formItem:{marginBottom:16}},We=s.createContext({createNewRun:()=>{}}),Je=({children:e,visibleRuns:t,refreshRuns:n})=>{const[a,o]=(0,s.useState)(!1),[r,i]=(0,s.useState)(null),l=(0,s.useMemo)((()=>({createNewRun:e=>{o(!0),i(e||null)}})),[]);return(0,h.FD)(We.Provider,{value:l,children:[e,(0,U.Ii)()&&(0,h.Y)($e,{visibleRuns:t,isOpen:a,closeModal:()=>o(!1),runBeingDuplicated:r,refreshRuns:n})]})},Qe=()=>(0,s.useContext)(We);var Ze=n(3546),Xe=n(83028),et=n(21879);const tt=s.memo((({searchFacetsState:e,experimentId:t,runsData:n,viewState:i,updateViewState:l,onDownloadCsv:u,requestError:p,additionalControls:m,refreshRuns:g,viewMaximized:f,autoRefreshEnabled:x=!1,hideEmptyCharts:y=!1,areRunsGrouped:b=!1})=>{const w=(0,Ze.Px)(),[Y,C]=(0,Be.an)(),A=(0,et.e)(),I=(0,K.z)().length>1,{startTime:k,lifecycleFilter:S,datasetsFilter:E,searchFilter:D}=e,T=Y,R=(0,V.A)(),{createNewRun:F}=Qe(),[L,B]=(0,s.useState)(!1),{theme:N}=(0,o.u)(),P=(0,s.useMemo)((()=>(0,_.XU)(R)),[R]),O=S===d.gy.ACTIVE?R.formatMessage({id:"0pdAuV",defaultMessage:"Active"}):R.formatMessage({id:"yJpGwW",defaultMessage:"Deleted"}),H=R.formatMessage({id:"+fb25b",defaultMessage:"Time created"}),z=void 0===T||"ARTIFACT"===T,j=(0,v.d4)((e=>e.entities.datasetsByExperimentId[t])),q=void 0!==j;return(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:N.spacing.sm,justifyContent:"space-between",[N.responsive.mediaQueries.xs]:{flexDirection:"column"}},""),children:[(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:N.spacing.sm,alignItems:"center",flexWrap:"wrap"},""),children:[("ARTIFACT"!==Y||(0,U.GV)())&&(0,h.FD)(r.SegmentedControlGroup,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_184",name:"runs-view-mode",value:Y,onChange:({target:e})=>{const{value:t}=e;Y!==t&&C(t)},children:[(0,h.Y)(r.SegmentedControlButton,{value:"TABLE",icon:(0,h.Y)(M.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_201",content:R.formatMessage({id:"AxyQXa",defaultMessage:"Table view"}),children:(0,h.Y)(M.L,{})})}),(0,h.Y)(r.SegmentedControlButton,{value:"CHART",icon:(0,h.Y)(M.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_211",content:R.formatMessage({id:"Q6oN2U",defaultMessage:"Chart view"}),children:(0,h.Y)(r.ChartLineIcon,{})})}),(0,U.GV)()&&(0,h.Y)(r.SegmentedControlButton,{value:"ARTIFACT",disabled:b,icon:(0,h.Y)(M.T,{componentId:"mlflow.experiment_page.mode.artifact",content:b?R.formatMessage({id:"YOp3/x",defaultMessage:"Unavailable when runs are grouped"}):R.formatMessage({id:"LTbwXS",defaultMessage:"Artifact evaluation"}),children:(0,h.Y)(r.TableIcon,{})})})]}),(0,h.Y)(ee,{runsData:n,searchFilter:D,onSearchFilterChange:e=>{w({searchFilter:e})},onClear:()=>{w((0,Xe.G)())},requestError:p}),(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_217",label:H,value:"ALL"!==k?[P[k]]:[],children:[(0,h.Y)(r.DialogComboboxTrigger,{allowClear:"ALL"!==k,onClear:()=>{w({startTime:"ALL"})},"data-test-id":"start-time-select-dropdown"}),(0,h.Y)(r.DialogComboboxContent,{children:(0,h.Y)(r.DialogComboboxOptionList,{children:Object.keys(P).map((e=>(0,h.Y)(r.DialogComboboxOptionListSelectItem,{checked:e===k,title:P[e],"data-test-id":`start-time-select-${e}`,value:e,onChange:()=>{w({startTime:e})},children:P[e]},e)))})})]}),(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_248",label:R.formatMessage({id:"iLFoPb",defaultMessage:"State"}),value:[O],children:[(0,h.Y)(r.DialogComboboxTrigger,{allowClear:!1,"data-testid":"lifecycle-filter"}),(0,h.Y)(r.DialogComboboxContent,{children:(0,h.FD)(r.DialogComboboxOptionList,{children:[(0,h.Y)(r.DialogComboboxOptionListSelectItem,{checked:S===d.gy.ACTIVE,"data-testid":"active-runs-menu-item",value:d.gy.ACTIVE,onChange:()=>{w({lifecycleFilter:d.gy.ACTIVE})},children:(0,h.Y)(c.A,{id:"0pdAuV",defaultMessage:"Active"})},d.gy.ACTIVE),(0,h.Y)(r.DialogComboboxOptionListSelectItem,{checked:S===d.gy.DELETED,"data-testid":"deleted-runs-menu-item",value:d.gy.DELETED,onChange:()=>{w({lifecycleFilter:d.gy.DELETED})},children:(0,h.Y)(c.A,{id:"yJpGwW",defaultMessage:"Deleted"})},d.gy.DELETED)]})})]}),(0,h.Y)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_289",label:R.formatMessage({id:"IZ95jb",defaultMessage:"Datasets"}),value:E.map((e=>e.name)),multiSelect:!0,children:(0,h.FD)(r.LegacyTooltip,{title:!q&&(0,h.Y)(c.A,{id:"v8UFxB",defaultMessage:"No datasets were recorded for this experiment's runs."}),children:[(0,h.Y)(r.DialogComboboxTrigger,{allowClear:!0,onClear:()=>w({datasetsFilter:[]}),"data-test-id":"datasets-select-dropdown",showTagAfterValueCount:1,disabled:!q}),q&&(0,h.Y)(r.DialogComboboxContent,{maxHeight:600,children:(0,h.Y)(r.DialogComboboxOptionList,{children:(0,h.Y)(r.DialogComboboxOptionListSearch,{children:j.map((e=>(0,h.FD)(r.DialogComboboxOptionListCheckboxItem,{checked:E.some((t=>(0,te.R)(t,e))),title:e.name,"data-test-id":`dataset-dropdown-${e.name}`,value:e.name,onChange:()=>(e=>{const t=E.some((t=>(0,te.R)(t,e)))?E.filter((t=>!(0,te.R)(t,e))):[...E,e];w({datasetsFilter:t})})(e),children:[e.name," (",e.digest,")"," ",e.context&&(0,h.Y)(r.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_329",css:(0,a.AH)({textTransform:"capitalize",marginRight:N.spacing.xs},""),children:e.context})]},e.name+e.digest+e.context)))})})})]})}),m]}),(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:N.spacing.sm,alignItems:"flex-start"},""),children:[(0,h.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_338",icon:(0,h.Y)(r.OverflowIcon,{}),"aria-label":R.formatMessage({id:"E5gbt5",defaultMessage:"More options"})})}),(0,h.FD)(r.DropdownMenu.Content,{children:[(0,h.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_362",className:"csv-button",onClick:u,children:[(0,h.Y)(r.DropdownMenu.IconWrapper,{children:(0,h.Y)(r.DownloadIcon,{})}),`Download ${n.runInfos.length} runs`]}),(0,h.Y)(r.DropdownMenu.Separator,{}),(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_382",checked:y,onClick:()=>A((e=>({...e,hideEmptyCharts:!e.hideEmptyCharts}))),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)(c.A,{id:"lZPbxb",defaultMessage:"Hide charts with no data"})]}),(0,U.Hn)()&&(0,h.FD)(h.FK,{children:[(0,h.Y)(r.DropdownMenu.Separator,{}),(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_402",checked:x,onClick:()=>A((e=>({...e,autoRefreshEnabled:!e.autoRefreshEnabled}))),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)(c.A,{id:"YamyaP",defaultMessage:"Auto-refresh"})]})]})]})]}),(0,h.Y)(re,{isOpen:L,closeModal:()=>B(!1),experimentId:t}),z&&(0,h.Y)(r.LegacyTooltip,{title:R.formatMessage({id:"eZOxx1",defaultMessage:"Toggle the preview sidepane"}),useAsLabel:!0,children:(0,h.Y)(G.k,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_403",pressed:i.previewPaneVisible,icon:(0,h.Y)(r.SidebarIcon,{}),onClick:()=>l({previewPaneVisible:!i.previewPaneVisible})})}),!(0,U.Hn)()&&(0,h.Y)($,{refreshRuns:g}),!I&&(0,h.FD)(r.DropdownMenu.Root,{children:[(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_415",icon:(0,h.Y)(r.PlusIcon,{}),children:(0,h.Y)(c.A,{id:"PEYesH",defaultMessage:"New run"})})}),(0,h.FD)(r.DropdownMenu.Content,{children:[(0,U.Ii)()&&(0,h.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_461",onSelect:()=>F(),children:[" ",(0,h.Y)(c.A,{id:"UmwZQv",defaultMessage:"using Prompt Engineering"}),(0,h.Y)(se.W,{})]}),(0,h.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_469",onSelect:()=>B(!0),children:[" ",(0,h.Y)(c.A,{id:"vNRmQa",defaultMessage:"using Notebook"})]})]})]})]})]})}));var nt=n(35286);const at="GROUP",ot=(0,_.GF)(at,d.RO.ATTRIBUTES),rt=(0,_.GF)(at,d.RO.PARAMS),st=(0,_.GF)(at,d.RO.METRICS),it=(0,_.GF)(at,d.RO.TAGS),lt=(e,t)=>e.filter((e=>e.toLowerCase().includes(t.toLowerCase()))),dt=(e,t)=>{if(!t)return e;const n=e.toLowerCase().indexOf(t.toLowerCase()),a=e.substring(0,n),o=e.substring(n,n+t.length),r=e.substring(n+t.length);return n>-1?(0,h.FD)("span",{children:[a,(0,h.Y)("strong",{children:o}),r]}):e},ct=s.memo((({runsData:e,columnSelectorVisible:t,onChangeColumnSelectorVisible:n,selectedColumns:i})=>{const l=(0,et.e)(),u=(0,K.z)(),[p,m]=(0,s.useState)(""),{theme:g}=(0,o.u)(),f=(0,s.useRef)(null),v=(0,s.useRef)(null),x=(0,s.useRef)(null),y=(0,s.useMemo)((()=>(e=>{const t=[d.qo.USER,d.qo.SOURCE,d.qo.VERSION,d.qo.MODELS,d.qo.DESCRIPTION];return e&&t.unshift(d.qo.EXPERIMENT_NAME),t.unshift(d.qo.DATASET),t})(u.length>1)),[u.length]),b=(0,s.useCallback)((e=>l((t=>{const n=e(t.selectedColumns),a=Array.from(new Set(n));return{...t,selectedColumns:a}}))),[l]),Y=(0,s.useMemo)((()=>w.A.getVisibleTagKeyList(e.tagsList)),[e]),C=(0,s.useMemo)((()=>({[d.RO.ATTRIBUTES]:y.map((e=>(0,_.GF)(d.RO.ATTRIBUTES,e))),[d.RO.PARAMS]:e.paramKeyList.map((e=>(0,_.GF)(d.RO.PARAMS,e))),[d.RO.METRICS]:e.metricKeyList.map((e=>(0,_.GF)(d.RO.METRICS,e))),[d.RO.TAGS]:Y.map((e=>(0,_.GF)(d.RO.TAGS,e)))})),[e,y,Y]),A=(0,s.useMemo)((()=>{const t=[],n=lt(y,p),a=lt(e.paramKeyList,p),o=lt(e.metricKeyList,p),r=lt(Y,p);return n.length&&t.push({key:ot,title:"Attributes",children:n.map((e=>({key:(0,_.GF)(d.RO.ATTRIBUTES,e),title:dt(e,p)})))}),o.length&&t.push({key:st,title:`Metrics (${o.length})`,children:o.map((e=>{var t;const n=nt.g[e];return{key:(0,_.GF)(d.RO.METRICS,e),title:dt(null!==(t=null===n||void 0===n?void 0:n.displayName)&&void 0!==t?t:e,p)}}))}),a.length&&t.push({key:rt,title:`Parameters (${a.length})`,children:a.map((e=>({key:(0,_.GF)(d.RO.PARAMS,e),title:dt(e,p)})))}),r.length&&t.push({key:it,title:`Tags (${r.length})`,children:r.map((e=>({key:(0,_.GF)(d.RO.TAGS,e),title:e})))}),t}),[y,p,e,Y]),I=(0,s.useCallback)(((e,t)=>{b(e?e=>e.filter((e=>!t.includes(e))):e=>[...e,...t])}),[b]),k=(0,s.useCallback)(((e,t)=>{b(t?t=>t.filter((t=>t!==e)):t=>[...t,e])}),[b]);(0,s.useEffect)((()=>{t&&(m(""),requestAnimationFrame((()=>{var e,t;null===v||void 0===v||null===(e=v.current)||void 0===e||e.scrollTo(0,0),null===(t=f.current)||void 0===t||t.focus({preventScroll:!0}),x.current&&x.current.scrollIntoView({block:"nearest",behavior:"smooth"})})))}),[t]);const M=(0,s.useCallback)(((e,{node:{key:t,checked:n}})=>{if((0,_.tG)(t.toString(),at)){const e=(0,_.dz)(t.toString(),at),a=C[e];a&&I(n,lt(a,p))}else k(t.toString(),n)}),[C,I,k,p]),E=(0,s.useCallback)((e=>{if("ArrowDown"===e.key){const e=(null===(t=v.current)||void 0===t?void 0:t.querySelector('[role="tree"] input'))||null;e&&e.focus()}var t}),[]),D=(0,h.FD)("div",{css:(0,a.AH)({backgroundColor:g.colors.backgroundPrimary,width:400,border:"1px solid",borderColor:g.colors.border,[g.responsive.mediaQueries.xs]:{width:"100vw"}},""),onKeyDown:e=>{var t;"Escape"===e.key&&(n(!1),null===(t=x.current)||void 0===t||t.focus())},children:[(0,h.Y)("div",{css:e=>({padding:e.spacing.md}),children:(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscolumnselector.tsx_300",value:p,prefix:(0,h.Y)(S.S,{}),placeholder:"Search columns",allowClear:!0,ref:f,onChange:e=>{m(e.target.value)},onKeyDown:E})}),(0,h.Y)("div",{ref:v,css:(0,a.AH)({maxHeight:480,overflowY:"scroll",overflowX:"hidden",paddingBottom:g.spacing.md,"span[title]":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},[g.responsive.mediaQueries.xs]:{maxHeight:"calc(100vh - 100px)"}},""),children:(0,h.Y)(r.Tree,{"data-testid":"column-selector-tree",mode:"checkable",dangerouslySetAntdProps:{checkedKeys:i,onCheck:M},defaultExpandedKeys:[ot,rt,st,it],treeData:A})})]});return(0,h.Y)(r.Dropdown,{overlay:D,placement:"bottomLeft",trigger:["click"],visible:t,onVisibleChange:n,children:(0,h.FD)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscolumnselector.tsx_315",ref:x,style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",icon:(0,h.Y)(r.ColumnsIcon,{}),children:[(0,h.Y)(c.A,{id:"ny+fBZ",defaultMessage:"Columns"})," ",(0,h.Y)(r.ChevronDownIcon,{})]})})}));var ut=n(72069),pt=n(62862),mt=n(12772);const gt=(0,fe.YK)({minimum:{id:"iT8ODo",defaultMessage:"Minimum"},maximum:{id:"au61Yy",defaultMessage:"Maximum"},average:{id:"/LfvdB",defaultMessage:"Average"},attributes:{id:"cy9EfG",defaultMessage:"Attributes"},tags:{id:"LEiN8m",defaultMessage:"Tags"},params:{id:"i9OADf",defaultMessage:"Params"},dataset:{id:"RtKhwd",defaultMessage:"Dataset"},noParams:{id:"Q73eXs",defaultMessage:"No params"},noTags:{id:"jHWRLw",defaultMessage:"No tags"},aggregationTooltip:{id:"fKx4kG",defaultMessage:"Aggregation: {value}"},noResults:{id:"aaVp/T",defaultMessage:"No results"}});var ht={name:"9q39xd",styles:"min-width:32px"},ft={name:"o5v4ro",styles:"max-height:400px;overflow-y:scroll"};const vt=({runsData:e,onChange:t,groupBy:n,useGroupedValuesInCharts:i,onUseGroupedValuesInChartsChange:l})=>{const d=(0,V.A)(),u=(0,s.useRef)(null),p=(0,s.useRef)(null),m=(0,s.useRef)(null),g=(0,s.useRef)(null),f=d.formatMessage(gt.minimum),v=d.formatMessage(gt.maximum),_=d.formatMessage(gt.average),x=d.formatMessage(gt.dataset),y=(0,s.useMemo)((()=>(0,R.uniq)((0,R.values)(e.tagsList).flatMap((e=>(0,R.keys)(e).filter((e=>!e.startsWith(k.nt))))))),[e.tagsList]),{aggregateFunction:b=mt.it.Average,groupByKeys:w=[]}=n||{},Y={min:f,max:v,average:_}[b],{theme:C}=(0,o.u)(),[A,I]=(0,s.useState)("");(0,s.useEffect)((()=>{requestAnimationFrame((()=>{g.current.focus()}))}),[]);const M=y.filter((e=>e.toLowerCase().includes(A.toLowerCase()))),E=e.paramKeyList.filter((e=>e.toLowerCase().includes(A.toLowerCase()))),D=(0,s.useMemo)((()=>!(0,R.isEmpty)((0,R.compact)(e.datasetsList))),[e.datasetsList])&&x.toLowerCase().includes(A.toLowerCase()),T=M.length>0||E.length>0||D,F=(0,s.useCallback)(((e,n,a)=>{if(a){const a=[...w];a.some((t=>t.mode===e&&t.groupByData===n))||a.push({mode:e,groupByData:n}),t({aggregateFunction:b,groupByKeys:a})}else{const a=w.filter((t=>!(t.mode===e&&t.groupByData===n)));if(!a.length)return void t(null);t({aggregateFunction:b,groupByKeys:a})}}),[b,w,t]);return(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:C.spacing.xs,padding:C.spacing.sm},""),children:[(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_191",value:A,onChange:e=>I(e.target.value),prefix:(0,h.Y)(S.S,{}),placeholder:"Search",autoFocus:!0,ref:g,onKeyDown:e=>{if("ArrowDown"!==e.key&&"Tab"!==e.key)"Escape"!==e.key&&e.stopPropagation();else{const e=u.current||p.current||m.current;null===e||void 0===e||e.focus()}}}),(0,h.FD)(r.DropdownMenu.Root,{children:[(0,h.Y)(r.LegacyTooltip,{placement:"right",title:(0,h.Y)(c.A,{...gt.aggregationTooltip,values:{value:Y||b}}),children:(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_168",icon:(0,h.Y)(r.GearIcon,{}),css:ht,"aria-label":"Change aggregation function"})})}),(0,h.FD)(r.DropdownMenu.Content,{align:"start",side:"right",children:[(0,U.Bh)()&&(0,h.FD)(h.FK,{children:[(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_233",disabled:!w.length,checked:i,onCheckedChange:l,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),"Use grouping from the runs table in charts"]}),(0,h.Y)(r.DropdownMenu.Separator,{})]}),(0,h.FD)(r.DropdownMenu.RadioGroup,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_244",value:b,onValueChange:e=>{if((0,R.values)(mt.it).includes(e)){const a=e,o={...n,aggregateFunction:a};t(o)}},children:[(0,h.FD)(r.DropdownMenu.RadioItem,{disabled:!w.length,value:mt.it.Min,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),f]},mt.it.Min),(0,h.FD)(r.DropdownMenu.RadioItem,{disabled:!w.length,value:mt.it.Max,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),v]},mt.it.Max),(0,h.FD)(r.DropdownMenu.RadioItem,{disabled:!w.length,value:mt.it.Average,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),_]},mt.it.Average)]})]})]})]}),(0,h.FD)(r.DropdownMenu.Group,{css:ft,children:[D&&(0,h.FD)(h.FK,{children:[(0,h.Y)(r.DropdownMenu.Label,{children:(0,h.Y)(c.A,{...gt.attributes})}),x.toLowerCase().includes(A.toLowerCase())&&(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_280",checked:(0,pt.sd)(n,mt.uq.Dataset,"dataset"),ref:u,onCheckedChange:e=>F(mt.uq.Dataset,"dataset",e),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),x]},(0,pt._p)(mt.uq.Dataset,"dataset",b)),(0,h.Y)(r.DropdownMenu.Separator,{})]}),M.length>0&&(0,h.FD)(h.FK,{children:[(0,h.Y)(r.DropdownMenu.Label,{children:(0,h.Y)(c.A,{...gt.tags})}),M.map(((e,t)=>{const a=(0,pt._p)(mt.uq.Tag,e,b);return(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_302",checked:(0,pt.sd)(n,mt.uq.Tag,e),ref:0===t?p:void 0,onCheckedChange:t=>F(mt.uq.Tag,e,t),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),e]},a)})),!y.length&&(0,h.FD)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_314",disabled:!0,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{})," ",(0,h.Y)(c.A,{...gt.noTags})]}),(0,h.Y)(r.DropdownMenu.Separator,{})]}),E.length>0&&(0,h.FD)(h.FK,{children:[(0,h.Y)(r.DropdownMenu.Label,{children:(0,h.Y)(c.A,{...gt.params})}),E.map(((e,t)=>{const a=(0,pt._p)(mt.uq.Param,e,b);return(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_330",checked:(0,pt.sd)(n,mt.uq.Param,e),ref:0===t?m:void 0,onCheckedChange:t=>F(mt.uq.Param,e,t),children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),e]},a)})),!e.paramKeyList.length&&(0,h.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_342",disabled:!0,children:(0,h.Y)(c.A,{...gt.noParams})})]}),!T&&(0,h.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_349",disabled:!0,children:(0,h.Y)(c.A,{...gt.noResults})})]})]})};var _t={name:"taqmwb",styles:"margin-left:4px;margin-right:0"};const xt=s.memo((({runsData:e,groupBy:t,isLoading:n,onChange:s,useGroupedValuesInCharts:i,onUseGroupedValuesInChartsChange:l})=>{const{theme:d}=(0,o.u)(),u=(0,pt.Zp)(t)||{aggregateFunction:mt.it.Average,groupByKeys:[]},p=u&&!(0,R.isEmpty)(u.groupByKeys);return(0,h.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.FD)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_306",icon:(0,h.Y)(r.ListBorderIcon,{}),style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",endIcon:(0,h.Y)(r.ChevronDownIcon,{}),children:[p?(0,h.Y)(c.A,{id:"AFI74W",defaultMessage:"Group by: {value}",values:{value:u.groupByKeys[0].groupByData}}):(0,h.Y)(c.A,{id:"fjM/KK",defaultMessage:"Group by"}),u.groupByKeys.length>1&&(0,h.FD)(r.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_426",css:_t,children:["+",u.groupByKeys.length-1]}),t&&(0,h.Y)(S.X,{"aria-hidden":"false",css:(0,a.AH)({color:d.colors.textPlaceholder,fontSize:d.typography.fontSizeSm,marginLeft:d.spacing.sm,":hover":{color:d.colors.actionTertiaryTextHover}},""),role:"button",onClick:()=>{s(null)},onPointerDownCapture:e=>{e.stopPropagation()}})]})}),(0,h.Y)(r.DropdownMenu.Content,{children:n?(0,h.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_436",children:(0,h.Y)(o.S,{})}):(0,h.Y)(vt,{groupBy:u,onChange:s,runsData:e,onUseGroupedValuesInChartsChange:l,useGroupedValuesInCharts:i})})]})}));var yt=n(45653);var bt={name:"1kxd8xu",styles:"max-height:400px;overflow-y:auto"},wt={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"};const Yt=({sortOptions:e,orderByKey:t,orderByAsc:n,onOptionSelected:i})=>{const{theme:l}=(0,o.u)(),d=(0,Ze.Px)(),u=(0,et.e)(),p=(0,s.useRef)(null),[m,g]=(0,s.useState)(""),f=(0,s.useRef)(null),v=(0,s.useMemo)((()=>e.filter((e=>e.label.toLowerCase().includes(m.toLowerCase())))),[e,m]),_=e=>{d({orderByAsc:e}),i()};return(0,s.useEffect)((()=>{requestAnimationFrame((()=>{var e;null===(e=p.current)||void 0===e||e.focus()}))}),[]),(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:(0,a.AH)({padding:`${l.spacing.sm}px ${l.spacing.lg/2}px ${l.spacing.sm}px`,width:"100%",display:"flex",gap:l.spacing.xs},""),children:[(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunssortselectorv2.tsx_97",prefix:(0,h.Y)(S.S,{}),value:m,type:"search",onChange:e=>g(e.target.value),placeholder:"Search",autoFocus:!0,ref:p,onKeyDown:e=>{var t;"ArrowDown"!==e.key&&"Tab"!==e.key?e.stopPropagation():null===(t=f.current)||void 0===t||t.focus()}}),(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:l.spacing.xs},""),children:[(0,h.Y)(G.k,{pressed:!n,icon:(0,h.Y)(r.ArrowDownIcon,{}),componentId:"mlflow.experiment_page.sort_select_v2.sort_desc",onClick:()=>_(!1),"aria-label":"Sort descending","data-testid":"sort-select-desc"}),(0,h.Y)(G.k,{pressed:n,icon:(0,h.Y)(r.ArrowUpIcon,{}),componentId:"mlflow.experiment_page.sort_select_v2.sort_asc",onClick:()=>_(!0),"aria-label":"Sort ascending","data-testid":"sort-select-asc"})]})]}),(0,h.FD)(r.DropdownMenu.Group,{css:bt,children:[v.map(((e,n)=>(0,h.FD)(r.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunssortselectorv2.tsx_137",onClick:()=>(e=>{d({orderByKey:e}),u((t=>t.selectedColumns.includes(e)?t:{...t,selectedColumns:[...t.selectedColumns,e]})),i()})(e.value),checked:e.value===t,"data-test-id":`sort-select-${e.label}`,ref:0===n?f:void 0,children:[(0,h.Y)(r.DropdownMenu.ItemIndicator,{}),(0,h.Y)("span",{css:wt,children:(0,yt.fx)(e.label,50)})]},e.value))),!v.length&&(0,h.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunssortselectorv2.tsx_151",disabled:!0,children:(0,h.Y)(c.A,{id:"EkUD0b",defaultMessage:"No results"})})]})]})};var Ct={name:"9q39xd",styles:"min-width:32px"};const At=s.memo((({metricKeys:e,paramKeys:t,orderByAsc:n,orderByKey:a})=>{const i=(0,V.A)(),[l,c]=(0,s.useState)(!1),{theme:u}=(0,o.u)(),p=(0,s.useMemo)((()=>Object.keys(d.Eg).map((e=>({label:d.Eg[e],value:d.T8[e]})))),[]),m=(0,s.useMemo)((()=>e.map((e=>{var t,n;const a=(0,_.GF)(d.RO.METRICS,e);return{label:null!==(t=null===(n=nt.g[e])||void 0===n?void 0:n.displayName)&&void 0!==t?t:e,value:a}}))),[e]),g=(0,s.useMemo)((()=>t.map((e=>({label:e,value:`${(0,_.GF)(d.RO.PARAMS,e)}`})))),[t]),f=(0,s.useMemo)((()=>[...p,...m,...g]),[p,m,g]),v=(0,s.useMemo)((()=>{const e=f.find((e=>e.value===a));let t=null===e||void 0===e?void 0:e.label;if(!t){const e=a.match(/^.+\.`(.+)`$/);e&&(t=e[1])}return`${i.formatMessage({id:"sKaamx",defaultMessage:"Sort"})}: ${t}`}),[f,i,a]);return(0,h.FD)(r.DropdownMenu.Root,{open:l,onOpenChange:c,modal:!1,children:[(0,h.Y)(r.DropdownMenu.Trigger,{"data-test-id":"sort-select-dropdown",asChild:!0,children:(0,h.Y)(o.B,{componentId:"mlflow.experiment_page.sort_select_v2.toggle",icon:n?(0,h.Y)(r.SortAscendingIcon,{}):(0,h.Y)(r.SortDescendingIcon,{}),css:Ct,"aria-label":v,endIcon:(0,h.Y)(r.ChevronDownIcon,{}),children:v})}),(0,h.Y)(r.DropdownMenu.Content,{minWidth:250,children:(0,h.Y)(Yt,{sortOptions:f,orderByKey:a,orderByAsc:n,onOptionSelected:()=>c(!1)})})]})})),It=s.memo((({runsData:e,viewState:t,updateViewState:n,searchFacetsState:i,experimentId:l,requestError:u,expandRows:p,updateExpandRows:m,refreshRuns:g,uiState:f,isLoading:v,isComparingExperiments:x})=>{var y;const[b,Y]=(0,Be.an)(),{paramKeyList:C,metricKeyList:A,tagsList:I}=e,{orderByAsc:k,orderByKey:M}=i,S=(0,et.e)(),E="TABLE"!==b,D="ARTIFACT"===b,{theme:T}=(0,o.u)(),R=C,F=A,L=w.A.getVisibleTagKeyList(I),B=(0,s.useCallback)((()=>(0,_.D1)(e,L,R,F)),[F,R,L,e]),N=(((e,t)=>{(0,s.useMemo)((()=>{let n=[];const a=[d.mh,d.KU];return n=[...Object.keys(d.Eg).reduce(((e,t)=>{const n=d.Eg[t];return a.forEach((a=>{e.push({label:n,value:d.T8[t]+d.KE+a,order:a})})),e}),[]),...e.reduce(((e,t)=>(a.forEach((n=>{e.push({label:t,value:`${(0,_.GF)(d.RO.METRICS,t)}${d.KE}${n}`,order:n})})),e)),[]),...t.reduce(((e,t)=>(a.forEach((n=>{e.push({label:t,value:`${(0,_.GF)(d.RO.PARAMS,t)}${d.KE}${n}`,order:n})})),e)),[])],n}),[e,t])})(F,R),Object.values(t.runsSelected).filter(Boolean).length),P=N>1||1===N||N>0,H=!D,V=(0,s.useCallback)((e=>n({columnSelectorVisible:e})),[n]),G=(0,s.useCallback)((()=>m(!p)),[p,m]),K=(0,s.useMemo)((()=>e.datasetsList.some((e=>(null===e||void 0===e?void 0:e.length)>1))),[e]);return(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:T.spacing.sm,flexDirection:"column",marginTop:f.viewMaximized?void 0:T.spacing.sm,marginBottom:T.spacing.sm},""),children:[!(0,U.w7)()&&!x&&(0,h.Y)(ut.W,{hideBorder:!1,viewState:t,runsAreGrouped:Boolean(f.groupBy)}),P&&(0,h.Y)(O,{runsData:e,searchFacetsState:i,viewState:t,refreshRuns:g}),!P&&(0,h.Y)(tt,{onDownloadCsv:B,searchFacetsState:i,experimentId:l,viewState:t,updateViewState:n,runsData:e,requestError:u,refreshRuns:g,viewMaximized:f.viewMaximized,autoRefreshEnabled:f.autoRefreshEnabled,hideEmptyCharts:f.hideEmptyCharts,areRunsGrouped:Boolean(f.groupBy),additionalControls:(0,h.FD)(h.FK,{children:[(0,h.Y)(At,{orderByAsc:k,orderByKey:M,metricKeys:F,paramKeys:R}),!E&&(0,h.Y)(ct,{columnSelectorVisible:t.columnSelectorVisible,onChangeColumnSelectorVisible:V,runsData:e,selectedColumns:f.selectedColumns}),!E&&K&&(0,h.Y)(r.ToggleButton,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrols.tsx_175",onClick:G,children:(0,h.Y)(c.A,{id:"mRc7MY",defaultMessage:"Expand rows"})}),H&&(0,h.Y)(xt,{groupBy:f.groupBy,onChange:e=>{S((t=>({...t,groupBy:e})))},runsData:e,isLoading:v,useGroupedValuesInCharts:null===(y=f.useGroupedValuesInCharts)||void 0===y||y,onUseGroupedValuesInChartsChange:e=>{S((t=>({...t,useGroupedValuesInCharts:e})))}})]})})]})}));var kt=n(28940);class Mt{constructor(){this.runsSelected={},this.hiddenChildRunsSelected={},this.columnSelectorVisible=!1,this.previewPaneVisible=!1,this.artifactViewState={selectedTables:[],groupByCols:[],outputColumn:"",intersectingOnly:!1}}}var St=n(57368);const Et="FETCHED_RUN_NOTIFICATION_KEY",Dt=e=>{const{formatMessage:t}=(0,V.A)(),n=(0,s.useCallback)(((e,n)=>e===n?t({id:"KJbYrw",defaultMessage:"Loaded {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{childRuns:n}):t({id:"ziIhFQ",defaultMessage:"Loaded {allRuns} {allRuns, plural, =1 {run} other {runs}}, including {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{allRuns:e,childRuns:n})),[t]);return(0,s.useCallback)(((t,a)=>{if(Array.isArray(t)){const{allRuns:o,childRuns:r}=((e,t=[])=>{const n=e.filter((e=>!t.some((t=>t.runUuid===e.info.runUuid)))),a=n.filter((e=>{var t;const n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tags;return Array.isArray(n)&&n.some((e=>e.key===_.Ol&&Boolean(e.value)))}));return{allRuns:n.length,childRuns:a.length}})(t,a);if(r<1)return;e.close(Et),e.info({message:n(o,r),duration:3,placement:"bottomRight",key:Et})}}),[e,n])};var Tt=n(85343),Rt=n(28380),Ft=n(51293);const Lt=s.createContext({getMissingParams:()=>[],pendingDataLoading:{},getEvaluableRowCount:()=>0,evaluateCell:()=>{},evaluateAllClick:()=>{},runColumnsBeingEvaluated:[],canEvaluateInRunColumn:()=>!1,toggleExpandedHeader:()=>{},isHeaderExpanded:!1}),Bt=({tableData:e,outputColumn:t,children:n})=>{const a=(0,V.A)(),[o,r]=(0,s.useState)(!1),i=(0,s.useCallback)((()=>r((e=>!e))),[]),l=(0,s.useCallback)(((t,n)=>{if(!(0,he.o1)(t))return null;const a=e.find((e=>e.key===n));if(!a)return null;const{promptTemplate:o}=(0,he.vC)(t);if(!o)return null;return(0,he.rl)(o).filter((e=>!a.groupByCellValues[e]))}),[e]),d=(0,v.wA)(),{startEvaluatingRunColumn:c,stopEvaluatingRunColumn:u,runColumnsBeingEvaluated:p}=((e,t)=>{const n=(0,s.useRef)(e),a=(0,s.useRef)([]),o=(0,V.A)();(0,s.useEffect)((()=>{n.current=e}),[e]);const[r,i]=(0,s.useState)([]);(0,s.useEffect)((()=>{a.current=r}),[r]);const l=(0,v.wA)(),d=(0,s.useCallback)((e=>{const r=n.current,{parameters:s,promptTemplate:c,routeName:u,routeType:p}=(0,he.vC)(e);if(!c)return;const m=(0,he.rl)(c),g=r.find((t=>!t.cellValues[e.runUuid]&&((e,t)=>0===t.filter((t=>!e.groupByCellValues[t])).length)(t,m)));if(!g)return void i((t=>t.filter((t=>t!==e.runUuid))));const h=g.key,f=g.groupByCellValues;if(!c)return;const v=(0,he.TG)(c,f);u&&l(Oe({routeName:u,routeType:p,compiledPrompt:v,inputValues:f,outputColumn:t,rowKey:h,parameters:s,run:e})).then((()=>{a.current.includes(e.runUuid)&&d(e)})).catch((t=>{const n=Ue(t),a=o.formatMessage({id:"jI22Qu",defaultMessage:'Gateway returned the following error: "{errorMessage}"'},{errorMessage:n});w.A.logErrorAndNotifyUser(a),i((t=>t.filter((t=>t!==e.runUuid))))}))}),[l,t,o]),c=(0,s.useCallback)((e=>{i((t=>[...t,e.runUuid])),d(e)}),[d]),u=(0,s.useCallback)((e=>{i((t=>t.filter((t=>t!==e.runUuid))))}),[]);return{runColumnsBeingEvaluated:r,startEvaluatingRunColumn:c,stopEvaluatingRunColumn:u}})(e,t),m=(0,v.d4)((({evaluationData:e})=>e.evaluationPendingDataLoadingByRunUuid)),g=(0,s.useCallback)((e=>t===he.hR&&(0,he.o1)(e)),[t]),f=(0,s.useCallback)((t=>e.filter((e=>{if(e.cellValues[t.runUuid])return!1;const n=l(t,e.key);return 0===(null===n||void 0===n?void 0:n.length)})).length),[e,l]),_=(0,s.useCallback)((e=>{p.includes(e.runUuid)?u(e):c(e)}),[p,c,u]),x=(0,s.useCallback)(((n,o)=>{const r=e.find((({key:e})=>e===o));if(!r)return;const s=r.groupByCellValues,{parameters:i,promptTemplate:l,routeName:c,routeType:u}=(0,he.vC)(n);if(!l)return;const p=(0,he.TG)(l,s);if(c){d((()=>Oe({routeName:c,routeType:u,compiledPrompt:p,inputValues:s,outputColumn:t,rowKey:o,parameters:i,run:n}))()).catch((e=>{const t=Ue(e),n=a.formatMessage({id:"nyHcAz",defaultMessage:'MLflow deployment returned the following error: "{errorMessage}"'},{errorMessage:t});w.A.logErrorAndNotifyUser(n)}))}}),[e,d,t,a]),y=(0,s.useMemo)((()=>({getMissingParams:l,getEvaluableRowCount:f,evaluateCell:x,evaluateAllClick:_,pendingDataLoading:m,canEvaluateInRunColumn:g,runColumnsBeingEvaluated:p,isHeaderExpanded:o,toggleExpandedHeader:i})),[l,f,_,x,m,g,p,o,i]);return(0,h.Y)(Lt.Provider,{value:y,children:n})},Nt=()=>(0,s.useContext)(Lt);var Pt={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"},Ot={name:"lyel5l",styles:"font-size:0"},Ht={name:"1hetg88",styles:"max-width:300px"};const Ut=({run:e})=>{const{theme:t}=(0,o.u)(),{isHeaderExpanded:n}=Nt(),r=(0,he.vC)(e),s=(0,v.d4)((({modelGateway:e})=>{const t=`${r.routeType}:${r.routeName}`;return r.routeName?e.modelGatewayRoutes[t]:null}));if(!(0,he.o1)(e)||!r)return null;const{parameters:i,promptTemplate:l,routeName:d}=r,{stop:u=[]}=i;return(0,h.FD)("div",{css:(0,a.AH)({marginTop:t.spacing.xs,flex:1,display:"flex",flexDirection:"column",gap:t.spacing.sm,overflowX:"hidden",width:"100%"},""),children:[s&&"mlflowDeployment"in s&&s.mlflowDeployment&&(0,h.Y)(o.T.Hint,{children:s.mlflowDeployment.name}),n&&(0,h.FD)(h.FK,{children:[(0,h.Y)(o.T.Hint,{children:(0,h.Y)(c.A,{id:"HGBit9",defaultMessage:"Temperature: {temperature}",values:i})}),(0,h.Y)(o.T.Hint,{children:(0,h.Y)(c.A,{id:"6K04VZ",defaultMessage:"Max. tokens: {max_tokens}",values:i})}),u.length?(0,h.Y)(o.T.Hint,{css:Pt,children:(0,h.Y)(c.A,{id:"iC2Owx",defaultMessage:"Stop sequences: {stopSequences}",values:{stopSequences:null===u||void 0===u?void 0:u.join(", ")}})}):null,(0,h.Y)("div",{css:Ot,children:(0,h.FD)(o.ax.Root,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadermodelindicator.tsx_107",children:[(0,h.Y)(o.ax.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadermodelindicator.tsx_115",type:"link",size:"small",css:(0,a.AH)({fontSize:t.typography.fontSizeSm},""),children:(0,h.Y)(c.A,{id:"XX8+x1",defaultMessage:"View prompt template"})})}),(0,h.FD)(o.ax.Content,{css:Ht,children:[(0,h.Y)(o.ax.Arrow,{}),l]})]})})]})]})};var Vt=n(38243);var Gt={name:"1iwgvlm",styles:"flex-shrink:1;flex-grow:1;overflow:hidden"},Kt={name:"1kd7iwj",styles:"flex-shrink:0;flex-grow:1;display:flex;align-items:flex-end"};const zt=({run:e,onDatasetSelected:t})=>{var n;const{theme:r}=(0,o.u)(),i=(0,s.useCallback)((n=>t(n,e)),[t,e]);return(null===(n=e.datasets)||void 0===n?void 0:n.length)<1?null:(0,h.FD)("div",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs,overflow:"hidden"},""),children:[(0,h.Y)("div",{css:Gt,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheaderdatasetindicator.tsx_37",type:"link",onClick:()=>i(e.datasets[0]),children:(0,h.Y)(Vt.E,{datasetWithTags:e.datasets[0],displayTextAsLink:!0,css:(0,a.AH)({marginTop:r.spacing.xs/2,marginBottom:r.spacing.xs/2},"")})})}),e.datasets.length>1&&(0,h.Y)("div",{css:Kt,children:(0,h.FD)(o.ax.Root,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheaderdatasetindicator.tsx_51",modal:!1,children:[(0,h.Y)(o.ax.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheaderdatasetindicator.tsx_49",size:"small",style:{borderRadius:"8px",width:"40px"},children:(0,h.FD)(o.T.Text,{color:"secondary",children:["+",e.datasets.length-1]})})}),(0,h.Y)(o.ax.Content,{align:"start",children:e.datasets.slice(1).filter(Boolean).map((e=>(0,h.Y)("div",{css:(0,a.AH)({height:r.general.heightSm,display:"flex",alignItems:"center"},""),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheaderdatasetindicator.tsx_66",type:"link",onClick:()=>i(e),children:(0,h.Y)(Vt.E,{datasetWithTags:e,displayTextAsLink:!0})})},`${e.dataset.name}-${e.dataset.digest}`)))})]})})]})};var jt={name:"1on1b16",styles:"width:100%;height:100%;display:flex;flex-direction:column"};const $t=({children:e,className:t,groupHeaderContent:n=null})=>{const{theme:r}=(0,o.u)();return(0,h.FD)("div",{css:jt,children:[(0,h.Y)("div",{css:(0,a.AH)({width:"100%",flexBasis:40,display:"flex",alignItems:"center",padding:r.spacing.sm,borderBottom:`1px solid ${r.colors.borderDecorative}`},""),className:"header-group-cell",children:n}),(0,h.Y)("div",{css:(0,a.AH)({width:"100%",flex:1,display:"flex",justifyContent:"flex-start",alignItems:"flex-start",padding:r.spacing.xs,borderRight:`1px solid ${r.colors.borderDecorative}`},""),className:t,children:e})]})};var qt=n(70403),Wt=n(79432);var Jt={name:"8xhv84",styles:"width:100%;display:flex"},Qt={name:"ozd7xs",styles:"flex-shrink:0"},Zt={name:"82a6rk",styles:"flex:1"};const Xt=({run:e,onHideRun:t,onDuplicateRun:n,onDatasetSelected:i,groupHeaderContent:l=null})=>{const{theme:d}=(0,o.u)(),{getEvaluableRowCount:u,evaluateAllClick:p,runColumnsBeingEvaluated:f,canEvaluateInRunColumn:v}=Nt(),_=(0,V.A)(),x=u(e),y=(0,qt.LE)(),b=x>0,w=f.includes(e.runUuid),Y=(0,s.useMemo)((()=>b?b&&!w?_.formatMessage({id:"2gmOVq",defaultMessage:"Process {evaluableRowCount} rows without evaluation output"},{evaluableRowCount:x}):null:_.formatMessage({id:"7m2B5x",defaultMessage:"There are no evaluable rows within this column"})),[x,b,w,_]);return(0,h.FD)($t,{css:(0,a.AH)({justifyContent:"flex-start",padding:d.spacing.sm,paddingBottom:0,paddingTop:d.spacing.sm,flexDirection:"column",gap:d.spacing.xs/2,overflow:"hidden"},""),groupHeaderContent:l,children:[(0,h.FD)("div",{css:Jt,children:[(0,h.FD)("span",{css:(0,a.AH)({display:"flex",gap:d.spacing.sm,alignItems:"center"},""),children:[(0,h.Y)(Wt.E,{color:y(e.runUuid)}),(0,h.Y)(m.N_,{to:g.Ay.getRunPageRoute(e.experimentId||"",e.runUuid),target:"_blank",children:e.runName})]}),(0,h.Y)("div",{css:(0,a.AH)({flexBasis:d.spacing.sm,flexShrink:0},"")}),(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadercellrenderer.tsx_112",onClick:()=>t(e.runUuid),size:"small",icon:(0,h.Y)(r.VisibleIcon,{}),css:Qt}),(0,h.Y)("div",{css:Zt}),(0,U.Ii)()&&v(e)&&(0,h.FD)(h.FK,{children:[(0,h.Y)("div",{css:(0,a.AH)({flexBasis:d.spacing.sm},"")}),(0,h.Y)(r.LegacyTooltip,{title:Y,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadercellrenderer.tsx_118",disabled:!b,size:"small",onClick:()=>p(e),icon:w?(0,h.Y)(r.StopIcon,{}):(0,h.Y)(r.PlayIcon,{}),children:w?(0,h.Y)(c.A,{id:"plw4Kp",defaultMessage:"Stop evaluating"}):(0,h.Y)(c.A,{id:"JnIbS3",defaultMessage:"Evaluate all"})})})]}),(0,h.Y)("div",{css:(0,a.AH)({flexBasis:d.spacing.sm},"")}),(0,U.Ii)()&&(0,he.o1)(e)&&(0,h.FD)(r.DropdownMenu.Root,{modal:!1,children:[(0,h.Y)(r.DropdownMenu.Trigger,{asChild:!0,children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadercellrenderer.tsx_143",size:"small",icon:(0,h.Y)(r.OverflowIcon,{})})}),(0,h.Y)(r.DropdownMenu.Content,{children:(0,h.Y)(r.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationrunheadercellrenderer.tsx_150",onClick:()=>n(e),children:(0,h.Y)(c.A,{id:"1YGQOY",defaultMessage:"Duplicate run"})})})]})]}),(0,U.Ii)()&&(0,he.o1)(e)?(0,h.Y)(Ut,{run:e}):(0,h.Y)(zt,{run:e,onDatasetSelected:i})]})},en=({disabled:e,isLoading:t,run:n,rowKey:a})=>{const s=(0,he.o1)(n),{evaluateCell:i,getMissingParams:l}=Nt(),d=n&&l(n,a)||null;return d&&d.length>0?(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{id:"yAuDRt",defaultMessage:'Evaluation is not possible because values for the following inputs cannot be determined: {missingParamList}. Add input columns to the "group by" settings or use "Add row" button to define new parameter set.',values:{missingParamList:(0,h.Y)("code",{children:d.join(", ")})}}),children:(0,h.Y)(M.I,{})}):s?(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationcellevaluatebutton.tsx_59",loading:t,disabled:e,size:"small",onMouseDownCapture:e=>e.stopPropagation(),onClickCapture:e=>{e.stopPropagation(),i(n,a)},icon:(0,h.Y)(r.PlayIcon,{}),children:(0,h.Y)(h.FK,{children:"Evaluate"})}):(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{id:"MhtxHm",defaultMessage:"You cannot evaluate this cell, this run was not created using served LLM model route"}),children:(0,h.Y)(M.I,{})})};var tn=n(40555);const nn=s.memo((({text:e,highlight:t})=>{const{theme:n}=(0,o.u)();if(!t)return(0,h.Y)(h.FK,{children:e});const r=e.split(new RegExp(`(${t})`,"gi"));return(0,h.Y)(h.FK,{children:r.map(((e,o)=>(0,h.Y)(s.Fragment,{children:e.toLowerCase()===t.toLowerCase()?(0,h.Y)("span",{css:(0,a.AH)({backgroundColor:n.colors.yellow200},""),children:e}):e},o)))})}));var an={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"},on={name:"52b6nu",styles:"display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:7"},rn={name:"1jwcxx3",styles:"font-style:italic"};const sn=({value:e,context:t,isGroupByColumn:n,run:i,data:l})=>{var d,u;const{theme:p}=(0,o.u)(),{pendingDataLoading:m,canEvaluateInRunColumn:g}=Nt(),f=(0,v.d4)((({modelGateway:{modelGatewayRoutesLoading:e,modelGatewayRoutesLoadingLegacy:t}})=>e.loading)),_=i&&(null===(d=m[i.runUuid])||void 0===d?void 0:d[null===l||void 0===l?void 0:l.key]),x=i&&(null===(u=l.outputMetadataByRunUuid)||void 0===u?void 0:u[i.runUuid])||null,y=null!==x&&void 0!==x&&x.isPending||l.isPendingInputRow?p.colors.backgroundSecondary:p.colors.backgroundPrimary,b=s.useMemo((()=>{try{return JSON.parse(e)}catch(t){return null}}),[e]);return(0,h.FD)("div",{css:(0,a.AH)({height:"100%",whiteSpace:"normal",padding:p.spacing.sm,overflow:"hidden",position:"relative",cursor:"pointer",backgroundColor:y,"&:hover":{backgroundColor:p.colors.actionDefaultBackgroundHover}},""),children:[_?(0,h.Y)(r.TableSkeleton,{lines:3}):(0,h.Y)(h.FK,{children:e?b?(0,h.Y)(tn.y,{json:JSON.stringify(b,null,2)}):(0,h.Y)("span",{css:on,children:n&&t.highlightedText?(0,h.Y)(nn,{text:e,highlight:t.highlightedText}):"string"===typeof e?e.substring(0,512):"object"!==typeof e&&e}):(0,h.Y)(o.T.Text,{color:"info",css:an,children:(0,h.Y)(c.A,{id:"aQxQIF",defaultMessage:"(empty)"})})}),(0,U.Ii)()&&i&&g(i)&&(0,h.FD)("div",{css:(0,a.AH)({position:"absolute",left:8,bottom:8,right:8,display:"flex",gap:p.spacing.sm,alignItems:"center",justifyContent:"space-between"},""),children:[(0,h.FD)("div",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:p.spacing.xs},""),children:[!e&&(0,h.Y)(en,{disabled:_,isLoading:f,run:i,rowKey:l.key}),((null===x||void 0===x?void 0:x.isPending)||l.isPendingInputRow)&&(0,h.Y)(o.T.Hint,{size:"sm",css:rn,children:(0,h.Y)(c.A,{id:"2fvQaF",defaultMessage:"Unsaved"})})]}),x&&!_&&(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:p.spacing.xs,alignItems:"center"},""),children:[x.evaluationTime&&(0,h.FD)(o.T.Hint,{size:"sm",children:[Math.round(x.evaluationTime)," ms",x.totalTokens?",":""]}),x.totalTokens&&(0,h.Y)(o.T.Hint,{size:"sm",children:(0,h.Y)(c.A,{id:"/nPZbt",defaultMessage:"{totalTokens} total tokens",values:{totalTokens:x.totalTokens}})})]})]})]})},ln={initialWidthGroupBy:200,initialWidthOutput:360,maxWidth:500,minWidth:140};var dn={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const cn=({displayName:e})=>{const{theme:t}=(0,o.u)();return(0,h.Y)($t,{css:(0,a.AH)({justifyContent:"flex-start",padding:t.spacing.sm},""),children:(0,h.Y)(r.LegacyTooltip,{title:(0,R.truncate)(e,{length:250}),children:(0,h.Y)(o.T.Text,{bold:!0,css:dn,children:e})})})};var un={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"};const pn={svg:{width:20,height:20}},mn=()=>{const{toggleExpandedHeader:e,isHeaderExpanded:t}=Nt();return(0,h.Y)($t,{children:(0,h.Y)(r.LegacyTooltip,{placement:"right",title:(0,h.Y)(c.A,{id:"lDGQGa",defaultMessage:"Toggle detailed view"}),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationtableactionscolumnrenderer.tsx_22",icon:t?(0,h.Y)(r.ChevronDownIcon,{css:pn}):(0,h.Y)(o.q,{css:pn}),onClick:e})})})},gn=({onAddNewInputs:e,displayAddNewInputsButton:t})=>{const{theme:n}=(0,o.u)();return t?(0,h.Y)("div",{css:(0,a.AH)({width:"100%",height:"100%",display:"flex",flexDirection:"column",padding:n.spacing.xs},""),children:(0,h.Y)(r.LegacyTooltip,{placement:"right",title:(0,h.Y)(c.A,{id:"PNfcez",defaultMessage:"Add row"}),children:(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_components_evaluationtableactionscellrenderer.tsx_37",icon:(0,h.Y)(r.PlusIcon,{}),onClick:e})})}):null};var hn=n(54421);var fn={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"},vn={name:"pdi3j6",styles:"display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;-webkit-line-clamp:7;width:100%;height:100%"};const _n=({value:e})=>{const{theme:t}=(0,o.u)(),n=t.colors.backgroundPrimary;return(0,h.Y)("div",{css:(0,a.AH)({height:"100%",whiteSpace:"normal",padding:t.spacing.sm,overflow:"hidden",position:"relative",cursor:"pointer",backgroundColor:n,"&:hover":{backgroundColor:t.colors.actionDefaultBackgroundHover}},""),children:e&&e.url&&e.compressed_url?(0,h.Y)("span",{css:vn,children:(0,h.Y)(hn.TV,{imageUrl:e.url,compressedImageUrl:e.compressed_url})}):(0,h.Y)(o.T.Text,{color:"info",css:fn,children:(0,h.Y)(c.A,{id:"aQxQIF",defaultMessage:"(empty)"})})})};var xn={name:"3ytxc3",styles:"height:100%;overflow:hidden"};const yn=({resultList:e,visibleRuns:t,groupByColumns:n,onCellClick:r,onHideRun:i,onDatasetSelected:l,highlightedText:d="",isPreviewPaneVisible:u,outputColumnName:p,isImageColumn:m})=>{const[g,f]=(0,s.useState)([]),[_,x]=(0,s.useState)(null),y=(0,v.d4)((({evaluationData:e})=>e.evaluationPendingDataByRunUuid)),b=(0,s.useRef)(null),{isHeaderExpanded:w}=Nt(),{createNewRun:Y}=Qe(),C=(0,s.useCallback)((e=>{null===_||void 0===_||_.refreshHeader(),i(e)}),[_,i]),A=(0,s.useCallback)((e=>{null===_||void 0===_||_.refreshHeader(),Y(e)}),[Y,_]);(0,s.useEffect)((()=>{_&&!u&&_.clearFocusedCell()}),[_,u]),(0,s.useEffect)((()=>{if(!_)return;const e=_.getRenderedNodes();_.refreshCells({force:!0,rowNodes:e})}),[_,y,d]);const{showAddNewInputsModal:I,AddNewInputsModal:k}=(()=>{const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)([]),[i,l]=(0,s.useState)({}),d=(0,s.useMemo)((()=>n.every((({inputName:e})=>i[e]))),[i,n]),[u,p]=(0,s.useState)((async()=>{})),m=(0,s.useCallback)(((e,t)=>{l((n=>({...n,[e]:t})))}),[]),g=(0,s.useCallback)(((e,n)=>{const a=e.filter(he.o1).map((e=>({runName:e.runName,params:(0,he.xP)(e)}))),o=(0,R.uniq)(a.map((({params:e})=>e)).flat()).map((e=>({inputName:e,runNames:(0,R.compact)(a.filter((t=>t.params.includes(e))).map((({runName:e})=>e)))})));t(!0),r(o),l({}),p((()=>n))}),[]),{theme:f}=(0,o.u)();return{showAddNewInputsModal:g,AddNewInputsModal:(0,h.Y)(M.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_hooks_useevaluationaddnewinputsmodal.tsx_57",title:(0,h.Y)(c.A,{id:"JnidmZ",defaultMessage:"Add row"}),okButtonProps:{disabled:!d},okText:(0,h.Y)(c.A,{id:"eeLqSn",defaultMessage:"Submit"}),cancelText:(0,h.Y)(c.A,{id:"jwALGI",defaultMessage:"Cancel"}),onOk:()=>{u(i),t(!1)},visible:e,onCancel:()=>t(!1),children:n.map((({inputName:e,runNames:t})=>(0,h.FD)("div",{css:(0,a.AH)({marginBottom:f.spacing.md},""),children:[(0,h.Y)(o.T.Text,{bold:!0,children:e}),(0,h.Y)(o.T.Hint,{css:un,children:(0,h.Y)(c.A,{id:"s35HDG",defaultMessage:"Used by {runNames} {hasMore, select, true {and other runs} other {}}",values:{runNames:t.slice(0,5).join(", "),hasMore:t.length>5}})}),(0,h.Y)("div",{css:(0,a.AH)({marginTop:f.spacing.sm},""),children:(0,h.Y)(S.I.TextArea,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_hooks_useevaluationaddnewinputsmodal.tsx_99",value:i[e],onChange:t=>m(e,t.target.value)})})]},e)))})}})(),E=(0,v.wA)(),D=(0,s.useCallback)((()=>{var e;const t=null===(e=b.current)||void 0===e?void 0:e.querySelector(".ag-body-viewport");t?t.scrollTo({top:0,behavior:"smooth"}):null===_||void 0===_||_.ensureIndexVisible(0,"top")}),[_]),T=(0,s.useMemo)((()=>t.map(he.xP).flat().length>0),[t]),F=(0,s.useCallback)((()=>{I(t,(e=>{E({type:"EVALUATE_ADD_INPUT_VALUES",payload:e,meta:{}}),D()}))}),[D,I,E,t]),{theme:L}=(0,o.u)(),B=(0,V.A)(),N=(0,s.useCallback)((({value:e,colDef:t,column:n})=>{const a=B.formatMessage({id:"aQxQIF",defaultMessage:"(empty)"});return null===r||void 0===r?void 0:r(e||a,t.headerName||n.getId())}),[B,r]),P=(0,s.useMemo)((()=>(0,h.Y)(o.T.Text,{bold:!0,children:p})),[p]);return(0,s.useEffect)((()=>{const e=[],{initialWidthGroupBy:a,initialWidthOutput:o,maxWidth:r,minWidth:s}=ln;(0,U.Ii)()&&t.some((e=>(0,he.o1)(e)))&&e.push({resizable:!1,pinned:!0,width:40,headerComponent:"ActionsColumnRenderer",cellRendererSelector:({rowIndex:e})=>0===e?{component:"ActionsCellRenderer",params:{displayAddNewInputsButton:T,onAddNewInputs:F}}:void 0,cellClass:"leading-column-cell"}),n.forEach(((t,o)=>{const i=o===n.length-1;e.push({resizable:!0,initialWidth:a,minWidth:s,maxWidth:r,headerName:t,valueGetter:({data:e})=>e.groupByCellValues[t],suppressMovable:!0,cellRenderer:"TextRendererCellRenderer",headerClass:i?"last-group-by-header-cell":void 0,cellRendererParams:{isGroupByColumn:!0},headerComponent:"GroupHeaderCellRenderer",headerComponentParams:{displayAddNewInputsButton:T,onAddNewInputs:F},colId:t,onCellClicked:N})})),t.forEach(((t,n)=>{const a=0===n;e.push({resizable:!0,initialWidth:o,minWidth:s,maxWidth:r,headerName:t.runName,colId:t.runUuid,valueGetter:({data:e})=>e.cellValues[t.runUuid],suppressMovable:!0,cellRenderer:m?"ImageRendererCellRenderer":"TextRendererCellRenderer",cellRendererParams:{run:t},headerComponent:"RunHeaderCellRenderer",headerComponentParams:{run:t,onDuplicateRun:A,onHideRun:C,onDatasetSelected:l,groupHeaderContent:a?P:null},onCellClicked:N})})),f(e)}),[t,n,C,A,l,F,T,N,P,m]),(0,s.useEffect)((()=>{if(!_)return;const e=t.some((e=>{var t;return(0,he.o1)(e)||(null===(t=e.datasets)||void 0===t?void 0:t.length)>0}));_.setHeaderHeight(((e=!1,t=!1)=>t?40+(e?175:62):80)(w,e))}),[_,w,t]),(0,h.FD)("div",{css:xn,ref:b,children:[(0,h.Y)(Ft.p,{css:bn(L),context:{highlightedText:d},rowHeight:190,onGridReady:({api:e})=>x(e),getRowId:({data:e})=>e.key,suppressHorizontalScroll:!1,columnDefs:g,rowData:e,components:{TextRendererCellRenderer:sn,GroupHeaderCellRenderer:cn,RunHeaderCellRenderer:Xt,ActionsColumnRenderer:mn,ActionsCellRenderer:gn,ImageRendererCellRenderer:_n}}),k]})},bn=e=>({".ag-row:not(.ag-row-first), .ag-body-viewport":{borderTop:`1px solid ${e.colors.borderDecorative}`},".ag-row-last":{borderBottom:`1px solid ${e.colors.borderDecorative}`},".ag-cell, .last-group-by-header-cell .header-group-cell":{borderRight:`1px solid ${e.colors.borderDecorative}`},".ag-cell-focus:not(.leading-column-cell)::after":{content:'""',position:"absolute",inset:0,boxShadow:`inset 0 0 0px 2px ${e.colors.blue300}`,pointerEvents:"none"}});var wn=n(77484);const Yn=(e,t)=>{const n=t.map((t=>{const n=e[t];return[t,(0,R.isString)(n)?n:JSON.stringify(n)]}));return{key:n.map((([,e])=>String(e))).join("."),groupByValues:(0,R.fromPairs)(n)}};var Cn=n(38566);var An=n(37752);const In=()=>{var e;return/mac/i.test(null===(e=window.navigator.userAgentData)||void 0===e?void 0:e.platform)||/mac/i.test(window.navigator.platform)},kn=In()?"metaKey":"ctrlKey",Mn=(e,t={},n)=>{const{altOrOptKey:a=!1,ctrlOrCmdKey:o=!1,shiftKey:r=!1}=t;return(0,s.useEffect)((()=>{const t=t=>{if((!o||t[kn])&&(!a||t.altKey)&&(!r||t.shiftKey)&&t.key===e){n()&&t.preventDefault()}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)}),[e,n,o,a,r]),{isMacKeyboard:In}},Sn=()=>{const{evaluationPendingDataByRunUuid:e,evaluationArtifactsBeingUploaded:t,evaluationDraftInputValues:n}=(0,v.d4)((({evaluationData:e})=>e)),[r,i]=(0,s.useState)(!1),u=(0,v.wA)(),p=(0,s.useCallback)((()=>{u({type:"DISCARD_PENDING_EVALUATION_DATA"})}),[u]),m=Object.values(e).flat().length,g=n.length,f=Object.values(t).filter((e=>Object.values(e).some((e=>e)))).length;(0,s.useEffect)((()=>{0===m&&i(!1)}),[m]);const _=(0,s.useCallback)((()=>(0===m||r||(i(!0),u((async(e,t)=>{const{evaluationPendingDataByRunUuid:n,evaluationArtifactsByRunUuid:a}=t().evaluationData,o=Object.keys(n),r=(0,R.fromPairs)(Object.entries(a).filter((([e,t])=>o.includes(e)&&t[d.AH])).map((([e,t])=>[e,t[d.AH]]))),s=o.map((e=>{const t=r[e];if(!t)throw new Error(`Cannot find existing prompt engineering artifact for run ${e}`);const a=n[e].map((({entryData:e,evaluationTime:n,totalTokens:a})=>t.columns.map((t=>t===he.Ef?n.toString():t===he.jC&&a?a.toString():e[t]||"")))),o=(0,R.cloneDeep)(r[e].rawArtifactFile);return null===o||void 0===o||o.data.unshift(...a),{runUuid:e,updatedArtifactFile:o}})).map((({runUuid:t,updatedArtifactFile:n})=>e((0,l.Of)(t,d.AH,n)).then((()=>{const e=(0,Ne.G4)(d.AH,n);return{runUuid:t,newEvaluationTable:e}}))));return e({type:"WRITE_BACK_EVALUATION_ARTIFACTS",payload:Promise.all(s),meta:{runUuidsToUpdate:o,artifactPath:d.AH}})})).catch((e=>{w.A.logErrorAndNotifyUser(e)}))),!0)),[u,m,r]),{isMacKeyboard:x}=Mn("s",{ctrlOrCmdKey:!0},_),{theme:y}=(0,o.u)(),b=g>0&&0===m,Y=m>0||b?(0,h.FD)("div",{css:(0,a.AH)({backgroundColor:y.colors.backgroundPrimary,border:`1px solid ${y.colors.border}`,padding:y.spacing.md,marginBottom:y.spacing.sm,display:"flex",justifyContent:"space-between",alignItems:"center"},""),children:[b?(0,h.Y)(c.A,{id:"EPcEi9",defaultMessage:"You have added rows with new input values, but you still need to evaluate the new data in order to save it."}):r?(0,h.Y)(o.T.Text,{children:(0,h.Y)(c.A,{id:"NGsTf/",defaultMessage:"Synchronizing artifacts for {runsBeingSynchronizedCount} runs...",values:{runsBeingSynchronizedCount:(0,h.Y)("strong",{children:f})}})}):(0,h.Y)(o.T.Text,{children:(0,h.Y)(c.A,{id:"BWpQZ7",defaultMessage:'You have <strong>{unsyncedDataEntriesCount}</strong> unsaved evaluated {unsyncedDataEntriesCount, plural, =1 {value} other {values}}. Click "Save" button or press {keyCombination} keys to synchronize the artifact data.',values:{strong:e=>(0,h.Y)("strong",{children:e}),unsyncedDataEntriesCount:m,keyCombination:x()?"\u2318CMD+S":"CTRL+S"}})}),(0,h.FD)("div",{css:(0,a.AH)({display:"flex",gap:y.spacing.sm},""),children:[(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_hooks_useevaluationartifactwriteback.tsx_102",disabled:r,onClick:p,children:(0,h.Y)(c.A,{id:"kNTkr+",defaultMessage:"Discard"})})," ",m>0&&(0,h.Y)(o.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_hooks_useevaluationartifactwriteback.tsx_110",loading:r,type:"primary",onClick:_,children:(0,h.Y)(c.A,{id:"nhqO2Z",defaultMessage:"Save"})})]})]}):null;return{isSyncingArtifacts:r,EvaluationSyncStatusElement:Y}},En=({noEvalTablesLogged:e,userDeselectedAllColumns:t,areRunsSelected:n,areTablesSelected:a})=>!a||!n||t||e,Dn=({noEvalTablesLogged:e,userDeselectedAllColumns:t,areRunsSelected:n})=>{const[a,s]=n?e?[(0,h.Y)(c.A,{id:"sguNEF",defaultMessage:"No evaluation tables logged"}),(0,h.Y)(c.A,{id:"j7cj5r",defaultMessage:"Please log at least one table artifact containing evaluation data. <link>Learn more</link>.",values:{link:e=>(0,h.Y)(o.T.Link,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationartifactviewemptystate.tsx_48",openInNewTab:!0,href:"https://mlflow.org/docs/latest/python_api/mlflow.html?highlight=log_table#mlflow.log_table",target:"_blank",rel:"noopener noreferrer",children:e})}})]:t?[(0,h.Y)(c.A,{id:"owr9l2",defaultMessage:"No group by columns selected"}),(0,h.Y)(c.A,{id:"lJQEW4",defaultMessage:'Using controls above, select at least one "group by" column.'})]:[(0,h.Y)(c.A,{id:"ZvJTXB",defaultMessage:"No tables selected"}),(0,h.Y)(c.A,{id:"18/UVG",defaultMessage:"Using controls above, select at least one artifact containing table."})]:[(0,h.Y)(c.A,{id:"BFzsMn",defaultMessage:"No runs selected"}),(0,h.Y)(c.A,{id:"nPWZsh",defaultMessage:"Make sure that at least one experiment run is visible and available to compare"})];return(0,h.Y)(r.Empty,{title:a,description:s})};var Tn=n(22853),Rn=n(58898);var Fn={name:"1hetg88",styles:"max-width:300px"},Ln={name:"111arwn",styles:"width:300px;min-width:300px"},Bn={name:"1hetg88",styles:"max-width:300px"},Nn={name:"1hetg88",styles:"max-width:300px"},Pn={name:"1ichkjj",styles:"height:100%;display:flex;justify-content:center;align-items:center"};const On=({comparedRuns:e,onDatasetSelected:t,viewState:n,updateViewState:i})=>{const u=(0,V.A)(),{theme:p}=(0,o.u)(),m=((0,et.e)(),(0,s.useMemo)((()=>e.filter((({hidden:e})=>!e)).slice(0,10)),[e])),{selectedTables:g,groupByCols:f,outputColumn:_,setSelectedTables:x,setGroupByCols:y,setOutputColumn:b}=((e,t)=>{const{artifactViewState:n={}}=e,[a,o]=(0,s.useState)(n.selectedTables||[]),[r,i]=(0,s.useState)(n.groupByCols||[]),[l,d]=(0,s.useState)(n.outputColumn||"");return(0,s.useEffect)((()=>t({artifactViewState:{selectedTables:a,groupByCols:r,outputColumn:l}})),[t,a,r,l]),{selectedTables:a,groupByCols:r,outputColumn:l,setSelectedTables:o,setGroupByCols:i,setOutputColumn:d}})(n,i),[Y,C]=(0,s.useState)(!1),[A,I]=(0,s.useState)(""),[k,E]=(0,s.useState)(""),[D,T]=(0,s.useState)(!1),{isSyncingArtifacts:F,EvaluationSyncStatusElement:L}=Sn(),B=(0,v.wA)();(0,s.useEffect)((()=>{(0,U.Ii)()&&B(He()).catch((e=>{w.A.logErrorAndNotifyUser((null===e||void 0===e?void 0:e.message)||e)}))}),[B]);const N=(0,s.useCallback)((e=>x((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))),[x]),P=(0,s.useCallback)((e=>y((t=>{const n=t.includes(e)?t.filter((t=>t!==e)):[...t,e];return T(0===n.length),n}))),[y]),O=(0,s.useMemo)((()=>m.map((({runUuid:e})=>e))),[m]),{evaluationArtifactsByRunUuid:H,evaluationPendingDataByRunUuid:G,evaluationDraftInputValues:K}=(0,v.d4)((({evaluationData:e})=>e)),{tables:z,tablesByRun:j,noEvalTablesLogged:$}=(q=m,(0,s.useMemo)((()=>{const e=(0,R.fromPairs)(q.map((e=>{const t=e.tags?(0,Cn.T)(e.tags):[];return[e.runUuid,t]})).filter((([,e])=>e.length>0))),t=Array.from(new Set(Object.values(e).flat())),n=t.filter((t=>q.every((({runUuid:n})=>{var a;return null===(a=e[n])||void 0===a?void 0:a.includes(t)})))),a=0===t.length;return{tables:t,tablesByRun:e,tablesIntersection:n,noEvalTablesLogged:a}}),[q]));var q;(0,s.useEffect)((()=>{z.length>0&&0===g.length&&x([z[0]])}),[z,x,g.length]);const W=(0,v.d4)((({evaluationData:e,modelGateway:t})=>t.modelGatewayRoutesLoading.loading||O.some((t=>g.some((n=>{var a;return null===(a=e.evaluationArtifactsLoadingByRunUuid[t])||void 0===a?void 0:a[n]})))))),{columns:J,imageColumns:Q}=(Z=H,X=O,ee=g,(0,s.useMemo)((()=>{if(0===ee.length||0===X.length)return{columns:[],columnsIntersection:[],imageColumns:[]};const e=X.map((e=>Object.values(Z[e]||{}).filter((({path:e})=>ee.includes(e))))).flat(),t=e.filter((({path:e})=>ee.includes(e))).map((({columns:e,entries:t})=>e.map((e=>{const n=String(e);if(t.length>0){const a=t[0][e];return"object"===typeof a&&"image"===(null===a||void 0===a?void 0:a.type)?{name:n,type:"image"}:{name:n,type:"text"}}return{name:n,type:"text"}})))).flat(),n=Array.from(new Set(t.filter((e=>"text"===e.type)).map((e=>e.name)))),a=Array.from(new Set(t.filter((e=>"image"===e.type)).map((e=>e.name)))),o=n.filter((t=>e.every((({columns:e})=>e.includes(t)))));return{columns:n,columnsIntersection:o,imageColumns:a}}),[X,Z,ee]));var Z,X,ee;const te=Q.includes(_),ne=((e,t,n,a,o,r,i)=>(0,s.useMemo)((()=>{const s=[],l={},c={},u=[];for(const e of n){const t=r.map((t=>[t,e[t]])),n=t.map((([,e])=>e)).join(".");c[n]=(0,R.fromPairs)(t),u.push(n)}const p={},m=a.map((t=>[t,Object.values(e[t]||{}).filter((({path:e})=>o.includes(e))).map((({entries:e})=>e)).flat()]));for(const[e,t]of m)for(const n of t){const{key:t,groupByValues:a}=Yn(n,r);if(Object.values(a).every((e=>!e)))continue;c[t]||(c[t]=a),(n[he.Ef]||n[he.jC])&&(p[t]||(p[t]={}),p[t][e]||(p[t][e]={isPending:!1,evaluationTime:parseFloat(n[he.Ef]),totalTokens:n[he.jC]?parseInt(n[he.jC],10):void 0})),l[t]||(l[t]={});const o=l[t];o[e]=o[e]||n[i]}for(const[e,n]of Object.entries(t))for(const t of n){const{entryData:n,...a}=t,{key:o,groupByValues:s}=Yn(n,r);if(Object.values(s).every((e=>!e)))continue;c[o]||(c[o]=s,u.push(o)),p[o]||(p[o]={}),p[o][e]=a,l[o]||(l[o]={});const d=l[o];d[e]=n[i]||d[e]}const g=(0,R.sortBy)(Object.entries(c),(([e])=>!u.includes(e)));for(const[e,t]of g){const n=s.find((({key:t})=>e===t));if(n&&l[e])n.cellValues=l[e],n.outputMetadataByRunUuid=p[e];else{const n=l[e];Object.keys(n||{}).forEach((e=>{if(null!==n[e]&&"object"===typeof n[e])try{const{type:t,filepath:a,compressed_filepath:o}=n[e];t===d.Oe?n[e]={url:(0,wn.To)(a,e),compressed_url:(0,wn.To)(o,e)}:n[e]=JSON.stringify(n[e])}catch{n[e]=""}else(0,R.isNil)(n[e])||(0,R.isString)(n[e])||(n[e]=JSON.stringify(n[e]))})),s.push({key:e,groupByCellValues:t,cellValues:l[e]||{},outputMetadataByRunUuid:p[e],isPendingInputRow:u.includes(e)})}}return s}),[a,e,r,n,o,i,t]))(H,G,K,O,g,f,_),ae=(0,s.useMemo)((()=>{const e=m.filter(he.o1).map(he.xP).flat();if(!e.length)return null;return Array.from(new Set(e)).filter((e=>J.includes(e)))}),[m,J]);(0,s.useEffect)((()=>{m.every(he.o1)&&y([])}),[y,m]),(0,s.useEffect)((()=>{if(g.length)for(const e of m){if(!e)continue;const t=(j[e.runUuid]||[]).filter((e=>g.includes(e)));for(const n of t)B((0,l.sT)(e.runUuid,n,!1)).catch((e=>{e instanceof Ne.ap?w.A.displayGlobalErrorNotification(e.message):w.A.logErrorAndNotifyUser(e.message||e)}))}}),[m,B,g,j]);const oe=g.length>0,re=m.length>0,se=!W&&oe&&re,ie=(0,s.useMemo)((()=>{if(!k.trim())return ne;const e=new RegExp(k,"i");return ne.filter((({groupByCellValues:t})=>Object.values(t).some((t=>null===t||void 0===t?void 0:t.match(e)))))}),[ne,k]),le=(0,Tn.v)(e),de=(0,s.useCallback)((e=>{le(Rn.oy.CUSTOM,e)}),[le]);(0,s.useEffect)((()=>{if(W||D)return;const e=f.length<1,t=f.some((e=>!J.includes(e))),n=J[0],a=ae||(n?[n]:null);(e||t)&&a&&y(a)}),[W,D,f,_,J,y,ae]);const ce=(0,s.useMemo)((()=>J.filter((e=>!e.startsWith("MLFLOW_")))),[J]),ue=(0,s.useMemo)((()=>[...J,...Q].filter((e=>!f.includes(e)&&!e.startsWith("MLFLOW_")))),[J,Q,f]);(0,s.useEffect)((()=>{if(f.includes(_)||!_){const e=ue.includes(he.hR)?he.hR:ue[0];b(e||"")}}),[f,_,ue,b]),(0,s.useEffect)((()=>{C(!0);const e=setTimeout((()=>E(A)),250);return()=>clearTimeout(e)}),[A]),(0,s.useEffect)((()=>{C(!1)}),[k]),(0,s.useEffect)((()=>{if(!ue.includes(_)){const e=ue.includes(he.hR)?he.hR:ue[0];b(e||"")}}),[_,ue,b]),(0,s.useEffect)((()=>{g.some((e=>!z.includes(e)))&&x([])}),[g,z,x]);const[pe,me]=(0,s.useState)(null),ge=(0,s.useCallback)(((e,t)=>{me({value:e,header:t}),i({previewPaneVisible:!0})}),[i]);return(0,h.FD)("div",{css:(0,a.AH)({flex:1,borderTop:`1px solid ${p.colors.border}`,borderLeft:`1px solid ${p.colors.border}`,marginLeft:-1,zIndex:1,height:"100%",display:"grid",gridTemplateColumns:n.previewPaneVisible?"1fr auto":"1fr",overflow:"hidden"},""),children:[(0,h.FD)("div",{css:(0,a.AH)({paddingLeft:p.spacing.sm,paddingTop:p.spacing.sm,height:"100%",display:"grid",gridTemplateRows:"auto auto 1fr",overflow:"hidden",rowGap:p.spacing.sm,backgroundColor:p.colors.backgroundSecondary},""),children:[(0,h.FD)("div",{css:(0,a.AH)({display:"flex",alignItems:"center",gap:p.spacing.sm,overflow:"hidden",height:p.general.heightSm},""),children:[(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationartifactcompareview.tsx_358",label:(0,h.Y)(c.A,{id:"syyEiR",defaultMessage:"Table"}),multiSelect:!0,value:g,children:[(0,h.Y)(r.DialogComboboxTrigger,{css:(0,a.AH)({maxWidth:300,backgroundColor:p.colors.backgroundPrimary},""),"data-testid":"dropdown-tables",onClear:()=>x([]),disabled:F||!re||$}),(0,h.Y)(r.DialogComboboxContent,{css:Fn,children:(0,h.Y)(r.DialogComboboxOptionList,{children:z.map((e=>(0,h.Y)(r.DialogComboboxOptionListCheckboxItem,{value:e,onChange:N,checked:g.includes(e),"data-testid":"dropdown-tables-option",children:e},e)))})})]}),(0,h.Y)(r.LegacyTooltip,{title:(0,h.Y)(c.A,{id:"VZRc73",defaultMessage:"Using the list of logged table artifacts, select at least one to start comparing results."}),children:(0,h.Y)(M.I,{})})]}),W?(0,h.Y)(r.LegacySkeleton,{}):(0,h.FD)(h.FK,{children:[(0,h.FD)("div",{css:(0,a.AH)({display:"flex",columnGap:p.spacing.sm,alignItems:"center",overflow:"hidden",height:p.general.heightSm},""),children:[(0,h.Y)(S.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationartifactcompareview.tsx_414",prefix:(0,h.Y)(S.S,{}),suffix:Y&&(0,h.Y)(o.S,{size:"small"}),css:Ln,onChange:e=>I(e.target.value),value:A,placeholder:u.formatMessage({id:"3D2Znf",defaultMessage:"Filter by {columnNames}"},{columnNames:f.join(", ")}),allowClear:!0,disabled:!se||F}),(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationartifactcompareview.tsx_433",value:f,multiSelect:!0,label:(0,h.Y)(c.A,{id:"fWm1UC",defaultMessage:"Group by"}),children:[(0,h.Y)(r.DialogComboboxTrigger,{disabled:!se||F,allowClear:!1,showTagAfterValueCount:1,css:(0,a.AH)({maxWidth:300,backgroundColor:p.colors.backgroundPrimary},""),"aria-label":'Select "group by" columns'}),(0,h.Y)(r.DialogComboboxContent,{css:Bn,children:(0,h.Y)(r.DialogComboboxOptionList,{children:ce.map((e=>(0,h.Y)(r.DialogComboboxOptionListCheckboxItem,{value:e,onChange:P,checked:f.includes(e),children:e},e)))})})]}),(0,h.FD)(r.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_evaluation-artifacts-compare_evaluationartifactcompareview.tsx_465",value:[_],label:(0,h.Y)(c.A,{id:"ZqGzZd",defaultMessage:"Compare"}),children:[(0,h.Y)(r.DialogComboboxTrigger,{disabled:!se||F,allowClear:!1,css:(0,a.AH)({maxWidth:300,backgroundColor:p.colors.backgroundPrimary},"")}),(0,h.Y)(r.DialogComboboxContent,{css:Nn,children:(0,h.Y)(r.DialogComboboxOptionList,{children:ue.map((e=>(0,h.Y)(r.DialogComboboxOptionListSelectItem,{value:e,onChange:()=>b(e),checked:_===e,children:e},e)))})})]})]}),En({areRunsSelected:re,areTablesSelected:oe,noEvalTablesLogged:$,userDeselectedAllColumns:D})?(0,h.Y)("div",{css:Pn,children:(0,h.Y)(Dn,{areRunsSelected:re,areTablesSelected:oe,noEvalTablesLogged:$,userDeselectedAllColumns:D})}):(0,h.Y)("div",{css:(0,a.AH)({position:"relative",zIndex:1,overflowY:"hidden",height:"100%",backgroundColor:p.colors.backgroundPrimary},""),children:(0,h.Y)(Bt,{tableData:ne,outputColumn:_,children:(0,h.Y)(yn,{visibleRuns:m,groupByColumns:f,resultList:ie,onCellClick:te?void 0:ge,onHideRun:de,onDatasetSelected:t,highlightedText:k.trim(),isPreviewPaneVisible:n.previewPaneVisible,outputColumnName:_,isImageColumn:te})})}),L]})]}),n.previewPaneVisible&&(0,h.Y)(An.V,{content:null!==pe&&void 0!==pe&&pe.value?(0,h.Y)(tn.f,{json:pe.value}):null,copyText:(null===pe||void 0===pe?void 0:pe.value)||"",headerText:null===pe||void 0===pe?void 0:pe.header,onClose:()=>i({previewPaneVisible:!1}),empty:(0,h.Y)(r.Empty,{description:(0,h.Y)(c.A,{id:"lTngfr",defaultMessage:"Select a cell to display preview"})})})]})},Hn=e=>{const{theme:t}=(0,o.u)();return e.disabled?(0,h.Y)("div",{css:(0,a.AH)({flex:1,backgroundColor:t.colors.backgroundSecondary,height:"100%",borderTop:`1px solid ${t.colors.border}`,borderLeft:`1px solid ${t.colors.border}`,paddingTop:t.spacing.lg,marginLeft:-1,zIndex:1,display:"flex",justifyContent:"center",alignItems:"center"},""),children:(0,h.Y)(r.Empty,{title:(0,h.Y)(c.A,{id:"2gxV/O",defaultMessage:"Evaluation not available when grouping is enabled"}),description:(0,h.Y)(c.A,{id:"kdTxC2",defaultMessage:"Disable run grouping in order to access the evaluation view"}),image:(0,h.Y)("div",{})})}):(0,h.Y)(On,{...e})};var Un=n(30152),Vn=n(19415),Gn=n(36118),Kn=n(73150),zn=n(75627),jn=n(39045),$n=n(62758),qn=n(63617),Wn=n(55999),Jn=n(688),Qn=n(71932),Zn=n(40029),Xn=n(21039);const ea=(e,t,n,a,o,r)=>{var s,i;return{uuid:e.runUuid,displayName:(null===(s=e.runInfo)||void 0===s?void 0:s.runName)||e.runUuid,runInfo:e.runInfo,metrics:t[e.runUuid]||{},params:n[e.runUuid]||{},tags:a[e.runUuid]||{},images:o[e.runUuid]||{},color:r,pinned:e.pinned,pinnable:e.pinnable,metricsHistory:{},belongsToGroup:null===(i=e.runDateAndNestInfo)||void 0===i?void 0:i.belongsToGroup,hidden:e.hidden}},ta=({isLoading:e,comparedRuns:t,metricKeyList:n,paramKeyList:r,experimentTags:i,compareRunCharts:l,compareRunSections:c,groupBy:u,autoRefreshEnabled:p,hideEmptyCharts:m,globalLineChartConfig:g,chartsSearchFilter:f,minWidth:_})=>{const x=(0,et.e)(),y=(0,qt.LE)(),b=(0,$n.g_)(),{paramsByRunUuid:w,latestMetricsByRunUuid:Y,tagsByRunUuid:C,imagesByRunUuid:A}=(0,v.d4)((e=>({paramsByRunUuid:e.entities.paramsByRunUuid,latestMetricsByRunUuid:e.entities.latestMetricsByRunUuid,tagsByRunUuid:e.entities.tagsByRunUuid,imagesByRunUuid:e.entities.imagesByRunUuid}))),{theme:I}=(0,o.u)(),[k,M]=(0,s.useState)(!1),[S,E]=(0,s.useState)(null),[D,T]=(0,s.useState)(""),{formatMessage:F}=(0,V.A)(),L=(0,s.useMemo)((()=>(0,pt.Zp)(u)),[u]),[B,N]=(0,s.useState)(void 0),P=(0,s.useCallback)((e=>{E(e)}),[]);(0,s.useEffect)((()=>{k||e||M(!0)}),[k,e]);const O=(0,s.useMemo)((()=>{const e=i[d.S0],t=i[d.Q4];return(null===e||void 0===e?void 0:e.value)||(null===t||void 0===t?void 0:t.value)||n[0]||""}),[i,n]),H=(0,s.useMemo)((()=>{if(!u)return t.filter((e=>e.runInfo)).map((e=>ea(e,Y,w,C,A,y(e.runUuid))));return[...t.filter((e=>e.groupParentInfo&&!(0,pt.mC)(e.groupParentInfo))).map((e=>{var t;return((e,t)=>{var n,a,o;const r=null!==(n=e.groupParentInfo)&&void 0!==n&&n.aggregatedMetricData?(0,R.keyBy)((0,R.values)(null===(a=e.groupParentInfo)||void 0===a?void 0:a.aggregatedMetricData).map((({key:e,value:t,maxStep:n})=>({key:e,value:t,step:n,timestamp:0}))),"key"):{};return{uuid:e.rowUuid,displayName:(0,pt.QD)(e.groupParentInfo),groupParentInfo:e.groupParentInfo,metrics:r,params:(null===(o=e.groupParentInfo)||void 0===o?void 0:o.aggregatedParamData)||{},tags:{},images:{},color:t,pinned:e.pinned,pinnable:e.pinnable,metricsHistory:{},hidden:e.hidden}})(e,y(null===(t=e.groupParentInfo)||void 0===t?void 0:t.groupId))})),...t.filter((e=>{var t;return!e.groupParentInfo&&!(null!==(t=e.runDateAndNestInfo)&&void 0!==t&&t.belongsToGroup)})).map((e=>ea(e,Y,w,C,A,y(e.runUuid))))]}),[u,t,Y,w,C,A,y]),U=H.filter((e=>!e.hidden&&e.tags[d.Cr]));(0,Wn.L)({runUuids:U.map((e=>e.uuid)),runUuidsIsActive:U.map((e=>{var t;return"RUNNING"===(null===(t=e.runInfo)||void 0===t?void 0:t.status)})),enabled:!0,autoRefreshEnabled:p}),(0,s.useEffect)((()=>{if((!c||!l)&&H.length>0){const{resultChartSet:e,resultSectionSet:t}=Un.i$.getBaseChartAndSectionConfigs({primaryMetricKey:O,runsData:H,useParallelCoordinatesChart:!0});b((n=>({...n,compareRunCharts:e,compareRunSections:t})),!0)}}),[l,c,O,H,b]),(0,s.useEffect)((()=>{b((e=>{if(!e.compareRunCharts||!e.compareRunSections)return e;const{resultChartSet:t,resultSectionSet:n,isResultUpdated:a}=Un.i$.updateChartAndSectionConfigs({compareRunCharts:e.compareRunCharts,compareRunSections:e.compareRunSections,runsData:H,isAccordionReordered:e.isAccordionReordered});return a?{...e,compareRunCharts:t,compareRunSections:n}:e}),!0)}),[H,b]);const G=(0,s.useCallback)((e=>{x((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]})))}),[x]),K=(0,Tn.v)(t),z=(0,s.useCallback)((e=>K(Rn.oy.CUSTOM,e)),[K]),j=(0,$n.Ez)(),$=(0,$n.KP)(),q=(0,$n.iO)(),W=(0,$n.cA)(),J=(0,s.useMemo)((()=>({runs:H,onTogglePin:G,onHideRun:z})),[H,z,G]),Q=(0,s.useMemo)((()=>m?null===l||void 0===l?void 0:l.filter((e=>!e.deleted&&!(0,Gn.Cs)(H,e))):null===l||void 0===l?void 0:l.filter((e=>!e.deleted))),[H,l,m]);return k?(0,h.FD)("div",{css:(0,a.AH)({flex:1,borderTop:`1px solid ${I.colors.border}`,borderLeft:`1px solid ${I.colors.border}`,marginLeft:-1,position:"relative",backgroundColor:I.colors.backgroundSecondary,paddingLeft:I.spacing.md,paddingRight:I.spacing.md,paddingBottom:I.spacing.md,zIndex:1,overflowY:"auto",minWidth:_},""),"data-testid":"experiment-view-compare-runs-chart-area",children:[(0,h.FD)("div",{css:[{paddingTop:I.spacing.sm,paddingBottom:I.spacing.sm,display:"flex",gap:I.spacing.xs,position:"sticky",top:0,zIndex:Xn.K.SEARCH_BAR,backgroundColor:I.colors.backgroundSecondary,marginLeft:-I.spacing.md,marginRight:-I.spacing.md,paddingLeft:I.spacing.md,paddingRight:I.spacing.md},""],children:[(0,h.Y)(Zn.I,{chartsSearchFilter:f}),(0,h.Y)(Jn.f,{updateUIState:b,metricKeyList:n,globalLineChartConfig:g})]}),(0,h.Y)(zn.W,{contextData:J,component:Kn.X,children:(0,h.Y)(Qn.c_,{visibleChartCards:Q,children:(0,h.Y)(jn.J,{compareRunSections:c,compareRunCharts:Q,reorderCharts:q,insertCharts:W,chartData:H,startEditChart:P,removeChart:$,addNewChartCard:e=>t=>{E(Un.i$.getEmptyChartCardByType(t,!1,void 0,e))},search:null!==f&&void 0!==f?f:"",groupBy:L,setFullScreenChart:N,autoRefreshEnabled:p,hideEmptyCharts:m,globalLineChartConfig:g})})}),S&&(0,h.Y)(Vn.z,{chartRunData:H,metricKeyList:n,paramKeyList:r,config:S,onSubmit:e=>{j(e),E(null)},onCancel:()=>E(null),groupBy:L,globalLineChartConfig:g}),(0,h.Y)(qn._,{fullScreenChart:B,onCancel:()=>N(void 0),chartData:H,groupBy:L,tooltipContextValue:J,tooltipComponent:Kn.X,autoRefreshEnabled:p,globalLineChartConfig:g})]}):(0,h.Y)(aa,{})},na=e=>{const t=(0,et.e)(),n=(0,s.useCallback)((e=>{t((t=>({...t,...e(t)})))}),[t]);return(0,h.Y)($n.oB,{updateChartsUIState:n,children:(0,h.Y)(ta,{...e})})},aa=()=>{const{theme:e}=(0,o.u)();return(0,h.Y)("div",{css:(0,a.AH)({flex:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gridTemplateRows:"200px",gap:e.spacing.md,borderTop:`1px solid ${e.colors.border}`,borderLeft:`1px solid ${e.colors.border}`,marginLeft:-1,backgroundColor:e.colors.backgroundSecondary,padding:e.spacing.md,zIndex:1},""),children:new Array(6).fill(null).map(((e,t)=>(0,h.Y)(r.TableSkeleton,{lines:5,seed:t.toString()},t)))})};var oa=n(4972),ra=n(42550),sa=n(25790),ia=n(63609);var la={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const da=({error:e})=>{const t=null===e||void 0===e?void 0:e.message;return(0,h.Y)("div",{css:la,children:(0,h.Y)(r.Empty,{description:null!==t&&void 0!==t?t:(0,h.Y)(c.A,{id:"i+RyPC",defaultMessage:"Your request could not be fulfilled. Please try again."}),image:(0,h.Y)(o.W,{}),title:(0,h.Y)(c.A,{id:"2mRfvl",defaultMessage:"Request error"})})})};var ca=n(72661);var ua=n(39771);const pa=()=>{const e=new Date;return e.setMilliseconds(0),e};var ma={name:"vm4aot",styles:"min-height:225px;height:100%;position:relative;display:flex"};const ga=s.memo((e=>{var t;const[n]=(0,Be.an)(),{experiments:a,runsData:o,uiState:i,searchFacetsState:l,isLoadingRuns:c,loadMoreRuns:u,moreRunsAvailable:p,requestError:m,refreshRuns:g}=e,f=a.length>1,[_,x]=(0,s.useState)(new Mt),{experimentId:y}=a[0],b=(0,Rt.S)(y),[Y,C]=(0,s.useState)("true"===b.getItem("expandRows"));(0,s.useEffect)((()=>{b.setItem("expandRows",Y)}),[Y,b]);const{paramKeyList:A,metricKeyList:I,tagsList:k,paramsList:M,metricsList:S,runInfos:E,runUuidsMatchingFilter:D,datasetsList:T,inputsOutputsList:F}=o,L=(0,v.d4)((({entities:e})=>e.modelVersionsByRunUuid)),B=(0,s.useMemo)((()=>E.map(((e,t)=>{var n,a;return{runInfo:e,params:M[t],metrics:S[t],tags:k[t],datasets:T[t],inputs:(null===F||void 0===F||null===(n=F[t])||void 0===n?void 0:n.inputs)||{},outputs:(null===F||void 0===F||null===(a=F[t])||void 0===a?void 0:a.outputs)||{}}}))),[T,S,M,E,k,F]),{orderByKey:N,searchFilter:P}=l,{runsPinned:O,runsExpanded:H,runsHidden:V,runListHidden:G}=i,K="TABLE"!==n,z=(0,s.useCallback)((e=>x((t=>({...t,...e})))),[]),j=(0,s.useCallback)((()=>{z({columnSelectorVisible:!0})}),[z]),$=(0,s.useMemo)((()=>!N&&!P||N===d.T8.DATE),[N,P]),[q,W]=(0,s.useState)(pa);(0,s.useEffect)((()=>{W(pa)}),[E]);const J=(0,s.useMemo)((()=>w.A.getVisibleTagKeyList(k)),[k]),[Q,Z]=(0,s.useState)(!1),[X,ee]=(0,s.useState)(),te=(0,s.useMemo)((()=>a.map((({experimentId:e})=>e))),[a]),ne=(0,U.ht)(),ae=(({experimentIds:e,enabled:t=!0})=>{const{data:n}=(0,ia.e)({experimentIds:e},{enabled:t});return(0,s.useMemo)((()=>null===n||void 0===n?void 0:n.reduce(((e,t)=>{var n;const{source_run_id:a}=null!==(n=t.info)&&void 0!==n?n:{};return a?(e[a]||(e[a]=[]),e[a].push(t),e):e}),{})),[n])})({experimentIds:te,enabled:!ne}),oe=(({runData:e,enabled:t})=>{const n=(0,s.useMemo)((()=>{if(!t)return{};const n={};for(const{runInfo:t,inputs:r,outputs:s}of e){var a,o;const e=t.runUuid,i=[...(null===r||void 0===r||null===(a=r.modelInputs)||void 0===a?void 0:a.map((e=>e.modelId)))||[],...(null===s||void 0===s||null===(o=s.modelOutputs)||void 0===o?void 0:o.map((e=>e.modelId)))||[]];e&&i.length>0&&(n[e]=(0,R.uniq)(i))}return n}),[e,t]),a=(0,s.useMemo)((()=>t?(0,R.uniq)(Object.values(n).flat()):[]),[n,t]),o=(0,ca.o)({modelIds:a},{enabled:t&&a.length>0});return(0,s.useMemo)((()=>o.data?Object.entries(n).reduce(((e,[t,n])=>{var a,r;return e[t]=null!==(a=null===(r=o.data)||void 0===r?void 0:r.filter((e=>{var t;return n.includes((null===(t=e.info)||void 0===t?void 0:t.model_id)||"")})))&&void 0!==a?a:[],e}),{}):{}),[n,o.data])})({runData:B,enabled:ne}),re=ne?oe:ae,se=(0,St.ZU)({experiments:a,paramKeyList:A,metricKeyList:I,modelVersionsByRunUuid:L,runsExpanded:H,tagKeyList:J,nestChildren:$,referenceTime:q,runData:B,runUuidsMatchingFilter:D,runsPinned:O,runsHidden:V,groupBy:i.groupBy,groupsExpanded:i.groupsExpanded,runsHiddenMode:i.runsHiddenMode,runsVisibilityMap:i.runsVisibilityMap,useGroupedValuesInCharts:i.useGroupedValuesInCharts,searchFacetsState:l,loggedModelsV3ByRunUuid:re}),[ie,le]=(0,r.useLegacyNotification)(),de=Dt(ie),[ce,ue]=(0,s.useState)(295),pe=(0,s.useCallback)((()=>{p&&!c&&u().then((e=>{de(e,E)}))}),[p,c,u,E,de]),me=(0,s.useCallback)(((e,t)=>{ee({datasetWithTags:e,runData:t}),Z(!0)}),[]),ge=(0,oa.$)(),he=i.autoRefreshEnabled&&(0,U.Hn)()&&ge,fe=null===(t=i.useGroupedValuesInCharts)||void 0===t||t,ve=m instanceof Error&&!c?(0,h.Y)(da,{error:m}):(0,h.Y)(kt.P,{experiments:a,runsData:o,searchFacetsState:l,viewState:_,isLoading:c,updateViewState:z,onAddColumnClicked:j,rowsData:se,loadMoreRunsFunc:pe,moreRunsAvailable:p,onDatasetSelected:me,expandRows:Y,uiState:i,compareRunsMode:n}),_e=(0,s.useMemo)((()=>a.map((e=>e.experimentId)).sort().join(",")),[a]),{resizableMaxWidth:xe,ref:ye}=(0,ua.b)(350);return(0,h.Y)(Je,{visibleRuns:se,refreshRuns:g,children:(0,h.FD)(sa.Co,{children:[(0,h.Y)(It,{viewState:_,updateViewState:z,runsData:o,searchFacetsState:l,experimentId:y,requestError:m,expandRows:Y,updateExpandRows:C,refreshRuns:g,uiState:i,isLoading:c,isComparingExperiments:f}),(0,h.FD)("div",{ref:ye,css:ma,children:[K?(0,h.Y)(ra.t,{onResize:ue,runListHidden:G,width:ce,maxWidth:xe,children:ve}):ve,"CHART"===n&&(0,h.Y)(na,{isLoading:c,comparedRuns:se,metricKeyList:o.metricKeyList,paramKeyList:o.paramKeyList,experimentTags:o.experimentTags,compareRunCharts:i.compareRunCharts,compareRunSections:i.compareRunSections,groupBy:fe?i.groupBy:null,autoRefreshEnabled:he,hideEmptyCharts:i.hideEmptyCharts,globalLineChartConfig:i.globalLineChartConfig,chartsSearchFilter:i.chartsSearchFilter,storageKey:_e,minWidth:350}),"ARTIFACT"===n&&(0,h.Y)(Hn,{comparedRuns:se,viewState:_,updateViewState:z,onDatasetSelected:me,disabled:Boolean(i.groupBy)}),le,X&&(0,h.Y)(Tt.O,{isOpen:Q,setIsOpen:Z,selectedDatasetWithRun:X,setSelectedDatasetWithRun:ee})]})]})})}));var ha=n(89736);var fa=n(32614);function va(e){try{return fa.A.getStoreForComponent("ExperimentPage",e).loadComponentState()}catch{return w.A.logErrorAndNotifyUser(`Error: malformed persisted search state for experiment(s) ${e}`),{...(0,Rn.uY)(),...(0,Xe.G)()}}}const _a=(e,t,n,a=!1)=>{const o=(0,Ze.Px)(),r=(0,s.useMemo)((()=>n?JSON.stringify(n.sort()):null),[n]);(0,s.useEffect)((()=>{if(!a&&!t){const e=r?va(r):null,t=(0,R.pick)({...(0,Xe.G)(),...e},Ze.sO);o(t,{replace:!0})}}),[t,r,a]),(0,s.useEffect)((()=>{var n,o;t&&r&&!a&&(n={...t,...e},o=r,fa.A.getStoreForComponent("ExperimentPage",o).saveComponentState(n))}),[t,e,r,a])};var xa=n(6604),ya=n(32378),ba=n(85017),wa=n(26458);const Ya=(e,t)=>{const{experiments:n}=t,a=t.experimentIds||n.map((e=>e.experimentId)),o=a.length>1,r=(e.entities.runInfoOrderByUuid||[]).map((t=>e.entities.runInfosByUuid[t])).filter((({experimentId:e})=>a.includes(e))).map((({runUuid:e})=>e)),{modelVersionsByRunUuid:s,runUuidsMatchingFilter:i}=e.entities,l=((e,t,{lifecycleFilter:n=ya.gy.ACTIVE,modelVersionFilter:a=ya.EL.ALL_RUNS,datasetsFilter:o=[]})=>{const{modelVersionsByRunUuid:r}=t.entities;return e.map((e=>[(0,wa.K4)(e,t),(0,wa.jF)(e,t)])).filter((([e,t])=>n===ya.gy.ACTIVE?"active"===e.lifecycleStage:"deleted"===e.lifecycleStage)).filter((([e,t])=>a===ya.EL.ALL_RUNS||(a===ya.EL.WITH_MODEL_VERSIONS?e.runUuid in r:a===ya.EL.WTIHOUT_MODEL_VERSIONS?!(e.runUuid in r):(console.warn("Invalid input to model version filter - defaulting to showing all runs."),!0)))).filter((([e,t])=>!o||0===o.length||!!t&&t.some((e=>{const t=e.dataset.name,n=e.dataset.digest;return o.some((({name:e,digest:a})=>e===t&&a===n))})))).map((([e,t])=>e))})(r,e,t),d=new Set,c=new Set,u=l.map((t=>e.entities.runDatasetsByUuid[t.runUuid])),p=l.map((t=>e.entities.runInputsOutputsByUuid[t.runUuid])),m=l.map((t=>{const n=(0,ba.d0)(t.runUuid,e),a=Object.values(n||{}).filter((e=>e.key.trim().length>0));return a.forEach((e=>{d.add(e.key)})),a})),g=l.map((t=>{const n=Object.values((0,wa.tI)(t.runUuid,e)).filter((e=>e.key.trim().length>0));return n.forEach((e=>{c.add(e.key)})),n})),h=l.map((t=>(0,R.pickBy)((0,wa.X3)(t.runUuid,e),(e=>e.key.trim().length>0)))),f=a[0];return{modelVersionsByRunUuid:s,experimentTags:o?{}:(0,wa.xy)(f,e),runInfos:l,paramsList:g,tagsList:h,metricsList:m,runUuidsMatchingFilter:i,datasetsList:u,inputsOutputsList:p,metricKeyList:Array.from(d.values()).sort(),paramKeyList:Array.from(c.values()).sort()}};var Ca=n(69708),Aa=n(39416),Ia=n(62448);const ka=(e,t,n)=>{if(!e||!t.length)return null;return{...(0,xa.TB)(t,{...e,runsPinned:n},Date.now()),requestedFacets:e}},Ma=(e,t,n,a=!1)=>{const o=(0,v.wA)(),[r,i]=(0,s.useState)((()=>Sa())),d=(0,s.useMemo)((()=>n?JSON.stringify(n.sort()):null),[n]),[c,u]=(0,s.useState)(!0),[p,m]=(0,s.useState)(!0),[g,h]=(0,s.useState)(null),[f,_]=(0,s.useState)(null),x=(0,s.useRef)([]),y=(0,s.useRef)(null),b=(0,s.useRef)(null),Y=(0,s.useRef)(null);(0,s.useEffect)((()=>{a||(m(!0),i(Sa()))}),[d,a]);const C=(0,s.useCallback)(((e,t,n)=>{i(Ya(e,{datasetsFilter:n.datasetsFilter,lifecycleFilter:n.lifecycleFilter,modelVersionFilter:n.modelVersionFilter,experiments:[],experimentIds:t}))}),[]);(0,s.useEffect)((()=>{x.current=e.runsPinned}),[e.runsPinned]);const A=(0,s.useCallback)((e=>{(0,xa.iH)(e||[],Ca.hY,o).catch((e=>{var t;const n=null!==(t=e instanceof F.s?(0,Ia.h)(e):e)&&void 0!==t?t:e,a=n instanceof F.s?n.getMessageField():n.message;w.A.displayGlobalErrorNotification(`Failed to load model versions for runs: ${a}`)}))}),[o]),I=(0,s.useCallback)(((e,t={})=>o(((n,a)=>(t.isAutoRefreshing||(u(!0),b.current=e),n((e.pageToken?l.e$:l.bn)(e)).then((async({value:n})=>{var o;return y.current=Date.now(),u(!1),m(!1),_(null),b.current&&null!==(o=t.discardResultsFn)&&void 0!==o&&o.call(t,b.current,n)||(Y.current=e,h(n.next_page_token||null),C(a(),e.experimentIds,e.requestedFacets),A(n.runs||[])),n})).catch((e=>{if(u(!1),m(!1),(0,U.Ng)()){if(e instanceof Aa.ZR)return void _(e);const t=(0,Ia.h)(e);if(t)return void _(t)}_(e),(0,U.Ng)()||w.A.logErrorAndNotifyUser(e)})))))),[o,C,A]);(0,s.useEffect)((()=>{if(a)return;const e=ka(t,n,x.current);e&&I(e)}),[I,o,a,t,n]);const k=(0,s.useCallback)((()=>{Y.current&&I({...Y.current,pageToken:void 0})}),[I]);return(({experimentIds:e,lastFetchedTime:t,fetchRuns:n,searchFacets:a,enabled:o,cachedPinnedRuns:r,runsData:i,isLoadingRuns:d})=>{const c=(0,s.useRef)(void 0),u=(0,s.useRef)(d),p=(0,s.useRef)(o),m=(0,s.useRef)(i.runInfos);m.current=i.runInfos,u.current=d,p.current=o,(0,s.useEffect)((()=>{if(window.clearTimeout(c.current),!o||d)return;const s=async()=>{const o=Boolean(t.current),i=t.current?Date.now()-t.current:0;if(a&&o&&i>=xa.t4){const t=m.current.length,o=Math.max(1,Math.ceil(t/l.Aj))*l.Aj,s={...(0,xa.TB)(e,{...a,runsPinned:r.current},Date.now()),requestedFacets:a,maxResults:o};let i,d=0,c=0;const u=(e,n)=>{var a,r;return!!(c+(null!==(a=null===n||void 0===n||null===(r=n.runs)||void 0===r?void 0:r.length)&&void 0!==a?a:0)<o&&null!==n&&void 0!==n&&n.next_page_token)||!p.current||t>o||!(0,R.isEqual)(e.requestedFacets,s.requestedFacets)};for(;(0===d||i)&&!(c>=o);){d++;const e=await n({...s,pageToken:i},{isAutoRefreshing:!0,discardResultsFn:u});c+=(0,R.isArray)(null===e||void 0===e?void 0:e.runs)?e.runs.length:0,i=null===e||void 0===e?void 0:e.next_page_token}}window.clearTimeout(c.current),p.current&&(c.current=window.setTimeout(s,xa.t4))};return s(),()=>{clearTimeout(c.current)}}),[e,n,a,o,r,t,d])})({experimentIds:n,fetchRuns:I,searchFacets:t,enabled:e.autoRefreshEnabled&&(0,U.Hn)(),cachedPinnedRuns:x,runsData:r,isLoadingRuns:c,lastFetchedTime:y}),{isLoadingRuns:c,moreRunsAvailable:Boolean(g),refreshRuns:k,loadMoreRuns:async()=>{const e=ka(t,n,x.current);return g&&e?I({...e,pageToken:g}):[]},isInitialLoadingRuns:p,runsData:r,requestError:f}},Sa=()=>({datasetsList:[],experimentTags:{},metricKeyList:[],metricsList:[],modelVersionsByRunUuid:{},paramKeyList:[],paramsList:[],runInfos:[],runUuidsMatchingFilter:[],tagsList:[],inputsOutputsList:[]}),Ea=(e,t,n=!1)=>{const[a]=(0,m.ok)(),o=(0,V.A)(),r=a.get(d.ex),i=Boolean(r),l=(0,Ze.Px)(),[c,u]=(0,s.useState)(null),[p,h]=(0,s.useState)(null),[f,v]=(0,s.useState)(null),[_,x]=(0,s.useState)(null);(0,s.useEffect)((()=>{if(!r||!t)return;const e=t.tags.find((({key:e})=>e===`${d.o6}${r}`));if(!e)return u(null),h(null),v(`Error loading shared view state: share key ${r} does not exist`),void x(o.formatMessage({id:"s2L+xL",defaultMessage:'Error loading shared view state: share key "{viewStateShareKey}" does not exist'},{viewStateShareKey:r}));(async e=>{try{const t=await(async e=>(0,yt.ib)(e)?JSON.parse(await(0,yt.U1)(e)):JSON.parse(e))(e.value),n=(0,R.pick)(t,Ze.sO),a=(0,R.pick)(t,Rn.HC);u(n),h(a),v(null),x(null)}catch(t){u(null),h(null),v("Error loading shared view state: share key is invalid"),x(o.formatMessage({id:"Isig6r",defaultMessage:"Error loading shared view state: share key is invalid"}))}})(e)}),[t,r,o]),(0,s.useEffect)((()=>{c&&!n&&l(c,{replace:!0})}),[c,n]),(0,s.useEffect)((()=>{p&&!n&&e(p)}),[e,p,n]);const y=(0,m.Zp)();return(0,s.useEffect)((()=>{n||f&&t&&(w.A.logErrorAndNotifyUser(new Error(f)),w.A.displayGlobalErrorNotification(_,3),y(g.Ay.getExperimentPageRoute(t.experimentId),{replace:!0}))}),[f,_,t,y,n]),{isViewStateShared:i,sharedStateError:f}},Da=[(e,t,n,a)=>{if(a)return t;const o=n.runInfos.filter(((e,t)=>{var a,o;return(null===(a=n.tagsList[t])||void 0===a||null===(o=a[d.yU])||void 0===o?void 0:o.value)===d.m4})).map((({runUuid:e})=>e)),r=(0,R.compact)(n.runInfos.map((({runUuid:e},t)=>{var a;return o.includes(e)&&(null===(a=n.tagsList[t])||void 0===a?void 0:a[_.Ol].value)})));return r.length?{...t,runsExpanded:r.reduce(((e,t)=>({...e,[t]:!0})),t.runsExpanded)}:t}],Ta=(0,Rn.uY)(),Ra=(e,t)=>{if(0===e.runInfos.length||0===t.length)return null;const n=t.map((e=>e.experimentId)).sort(),a=e.runInfos.map((e=>e.runUuid)).sort();return`${n.join(":")}:${a.join(":")}`};var Fa=n(62702),La=n(97805),Ba=n(52969);var Na={name:"1g7ixto",styles:"height:100%;display:flex;align-items:center;justify-content:center"};const Pa=()=>(0,h.Y)("div",{css:Na,children:(0,h.Y)(r.Empty,{description:(0,h.Y)(c.A,{id:"VMVNTR",defaultMessage:"Requested experiment was not found."}),image:(0,h.Y)(r.NoIcon,{}),title:(0,h.Y)(c.A,{id:"/sk75d",defaultMessage:"Experiment not found"})})});var Oa={name:"1g7ixto",styles:"height:100%;display:flex;align-items:center;justify-content:center"};const Ha=()=>(0,h.Y)("div",{css:Oa,children:(0,h.Y)(r.Empty,{description:(0,h.Y)(c.A,{id:"PSFpHG",defaultMessage:"You don't have permissions to open requested experiment."}),image:(0,h.Y)(r.NoIcon,{}),title:(0,h.Y)(c.A,{id:"cIV9pX",defaultMessage:"Permission denied"})})});var Ua={name:"1wnowod",styles:"display:flex;align-items:center;justify-content:center"};const Va=({error:e,image:t,title:n,button:a,className:s})=>(0,h.Y)("div",{css:Ua,className:s,children:(0,h.Y)(r.Empty,{description:e.message,image:null!==t&&void 0!==t?t:(0,h.Y)(o.W,{}),title:null!==n&&void 0!==n?n:(0,h.Y)(c.A,{id:"G/zTTY",defaultMessage:"Error"}),button:a})});var Ga=n(22647),Ka=n(11039),za=n(83667),ja=n(62230),$a=n(7355),qa=n(15543);var Wa={name:"13udsys",styles:"height:100%"},Ja={name:"1h8i7is",styles:"overflow-y:hidden;flex-shrink:0;transition:max-height .12s"};const Qa=({showHeader:e=!0})=>{var t,n,c;const u=(0,v.wA)(),{theme:p}=(0,o.u)(),[m,g,_]=(0,Ze.sR)(),[x]=(0,Be.an)(),y=(b=g,(0,v.d4)((e=>b.map((t=>e.entities.experimentsById[t])).filter(Boolean)),((e,t)=>(0,R.isEqual)(e,t))));var b;const[Y]=y,{fetchExperiments:C,isLoadingExperiment:A,requestError:I}=(()=>{const e=(0,s.useContext)(ha.Y);if(!e)throw new Error("Trying to use GetExperimentsContext actions outside of the context!");return e})(),{elementHeight:k,observeHeight:M}=(e=>{const[t,n]=(0,s.useState)(null),[a,o]=(0,s.useState)(void 0);return(0,s.useEffect)((()=>{if(!t||!window.ResizeObserver)return;const n=new ResizeObserver((([t])=>{null===e||void 0===e||e(t),t.target.scrollHeight&&o(t.target.scrollHeight)}));return n.observe(t),()=>n.disconnect()}),[t,e]),{elementHeight:a,observeHeight:n}})(),[S,E]=(0,s.useState)(!1),[D,T]=(0,s.useState)(!0),[L,B,N]=(e=>{const t=(0,s.useMemo)((()=>JSON.stringify(e.sort())),[e]),[n,a]=(0,s.useState)(null),[{uiState:o,isSeeded:r,isFirstVisit:i},l]=((0,Ze.Px)(),(0,s.useReducer)(((e,t)=>{if("UPDATE_UI_STATE"===t.type){const n="function"===typeof t.payload?t.payload(e.uiState):t.payload;return{...e,uiState:n}}return"INITIAL_UI_STATE_SEEDED"===t.type?e.isSeeded?e:{...e,isSeeded:!0}:"LOAD_NEW_EXPERIMENT"===t.type?{uiState:t.payload.uiState,isFirstVisit:t.payload.isFirstVisit,currentPersistKey:t.payload.newPersistKey,isSeeded:t.payload.isSeeded}:e}),void 0,(()=>{const e=va(t),n=Boolean((0,R.keys)(e||{}).length),a=n?(0,R.pick)(e,Rn.HC):{};return{uiState:{...Ta,...a},isSeeded:n,isFirstVisit:!n,currentPersistKey:t}}))),d=(0,s.useCallback)((e=>{l({type:"UPDATE_UI_STATE",payload:e})}),[]),c=(0,s.useCallback)(((e,t)=>{if(!i||0===e.length||0===t.runInfos.length)return;const o=Ra(t,e);n===o&&r||r&&!(0,U.kj)()||(d((n=>Da.reduce(((n,a)=>a(e,n,t,r)),{...n}))),a(o),r||l({type:"INITIAL_UI_STATE_SEEDED"}))}),[r,i,d,n]);return(0,s.useEffect)((()=>{const e=va(t),n=(0,R.pick)(e,Rn.HC),a=Boolean((0,R.keys)(e||{}).length),o=!a;l({type:"LOAD_NEW_EXPERIMENT",payload:{uiState:{...Ta,...n},isSeeded:a,isFirstVisit:o,newPersistKey:t}})}),[t]),[o,d,c]})(g),{isViewStateShared:P}=Ea(B,(0,R.first)(y)),O=L.viewMaximized,{isLoadingRuns:H,loadMoreRuns:V,runsData:G,moreRunsAvailable:K,requestError:z,refreshRuns:j}=Ma(L,m,g);(0,s.useEffect)((()=>{g.every((e=>y.find((t=>t.experimentId===e))))||C(g)}),[C,g,y]),(0,s.useEffect)((()=>{N(y,G)}),[N,y,G]),(0,s.useEffect)((()=>{const e=(0,l.wT)(g);u(e).catch((e=>{(0,U.Ng)()||w.A.logErrorAndNotifyUser(e)}))}),[u,g]);const $=g.length>1;_a(L,m,g,P||_);const q=Boolean(!A&&y[0]&&G&&m),{mutate:W,isLoading:J}=(0,ja.G)((()=>{if(!$)return u((0,l.yc)(g[0]))})),Q=(0,za.BH)(null===(t=(0,R.first)(y))||void 0===t?void 0:t.tags),Z=null===(n=(0,R.first)(y))||void 0===n?void 0:n.experimentId,{inferredExperimentKind:X,isLoading:ee,dismiss:te}=(0,$a.F)({experimentId:Z,isLoadingExperiment:A,enabled:e&&!$&&(0,U.XQ)()&&!Q,experimentTags:null===(c=(0,R.first)(y))||void 0===c?void 0:c.tags,updateExperimentKind:W});if(I instanceof Aa.m_||I instanceof F.s&&I.getErrorCode()===i.tG.RESOURCE_DOES_NOT_EXIST)return(0,h.Y)(Pa,{});if(I instanceof Aa.i_||I instanceof F.s&&I.getErrorCode()===i.tG.PERMISSION_DENIED)return(0,h.Y)(Ha,{});if(I instanceof Error)return(0,h.Y)(Va,{css:Wa,error:I});if(!q)return(0,h.Y)(r.LegacySkeleton,{});le()(m,"searchFacets should be initialized at this point");const ne=A||!y[0];if(X===d.Gk.NO_INFERRED_TYPE&&(0,U.XQ)())return(0,h.Y)(qa.T,{onConfirm:e=>{Z&&W({experimentId:Z,kind:e},{onSettled:te})},onDismiss:te});return(0,h.Y)(et.i,{setUIState:B,children:(0,h.FD)("div",{css:Za.experimentViewWrapper,children:[ne?(0,h.Y)(r.LegacySkeleton,{title:!0,paragraph:!1,active:!0}):e?(0,h.Y)(h.FK,{children:$?(0,h.Y)(f,{experiments:y}):(0,h.FD)(h.FK,{children:[(0,U.w7)()?(0,h.FD)(h.FK,{children:[(0,h.Y)(Ga.i,{experiment:Y,searchFacetsState:m||void 0,uiState:L,setEditing:E,experimentKindSelector:!$&&Z?(0,h.Y)(Ka.f,{value:Q,inferredExperimentKind:X,onChange:e=>W({experimentId:Z,kind:e}),isUpdating:J||ee,readOnly:!1},X):null}),(0,h.Y)("div",{css:(0,a.AH)({width:"100%",borderTop:`1px solid ${p.colors.border}`,marginTop:p.spacing.sm,marginBottom:p.spacing.sm},"")})]}):(0,h.Y)(La.i,{experiment:Y,searchFacetsState:m||void 0,uiState:L,showAddDescriptionButton:D,setEditing:E}),(0,h.Y)("div",{style:{maxHeight:O?0:k},css:Ja,children:(0,h.Y)("div",{ref:M,children:(0,h.Y)(Fa.A,{experiment:Y,setShowAddDescriptionButton:T,editing:S,setEditing:E})})})]})}):(0,h.FD)(h.FK,{children:[null,null]}),"TRACES"===x?(0,h.Y)(Ba.$,{experimentIds:g}):(0,h.Y)(ga,{isLoading:!1,experiments:y,isLoadingRuns:H,runsData:G,searchFacetsState:m,loadMoreRuns:V,moreRunsAvailable:K,requestError:z,refreshRuns:j,uiState:L})]})})},Za={experimentViewWrapper:{height:"100%",display:"flex",flexDirection:"column"}}},72069:function(e,t,n){n.d(t,{W:function(){return u}});var a=n(13062),o=n(37523),r=n(88443),s=n(30214),i=n(53660),l=n(91144),d=n(3546),c=n(50111);const u=({viewState:e,runsAreGrouped:t,hideBorder:n=!0})=>{const[,u]=(0,d.sR)(),{theme:p}=(0,a.u)(),[m,g]=(0,i.an)(),{classNamePrefix:h}=(0,a.u)(),f=m||(0,i.mb)(),v=((0,l.GV)()?["TABLE","CHART","ARTIFACT"]:["TABLE","CHART"]).includes(f)?"RUNS":f,_=1===u.length?u[0]:void 0;return(0,c.FD)(o.LegacyTabs,{dangerouslyAppendEmotionCSS:{[`.${h}-tabs-nav`]:{marginBottom:0,"::before":{display:n?"none":"block"}}},activeKey:v,onChange:e=>{const t=e;if(v!==t)return"RUNS"===t?g("TABLE"):void g(t,_)},children:[(0,c.Y)(o.LegacyTabs.TabPane,{tab:(0,c.Y)("span",{"data-testid":"experiment-runs-mode-switch-combined",children:(0,c.Y)(r.A,{id:"qpFaad",defaultMessage:"Runs"})})},"RUNS"),_&&(0,c.Y)(o.LegacyTabs.TabPane,{tab:(0,c.FD)("span",{"data-testid":"experiment-runs-mode-switch-models",children:[(0,c.Y)(r.A,{id:"b8rdDM",defaultMessage:"Models"}),(0,c.Y)(s.W,{})]})},"MODELS"),(0,c.Y)(o.LegacyTabs.TabPane,{disabled:(0,l.GV)()||t,tab:(0,c.Y)(o.LegacyTooltip,{title:!(0,l.GV)()&&t?(0,c.Y)(r.A,{id:"YOp3/x",defaultMessage:"Unavailable when runs are grouped"}):void 0,children:(0,c.FD)("span",{"data-testid":"experiment-runs-mode-switch-evaluation",css:(0,l.GV)()&&{display:"inline-flex",alignItems:"center",gap:p.spacing.xs},children:[(0,c.Y)(r.A,{id:"SCqKp8",defaultMessage:"Evaluation"}),(0,l.GV)()?(0,c.Y)(o.InfoPopover,{popoverProps:{maxWidth:350},iconProps:{style:{marginRight:0}},children:(0,c.Y)(r.A,{id:"sFPlmE",defaultMessage:'Accessing artifact evaluation by "Evaluation" tab is being discontinued. In order to use this feature, use <link>"Artifacts evaluation" mode in Runs tab</link> instead.',values:{link:e=>"ARTIFACT"===m?e:(0,c.Y)(a.T.Link,{componentId:"mlflow.experiment_page.evaluation_tab_migration_info_link",onClick:()=>g("ARTIFACT",_),children:e})}})}):(0,c.Y)(s.W,{})]})})},"ARTIFACT"),(0,c.Y)(o.LegacyTabs.TabPane,{tab:(0,c.Y)("span",{"data-testid":"experiment-runs-mode-switch-traces",children:(0,c.Y)(r.A,{id:"AGQOPV",defaultMessage:"Traces"})})},"TRACES")]})}},79085:function(e,t,n){n.d(t,{o:function(){return c},z:function(){return p}});var a=n(89555),o=(n(31014),n(37523)),r=n(13062),s=n(6958),i=n(88464),l=n(30214),d=n(50111);function c({menu:e}){const t=(0,d.Y)(o.Menu,{children:e.map((({id:e,itemName:t,onClick:n,href:a,...r})=>(0,d.Y)(o.Menu.Item,{onClick:n,href:a,"data-test-id":e,...r,children:t},e)))});return e.length>0?(0,d.Y)(o.Dropdown,{overlay:t,trigger:["click"],placement:"bottomLeft",arrow:!0,children:(0,d.Y)(r.B,{componentId:"codegen_mlflow_app_src_shared_building_blocks_pageheader.tsx_54",icon:(0,d.Y)(o.OverflowIcon,{}),"data-test-id":"overflow-menu-trigger","aria-label":"Open header dropdown menu"})}):null}var u={name:"1gz4j9a",styles:"margin-left:0"};function p(e){const{title:t,breadcrumbs:n=[],titleAddOns:c=[],preview:p,children:m,spacerSize:g,hideSpacer:h=!1,dangerouslyAppendEmotionCSS:f}=e,{theme:v}=(0,r.u)();(0,i.A)();return(0,d.FD)(d.FK,{children:[(0,d.Y)(o.Header,{breadcrumbs:n.length>0&&(0,d.Y)(o.Breadcrumb,{includeTrailingCaret:!0,children:n.map(((e,t)=>(0,d.Y)(o.Breadcrumb.Item,{children:e},t)))}),buttons:m,title:t,titleAddOns:(0,d.FD)(d.FK,{children:[p&&(0,d.Y)(l.W,{css:u}),c]}),dangerouslyAppendEmotionCSS:f}),(0,d.Y)(s.S,{css:(0,a.AH)({flexShrink:0,...h?{display:"none"}:{}},""),size:g})]})}},79662:function(e,t,n){n.d(t,{y:function(){return i}});var a=n(13062),o=n(37523),r=n(88464),s=n(50111);const i=({experiment:e,size:t})=>{const n=(0,r.A)();return(0,s.Y)(a.T.Text,{size:t,dangerouslySetAntdProps:{copyable:{text:e.name,icon:(0,s.Y)(o.CopyIcon,{}),tooltips:[n.formatMessage({id:"A7R0ii",defaultMessage:"Copy path"}),n.formatMessage({id:"JCboZ7",defaultMessage:"Path copied"})]}}})}},85349:function(e,t,n){n.d(t,{J:function(){return i}});var a=n(13062),o=n(37523),r=n(88464),s=n(50111);const i=({experiment:e})=>{const t=(0,r.A)();return(0,s.Y)(a.T.Text,{size:"md",dangerouslySetAntdProps:{copyable:{text:e.artifactLocation,icon:(0,s.Y)(o.CopyIcon,{}),tooltips:[t.formatMessage({id:"cSSMIs",defaultMessage:"Copy artifact location"}),t.formatMessage({id:"5aZ7nE",defaultMessage:"Artifact location copied"})]}}})}},89736:function(e,t,n){n.d(t,{Y:function(){return u},Z:function(){return p}});var a=n(9133),o=n(31014),r=n(62448),s=n(91144),i=n(68621),l=n(76010),d=n(10811),c=n(50111);const u=(0,o.createContext)(null),p=({children:e,actions:t})=>{const[n,p]=(0,o.useState)([]),[m,g]=(0,o.useState)(!1),[h,f]=(0,o.useState)(null),v=(0,d.wA)(),_=(0,o.useCallback)((e=>{f(null),(()=>{const n=e.map((e=>{const n=t.getExperimentApi(e);return v(n).catch((e=>{(0,s.Ng)()||l.A.logErrorAndNotifyUser(e)})),n.meta.id}));p((e=>(0,a.isEqual)(n,e)?e:n))})()}),[t,v]),x=(0,o.useMemo)((()=>({fetchExperiments:_,isLoadingExperiment:m,requestError:h,actions:t})),[t,_,m,h]);return(0,c.Y)(u.Provider,{value:x,children:(0,c.Y)(i.Ay,{shouldOptimisticallyRender:!0,requestIds:n,children:(t,a,o)=>(g(o.some((e=>n.includes(e.id)&&e.active))),h||o.forEach((e=>{if(e.error){if((0,s.Ng)()){const t=(0,r.h)(e.error);if(t)return void f(t)}f(e.error)}})),e)})})}},96070:function(e,t,n){n.d(t,{$K:function(){return i},M8:function(){return u},jP:function(){return c},tY:function(){return s}});var a=n(31014),o=n(98590),r=n(50111);const s=e=>e.filter((e=>!e.startsWith(o.nt))).map((e=>e.includes('"')||e.includes(" ")||e.includes(".")?`\`${e}\``:e.includes("`")?`"${e}"`:e)),i=(e,t)=>[{label:"Metrics",options:e.metricNames.map((e=>({value:`metrics.${e}`})))},{label:"Parameters",options:e.paramNames.map((e=>({value:`params.${e}`})))},{label:"Tags",options:e.tagNames.map((e=>({value:`tags.${e}`})))},{label:"Attributes",options:t}];var l={name:"lugakg",styles:"font-weight:normal"};const d=(e,t)=>{const n=e.split(RegExp(t.replace(".","\\."),"ig")),o=e.match(RegExp(t.replace(".","\\."),"ig"));return(0,r.Y)("span",{css:l,"data-test-id":e,children:n.map(((e,t)=>(0,r.FD)(a.Fragment,{children:[e,t!==n.length-1&&o&&(0,r.Y)("b",{children:o[t]})]},t)))})},c=e=>{const t=/>|<|>=|<=|=|!=|like|ilike/gi,n=(e=>{const t=/and[\s]+/gi,n=[];let a,o;for(;o=t.lastIndex,a=t.exec(e);)n.push({clause:e.substring(o,a.index),startIndex:o});return n.push({clause:e.substring(o),startIndex:o}),n})(e),a=[];return n.forEach((e=>{const n=e.clause.split(t)[0],{startIndex:o}=e;a.push({name:n,startIndex:0+o,endIndex:n.length+o})})),a},u=(e,t,n)=>e.map((e=>{const a=e.options.filter((e=>e.value.toLowerCase().includes(t.name.toLowerCase().trim()))).map((e=>({value:e.value,label:d(e.value,t.name.trim())}))),o=n[e.label],r=[...a.slice(0,o),...a.length>o?[{label:"...",value:`..._${e.label}`}]:[]];return{label:e.label,options:r}})).filter((e=>e.options.length>0))},97196:function(e,t,n){n.d(t,{s:function(){return i}});var a=n(13062),o=n(37523),r=n(88464),s=n(50111);const i=({experiment:e})=>{const t=(0,r.A)();return(0,s.Y)(a.T.Text,{size:"md",dangerouslySetAntdProps:{copyable:{text:e.experimentId,icon:(0,s.Y)(o.CopyIcon,{}),tooltips:[t.formatMessage({id:"rytnce",defaultMessage:"Copy experiment id"}),t.formatMessage({id:"qH2cN+",defaultMessage:"Experiment id copied"})]}}})}},97805:function(e,t,n){n.d(t,{i:function(){return N},J:function(){return O}});var a=n(89555),o=n(31014),r=n(13062),s=n(37523),i=n(88443),l=n(79085),d=n(79662),c=n(32793),u=n(38924),p=n(97196),m=n(85349),g=n(25866),h=n(93215),f=n(58481),v=n(97026),_=n(26809),x=n(76010),y=n(10811),b=n(7204),w=n(25869),Y=n(50111);class C extends o.Component{constructor(...e){super(...e),this.handleSubmit=()=>{const{experimentId:e,activeExperimentIds:t}=this.props,n=(0,b.yk)();return this.props.deleteExperimentApi(e,n).then((()=>{if(null!==t&&void 0!==t&&t.includes(e))if(1===t.length)this.props.navigate(f.Ay.rootRoute);else{const n=t.filter((t=>t!==e)),a=1===n.length?f.Ay.getExperimentPageRoute(n[0]):f.Ay.getCompareExperimentsPageRoute(n);this.props.navigate(a)}})).then((()=>this.props.onExperimentDeleted())).catch((e=>{x.A.logErrorAndNotifyUser(e)}))}}render(){return(0,Y.Y)(v.u,{isOpen:this.props.isOpen,onClose:this.props.onClose,handleSubmit:this.handleSubmit,title:`Delete Experiment "${this.props.experimentName}"`,helpText:(0,Y.FD)("div",{children:[(0,Y.Y)("p",{children:(0,Y.FD)("b",{children:['Experiment "',this.props.experimentName,'" (Experiment ID: ',this.props.experimentId,") will be deleted."]})}),""]}),confirmButtonText:"Delete"})}}const A={deleteExperimentApi:_.lJ},I=(0,w.h)((0,y.Ng)(void 0,A)(C));var k=n(80683),M=n.n(k),S=n(67245),E=n(58645),D=n(87877),T=n(26458);class R extends o.Component{constructor(...e){super(...e),this.handleRenameExperiment=e=>{const t=e[E.m];return this.props.updateExperimentApi(this.props.experimentId,t).then((()=>{this.props.getExperimentApi(this.props.experimentId),this.props.onExperimentRenamed()})).catch((e=>x.A.logErrorAndNotifyUser(e)))},this.debouncedExperimentNameValidator=M()((0,D.J)((()=>this.props.experimentNames)),400)}render(){const{isOpen:e,experimentName:t}=this.props;return(0,Y.Y)(S.B,{title:"Rename Experiment",okText:"Save",isOpen:e,handleSubmit:this.handleRenameExperiment,onClose:this.props.onClose,children:(0,Y.Y)(E.P,{type:"experiment",name:t,visible:e,validator:this.debouncedExperimentNameValidator})})}}const F={updateExperimentApi:_.Td,getExperimentApi:_.yc},L=(0,y.Ng)((e=>({experimentNames:(0,T.DZ)(e).map((e=>e.name))})),F)(R);var B=n(5513);const N=o.memo((({experiment:e,searchFacetsState:t,uiState:n,showAddDescriptionButton:v,setEditing:_})=>{const x=(0,B.M)(),[y,b]=(0,o.useState)(!1),[w,C]=(0,o.useState)(!1),A=(0,h.Zp)(),k=(0,o.useMemo)((()=>e?[null===e||void 0===e?void 0:e.experimentId]:[]),[e]),{theme:M}=(0,r.u)(),S=(0,o.useMemo)((()=>e.name.split("/").pop()),[e.name]),E=g.Cm;return(0,Y.FD)(l.z,{breadcrumbs:[(0,Y.Y)(h.N_,{to:f.Ay.experimentsObservatoryRoute,children:"Experiments"})],title:(0,Y.Y)("div",{css:(0,a.AH)({[M.responsive.mediaQueries.xs]:{display:"inline",wordBreak:"break-all"},[M.responsive.mediaQueries.sm]:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"middle"}},""),title:S,children:S}),titleAddOns:[(0,Y.Y)("div",{style:{display:"flex"},children:(0,Y.Y)(s.InfoPopover,{iconTitle:"Info",children:(0,Y.FD)("div",{css:(0,a.AH)({display:"flex",flexDirection:"column",gap:M.spacing.xs,flexWrap:"nowrap"},""),"data-testid":"experiment-view-header-info-tooltip-content",children:[(0,Y.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,Y.Y)(i.A,{id:"F8MqzZ",defaultMessage:"Path"}),": ",e.name+" ",(0,Y.Y)(d.y,{experiment:e,size:"md"})]}),(0,Y.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,Y.Y)(i.A,{id:"PZGZHV",defaultMessage:"Experiment ID"}),": ",e.experimentId+" ",(0,Y.Y)(p.s,{experiment:e})]}),(0,Y.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,Y.Y)(i.A,{id:"8/7V3S",defaultMessage:"Artifact Location"}),": ",(0,Y.Y)(u.c,{artifactLocation:e.artifactLocation})," ",(0,Y.Y)(m.J,{experiment:e})]})]})})}),(0,Y.Y)(r.B,{href:E,target:"_blank",rel:"noreferrer",componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentviewheaderv2.tsx_100",css:(0,a.AH)({marginLeft:M.spacing.sm},""),type:"link",size:"small",endIcon:(0,Y.Y)(r.av,{}),children:(0,Y.Y)(i.A,{id:"d78wwA",defaultMessage:"Provide Feedback"})}),v&&(0,Y.Y)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentviewheaderv2.tsx_271",size:"small",onClick:()=>{_(!0)},css:(0,a.AH)({marginLeft:M.spacing.sm,background:`${M.colors.backgroundSecondary} !important`,border:"none"},""),children:(0,Y.Y)(r.T.Text,{size:"md",children:"Add Description"})})].filter(Boolean),spacerSize:"sm",dangerouslyAppendEmotionCSS:{[M.responsive.mediaQueries.sm]:{"& > div":{flexWrap:"nowrap"},h2:{display:"flex",overflow:"hidden"}}},children:[(0,Y.FD)("div",{css:(0,a.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,Y.Y)(l.o,{menu:[{id:"rename",itemName:(0,Y.Y)(i.A,{id:"3FZ8dZ",defaultMessage:"Rename"}),onClick:()=>C(!0)},{id:"delete",itemName:(0,Y.Y)(i.A,{id:"YuYnxd",defaultMessage:"Delete"}),onClick:()=>b(!0)}]}),(0,Y.Y)(c.z,{experimentIds:k,searchFacetsState:t,uiState:n})]}),(0,Y.Y)(L,{experimentId:e.experimentId,experimentName:e.name,isOpen:w,onClose:()=>C(!1),onExperimentRenamed:x}),(0,Y.Y)(I,{experimentId:e.experimentId,experimentName:e.name,isOpen:y,onClose:()=>b(!1),onExperimentDeleted:()=>{x(),A(f.Ay.experimentsObservatoryRoute)}})]})}));var P={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};function O(){const{theme:e}=(0,r.u)();return(0,Y.FD)("div",{css:(0,a.AH)({height:2*e.general.heightSm},""),children:[(0,Y.Y)("div",{css:(0,a.AH)({height:e.spacing.lg},""),children:(0,Y.Y)(s.GenericSkeleton,{css:(0,a.AH)({width:100,height:e.spacing.md},""),loading:!0})}),(0,Y.FD)("div",{css:P,children:[(0,Y.Y)("div",{children:(0,Y.Y)(s.GenericSkeleton,{css:(0,a.AH)({width:160,height:e.general.heightSm},""),loading:!0})}),(0,Y.FD)("div",{css:(0,a.AH)({display:"flex",gap:e.spacing.sm},""),children:[(0,Y.Y)(s.GenericSkeleton,{css:(0,a.AH)({width:100,height:e.general.heightSm},""),loading:!0}),(0,Y.Y)(s.GenericSkeleton,{css:(0,a.AH)({width:60,height:e.general.heightSm},""),loading:!0})]})]})]})}}}]);
//# sourceMappingURL=4651.207c9de1.chunk.js.map